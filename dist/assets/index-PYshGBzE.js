(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))c(m);new MutationObserver(m=>{for(const u of m)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function i(m){const u={};return m.integrity&&(u.integrity=m.integrity),m.referrerPolicy&&(u.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?u.credentials="include":m.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function c(m){if(m.ep)return;m.ep=!0;const u=i(m);fetch(m.href,u)}})();function ib(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var fu={exports:{}},Ar={};var wh;function Cv(){if(wh)return Ar;wh=1;var a=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(c,m,u){var h=null;if(u!==void 0&&(h=""+u),m.key!==void 0&&(h=""+m.key),"key"in m){u={};for(var g in m)g!=="key"&&(u[g]=m[g])}else u=m;return m=u.ref,{$$typeof:a,type:c,key:h,ref:m!==void 0?m:null,props:u}}return Ar.Fragment=r,Ar.jsx=i,Ar.jsxs=i,Ar}var Sh;function Av(){return Sh||(Sh=1,fu.exports=Cv()),fu.exports}var t=Av(),hu={exports:{}},Ce={};var kh;function Ev(){if(kh)return Ce;kh=1;var a=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),D=Symbol.iterator;function C(w){return w===null||typeof w!="object"?null:(w=D&&w[D]||w["@@iterator"],typeof w=="function"?w:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,k={};function L(w,E,ne){this.props=w,this.context=E,this.refs=k,this.updater=ne||z}L.prototype.isReactComponent={},L.prototype.setState=function(w,E){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,E,"setState")},L.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function N(){}N.prototype=L.prototype;function U(w,E,ne){this.props=w,this.context=E,this.refs=k,this.updater=ne||z}var M=U.prototype=new N;M.constructor=U,_(M,L.prototype),M.isPureReactComponent=!0;var J=Array.isArray;function te(){}var q={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function I(w,E,ne){var he=ne.ref;return{$$typeof:a,type:w,key:E,ref:he!==void 0?he:null,props:ne}}function T(w,E){return I(w.type,E,w.props)}function P(w){return typeof w=="object"&&w!==null&&w.$$typeof===a}function $(w){var E={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(ne){return E[ne]})}var le=/\/+/g;function ie(w,E){return typeof w=="object"&&w!==null&&w.key!=null?$(""+w.key):E.toString(36)}function W(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(te,te):(w.status="pending",w.then(function(E){w.status==="pending"&&(w.status="fulfilled",w.value=E)},function(E){w.status==="pending"&&(w.status="rejected",w.reason=E)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function R(w,E,ne,he,ge){var Ne=typeof w;(Ne==="undefined"||Ne==="boolean")&&(w=null);var ke=!1;if(w===null)ke=!0;else switch(Ne){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(w.$$typeof){case a:case r:ke=!0;break;case j:return ke=w._init,R(ke(w._payload),E,ne,he,ge)}}if(ke)return ge=ge(w),ke=he===""?"."+ie(w,0):he,J(ge)?(ne="",ke!=null&&(ne=ke.replace(le,"$&/")+"/"),R(ge,E,ne,"",function(Je){return Je})):ge!=null&&(P(ge)&&(ge=T(ge,ne+(ge.key==null||w&&w.key===ge.key?"":(""+ge.key).replace(le,"$&/")+"/")+ke)),E.push(ge)),1;ke=0;var ce=he===""?".":he+":";if(J(w))for(var ve=0;ve<w.length;ve++)he=w[ve],Ne=ce+ie(he,ve),ke+=R(he,E,ne,Ne,ge);else if(ve=C(w),typeof ve=="function")for(w=ve.call(w),ve=0;!(he=w.next()).done;)he=he.value,Ne=ce+ie(he,ve++),ke+=R(he,E,ne,Ne,ge);else if(Ne==="object"){if(typeof w.then=="function")return R(W(w),E,ne,he,ge);throw E=String(w),Error("Objects are not valid as a React child (found: "+(E==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":E)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ee(w,E,ne){if(w==null)return w;var he=[],ge=0;return R(w,he,"","",function(Ne){return E.call(ne,Ne,ge++)}),he}function Q(w){if(w._status===-1){var E=w._result;E=E(),E.then(function(ne){(w._status===0||w._status===-1)&&(w._status=1,w._result=ne)},function(ne){(w._status===0||w._status===-1)&&(w._status=2,w._result=ne)}),w._status===-1&&(w._status=0,w._result=E)}if(w._status===1)return w._result.default;throw w._result}var H=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},ue={map:ee,forEach:function(w,E,ne){ee(w,function(){E.apply(this,arguments)},ne)},count:function(w){var E=0;return ee(w,function(){E++}),E},toArray:function(w){return ee(w,function(E){return E})||[]},only:function(w){if(!P(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return Ce.Activity=v,Ce.Children=ue,Ce.Component=L,Ce.Fragment=i,Ce.Profiler=m,Ce.PureComponent=U,Ce.StrictMode=c,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(w){return q.H.useMemoCache(w)}},Ce.cache=function(w){return function(){return w.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(w,E,ne){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var he=_({},w.props),ge=w.key;if(E!=null)for(Ne in E.key!==void 0&&(ge=""+E.key),E)!Y.call(E,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&E.ref===void 0||(he[Ne]=E[Ne]);var Ne=arguments.length-2;if(Ne===1)he.children=ne;else if(1<Ne){for(var ke=Array(Ne),ce=0;ce<Ne;ce++)ke[ce]=arguments[ce+2];he.children=ke}return I(w.type,ge,he)},Ce.createContext=function(w){return w={$$typeof:h,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:u,_context:w},w},Ce.createElement=function(w,E,ne){var he,ge={},Ne=null;if(E!=null)for(he in E.key!==void 0&&(Ne=""+E.key),E)Y.call(E,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ge[he]=E[he]);var ke=arguments.length-2;if(ke===1)ge.children=ne;else if(1<ke){for(var ce=Array(ke),ve=0;ve<ke;ve++)ce[ve]=arguments[ve+2];ge.children=ce}if(w&&w.defaultProps)for(he in ke=w.defaultProps,ke)ge[he]===void 0&&(ge[he]=ke[he]);return I(w,Ne,ge)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(w){return{$$typeof:g,render:w}},Ce.isValidElement=P,Ce.lazy=function(w){return{$$typeof:j,_payload:{_status:-1,_result:w},_init:Q}},Ce.memo=function(w,E){return{$$typeof:b,type:w,compare:E===void 0?null:E}},Ce.startTransition=function(w){var E=q.T,ne={};q.T=ne;try{var he=w(),ge=q.S;ge!==null&&ge(ne,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(te,H)}catch(Ne){H(Ne)}finally{E!==null&&ne.types!==null&&(E.types=ne.types),q.T=E}},Ce.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Ce.use=function(w){return q.H.use(w)},Ce.useActionState=function(w,E,ne){return q.H.useActionState(w,E,ne)},Ce.useCallback=function(w,E){return q.H.useCallback(w,E)},Ce.useContext=function(w){return q.H.useContext(w)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(w,E){return q.H.useDeferredValue(w,E)},Ce.useEffect=function(w,E){return q.H.useEffect(w,E)},Ce.useEffectEvent=function(w){return q.H.useEffectEvent(w)},Ce.useId=function(){return q.H.useId()},Ce.useImperativeHandle=function(w,E,ne){return q.H.useImperativeHandle(w,E,ne)},Ce.useInsertionEffect=function(w,E){return q.H.useInsertionEffect(w,E)},Ce.useLayoutEffect=function(w,E){return q.H.useLayoutEffect(w,E)},Ce.useMemo=function(w,E){return q.H.useMemo(w,E)},Ce.useOptimistic=function(w,E){return q.H.useOptimistic(w,E)},Ce.useReducer=function(w,E,ne){return q.H.useReducer(w,E,ne)},Ce.useRef=function(w){return q.H.useRef(w)},Ce.useState=function(w){return q.H.useState(w)},Ce.useSyncExternalStore=function(w,E,ne){return q.H.useSyncExternalStore(w,E,ne)},Ce.useTransition=function(){return q.H.useTransition()},Ce.version="19.2.4",Ce}var Ch;function um(){return Ch||(Ch=1,hu.exports=Ev()),hu.exports}var x=um();const Tv=ib(x);var pu={exports:{}},Er={},bu={exports:{}},gu={};var Ah;function Dv(){return Ah||(Ah=1,(function(a){function r(R,ee){var Q=R.length;R.push(ee);e:for(;0<Q;){var H=Q-1>>>1,ue=R[H];if(0<m(ue,ee))R[H]=ee,R[Q]=ue,Q=H;else break e}}function i(R){return R.length===0?null:R[0]}function c(R){if(R.length===0)return null;var ee=R[0],Q=R.pop();if(Q!==ee){R[0]=Q;e:for(var H=0,ue=R.length,w=ue>>>1;H<w;){var E=2*(H+1)-1,ne=R[E],he=E+1,ge=R[he];if(0>m(ne,Q))he<ue&&0>m(ge,ne)?(R[H]=ge,R[he]=Q,H=he):(R[H]=ne,R[E]=Q,H=E);else if(he<ue&&0>m(ge,Q))R[H]=ge,R[he]=Q,H=he;else break e}}return ee}function m(R,ee){var Q=R.sortIndex-ee.sortIndex;return Q!==0?Q:R.id-ee.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();a.unstable_now=function(){return h.now()-g}}var p=[],b=[],j=1,v=null,D=3,C=!1,z=!1,_=!1,k=!1,L=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function M(R){for(var ee=i(b);ee!==null;){if(ee.callback===null)c(b);else if(ee.startTime<=R)c(b),ee.sortIndex=ee.expirationTime,r(p,ee);else break;ee=i(b)}}function J(R){if(_=!1,M(R),!z)if(i(p)!==null)z=!0,te||(te=!0,$());else{var ee=i(b);ee!==null&&W(J,ee.startTime-R)}}var te=!1,q=-1,Y=5,I=-1;function T(){return k?!0:!(a.unstable_now()-I<Y)}function P(){if(k=!1,te){var R=a.unstable_now();I=R;var ee=!0;try{e:{z=!1,_&&(_=!1,N(q),q=-1),C=!0;var Q=D;try{t:{for(M(R),v=i(p);v!==null&&!(v.expirationTime>R&&T());){var H=v.callback;if(typeof H=="function"){v.callback=null,D=v.priorityLevel;var ue=H(v.expirationTime<=R);if(R=a.unstable_now(),typeof ue=="function"){v.callback=ue,M(R),ee=!0;break t}v===i(p)&&c(p),M(R)}else c(p);v=i(p)}if(v!==null)ee=!0;else{var w=i(b);w!==null&&W(J,w.startTime-R),ee=!1}}break e}finally{v=null,D=Q,C=!1}ee=void 0}}finally{ee?$():te=!1}}}var $;if(typeof U=="function")$=function(){U(P)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ie=le.port2;le.port1.onmessage=P,$=function(){ie.postMessage(null)}}else $=function(){L(P,0)};function W(R,ee){q=L(function(){R(a.unstable_now())},ee)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(R){R.callback=null},a.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<R?Math.floor(1e3/R):5},a.unstable_getCurrentPriorityLevel=function(){return D},a.unstable_next=function(R){switch(D){case 1:case 2:case 3:var ee=3;break;default:ee=D}var Q=D;D=ee;try{return R()}finally{D=Q}},a.unstable_requestPaint=function(){k=!0},a.unstable_runWithPriority=function(R,ee){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Q=D;D=R;try{return ee()}finally{D=Q}},a.unstable_scheduleCallback=function(R,ee,Q){var H=a.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?H+Q:H):Q=H,R){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Q+ue,R={id:j++,callback:ee,priorityLevel:R,startTime:Q,expirationTime:ue,sortIndex:-1},Q>H?(R.sortIndex=Q,r(b,R),i(p)===null&&R===i(b)&&(_?(N(q),q=-1):_=!0,W(J,Q-H))):(R.sortIndex=ue,r(p,R),z||C||(z=!0,te||(te=!0,$()))),R},a.unstable_shouldYield=T,a.unstable_wrapCallback=function(R){var ee=D;return function(){var Q=D;D=ee;try{return R.apply(this,arguments)}finally{D=Q}}}})(gu)),gu}var Eh;function Rv(){return Eh||(Eh=1,bu.exports=Dv()),bu.exports}var yu={exports:{}},Rt={};var Th;function Mv(){if(Th)return Rt;Th=1;var a=um();function r(p){var b="https://react.dev/errors/"+p;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)b+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+p+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var c={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},m=Symbol.for("react.portal");function u(p,b,j){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:v==null?null:""+v,children:p,containerInfo:b,implementation:j}}var h=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,b){if(p==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,Rt.createPortal=function(p,b){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(r(299));return u(p,b,null,j)},Rt.flushSync=function(p){var b=h.T,j=c.p;try{if(h.T=null,c.p=2,p)return p()}finally{h.T=b,c.p=j,c.d.f()}},Rt.preconnect=function(p,b){typeof p=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,c.d.C(p,b))},Rt.prefetchDNS=function(p){typeof p=="string"&&c.d.D(p)},Rt.preinit=function(p,b){if(typeof p=="string"&&b&&typeof b.as=="string"){var j=b.as,v=g(j,b.crossOrigin),D=typeof b.integrity=="string"?b.integrity:void 0,C=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;j==="style"?c.d.S(p,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:v,integrity:D,fetchPriority:C}):j==="script"&&c.d.X(p,{crossOrigin:v,integrity:D,fetchPriority:C,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Rt.preinitModule=function(p,b){if(typeof p=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var j=g(b.as,b.crossOrigin);c.d.M(p,{crossOrigin:j,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&c.d.M(p)},Rt.preload=function(p,b){if(typeof p=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var j=b.as,v=g(j,b.crossOrigin);c.d.L(p,j,{crossOrigin:v,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Rt.preloadModule=function(p,b){if(typeof p=="string")if(b){var j=g(b.as,b.crossOrigin);c.d.m(p,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:j,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else c.d.m(p)},Rt.requestFormReset=function(p){c.d.r(p)},Rt.unstable_batchedUpdates=function(p,b){return p(b)},Rt.useFormState=function(p,b,j){return h.H.useFormState(p,b,j)},Rt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Rt.version="19.2.4",Rt}var Dh;function Ov(){if(Dh)return yu.exports;Dh=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(r){console.error(r)}}return a(),yu.exports=Mv(),yu.exports}var Rh;function _v(){if(Rh)return Er;Rh=1;var a=Rv(),r=um(),i=Ov();function c(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var s=e,l=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(l=s.return),e=s.return;while(e)}return s.tag===3?l:null}function h(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function g(e){if(e.tag===31){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(c(188))}function b(e){var s=e.alternate;if(!s){if(s=u(e),s===null)throw Error(c(188));return s!==e?null:e}for(var l=e,n=s;;){var o=l.return;if(o===null)break;var d=o.alternate;if(d===null){if(n=o.return,n!==null){l=n;continue}break}if(o.child===d.child){for(d=o.child;d;){if(d===l)return p(o),e;if(d===n)return p(o),s;d=d.sibling}throw Error(c(188))}if(l.return!==n.return)l=o,n=d;else{for(var f=!1,y=o.child;y;){if(y===l){f=!0,l=o,n=d;break}if(y===n){f=!0,n=o,l=d;break}y=y.sibling}if(!f){for(y=d.child;y;){if(y===l){f=!0,l=d,n=o;break}if(y===n){f=!0,n=d,l=o;break}y=y.sibling}if(!f)throw Error(c(189))}}if(l.alternate!==n)throw Error(c(190))}if(l.tag!==3)throw Error(c(188));return l.stateNode.current===l?e:s}function j(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=j(e),s!==null)return s;e=e.sibling}return null}var v=Object.assign,D=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),U=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),T=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function $(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var le=Symbol.for("react.client.reference");function ie(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===le?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case L:return"Profiler";case k:return"StrictMode";case J:return"Suspense";case te:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case z:return"Portal";case U:return e.displayName||"Context";case N:return(e._context.displayName||"Context")+".Consumer";case M:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case q:return s=e.displayName||null,s!==null?s:ie(e.type)||"Memo";case Y:s=e._payload,e=e._init;try{return ie(e(s))}catch{}}return null}var W=Array.isArray,R=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},H=[],ue=-1;function w(e){return{current:e}}function E(e){0>ue||(e.current=H[ue],H[ue]=null,ue--)}function ne(e,s){ue++,H[ue]=e.current,e.current=s}var he=w(null),ge=w(null),Ne=w(null),ke=w(null);function ce(e,s){switch(ne(Ne,s),ne(ge,e),ne(he,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?V0(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=V0(s),e=X0(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}E(he),ne(he,e)}function ve(){E(he),E(ge),E(Ne)}function Je(e){e.memoizedState!==null&&ne(ke,e);var s=he.current,l=X0(s,e.type);s!==l&&(ne(ge,e),ne(he,l))}function Me(e){ge.current===e&&(E(he),E(ge)),ke.current===e&&(E(ke),wr._currentValue=Q)}var se,K;function be(e){if(se===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);se=s&&s[1]||"",K=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+se+e+K}var Z=!1;function $e(e,s){if(!e||Z)return"";Z=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(s){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ae){var F=ae}Reflect.construct(e,[],de)}else{try{de.call()}catch(ae){F=ae}e.call(de.prototype)}}else{try{throw Error()}catch(ae){F=ae}(de=e())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ae){if(ae&&F&&typeof ae.stack=="string")return[ae.stack,F.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=n.DetermineComponentFrameRoot(),f=d[0],y=d[1];if(f&&y){var O=f.split(`
`),X=y.split(`
`);for(o=n=0;n<O.length&&!O[n].includes("DetermineComponentFrameRoot");)n++;for(;o<X.length&&!X[o].includes("DetermineComponentFrameRoot");)o++;if(n===O.length||o===X.length)for(n=O.length-1,o=X.length-1;1<=n&&0<=o&&O[n]!==X[o];)o--;for(;1<=n&&0<=o;n--,o--)if(O[n]!==X[o]){if(n!==1||o!==1)do if(n--,o--,0>o||O[n]!==X[o]){var re=`
`+O[n].replace(" at new "," at ");return e.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",e.displayName)),re}while(1<=n&&0<=o);break}}}finally{Z=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?be(l):""}function S(e,s){switch(e.tag){case 26:case 27:case 5:return be(e.type);case 16:return be("Lazy");case 13:return e.child!==s&&s!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return $e(e.type,!1);case 11:return $e(e.type.render,!1);case 1:return $e(e.type,!0);case 31:return be("Activity");default:return""}}function xe(e){try{var s="",l=null;do s+=S(e,l),l=e,e=e.return;while(e);return s}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var fe=Object.prototype.hasOwnProperty,He=a.unstable_scheduleCallback,We=a.unstable_cancelCallback,me=a.unstable_shouldYield,Pt=a.unstable_requestPaint,Oe=a.unstable_now,xs=a.unstable_getCurrentPriorityLevel,ta=a.unstable_ImmediatePriority,Ua=a.unstable_UserBlockingPriority,Ps=a.unstable_NormalPriority,Nl=a.unstable_LowPriority,Wr=a.unstable_IdlePriority,ac=a.log,ei=a.unstable_setDisableYieldValue,wl=null,ht=null;function wt(e){if(typeof ac=="function"&&ei(e),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(wl,e)}catch{}}var St=Math.clz32?Math.clz32:za,ti=Math.log,nc=Math.LN2;function za(e){return e>>>=0,e===0?32:31-(ti(e)/nc|0)|0}var Ba=256,$a=262144,qa=4194304;function Ys(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ha(e,s,l){var n=e.pendingLanes;if(n===0)return 0;var o=0,d=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var y=n&134217727;return y!==0?(n=y&~d,n!==0?o=Ys(n):(f&=y,f!==0?o=Ys(f):l||(l=y&~e,l!==0&&(o=Ys(l))))):(y=n&~d,y!==0?o=Ys(y):f!==0?o=Ys(f):l||(l=n&~e,l!==0&&(o=Ys(l)))),o===0?0:s!==0&&s!==o&&(s&d)===0&&(d=o&-o,l=s&-s,d>=l||d===32&&(l&4194048)!==0)?s:o}function sa(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function si(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function la(){var e=qa;return qa<<=1,(qa&62914560)===0&&(qa=4194304),e}function Bn(e){for(var s=[],l=0;31>l;l++)s.push(e);return s}function aa(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Gs(e,s,l,n,o,d){var f=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var y=e.entanglements,O=e.expirationTimes,X=e.hiddenUpdates;for(l=f&~l;0<l;){var re=31-St(l),de=1<<re;y[re]=0,O[re]=-1;var F=X[re];if(F!==null)for(X[re]=null,re=0;re<F.length;re++){var ae=F[re];ae!==null&&(ae.lane&=-536870913)}l&=~de}n!==0&&fs(e,n,0),d!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=d&~(f&~s))}function fs(e,s,l){e.pendingLanes|=s,e.suspendedLanes&=~s;var n=31-St(s);e.entangledLanes|=s,e.entanglements[n]=e.entanglements[n]|1073741824|l&261930}function li(e,s){var l=e.entangledLanes|=s;for(e=e.entanglements;l;){var n=31-St(l),o=1<<n;o&s|e[n]&s&&(e[n]|=s),l&=~o}}function na(e,s){var l=s&-s;return l=(l&42)!==0?1:ra(l),(l&(e.suspendedLanes|s))!==0?0:l}function ra(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ia(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function $n(){var e=ee.p;return e!==0?e:(e=window.event,e===void 0?32:ph(e.type))}function ai(e,s){var l=ee.p;try{return ee.p=e,s()}finally{ee.p=l}}var ks=Math.random().toString(36).slice(2),pt="__reactFiber$"+ks,Tt="__reactProps$"+ks,Sl="__reactContainer$"+ks,oa="__reactEvents$"+ks,ni="__reactListeners$"+ks,rc="__reactHandles$"+ks,ca="__reactResources$"+ks,A="__reactMarker$"+ks;function pe(e){delete e[pt],delete e[Tt],delete e[oa],delete e[ni],delete e[rc]}function Ee(e){var s=e[pt];if(s)return s;for(var l=e.parentNode;l;){if(s=l[Sl]||l[pt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(e=eh(e);e!==null;){if(l=e[pt])return l;e=eh(e)}return s}e=l,l=e.parentNode}return null}function De(e){if(e=e[pt]||e[Sl]){var s=e.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return e}return null}function Pe(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(c(33))}function dt(e){var s=e[ca];return s||(s=e[ca]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function lt(e){e[A]=!0}var hs=new Set,ri={};function Dt(e,s){Pa(e,s),Pa(e+"Capture",s)}function Pa(e,s){for(ri[e]=s,e=0;e<s.length;e++)hs.add(s[e])}var bg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lm={},Um={};function gg(e){return fe.call(Um,e)?!0:fe.call(Lm,e)?!1:bg.test(e)?Um[e]=!0:(Lm[e]=!0,!1)}function ii(e,s,l){if(gg(s))if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var n=s.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+l)}}function oi(e,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+l)}}function Js(e,s,l,n){if(n===null)e.removeAttribute(l);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(s,l,""+n)}}function It(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zm(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function yg(e,s,l){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,s);if(!e.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,d=n.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return o.call(this)},set:function(f){l=""+f,d.call(this,f)}}),Object.defineProperty(e,s,{enumerable:n.enumerable}),{getValue:function(){return l},setValue:function(f){l=""+f},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function ic(e){if(!e._valueTracker){var s=zm(e)?"checked":"value";e._valueTracker=yg(e,s,""+e[s])}}function Bm(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var l=s.getValue(),n="";return e&&(n=zm(e)?e.checked?"true":"false":e.value),e=n,e!==l?(s.setValue(e),!0):!1}function ci(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vg=/[\n"\\]/g;function Wt(e){return e.replace(vg,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function oc(e,s,l,n,o,d,f,y){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),s!=null?f==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+It(s)):e.value!==""+It(s)&&(e.value=""+It(s)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),s!=null?cc(e,f,It(s)):l!=null?cc(e,f,It(l)):n!=null&&e.removeAttribute("value"),o==null&&d!=null&&(e.defaultChecked=!!d),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+It(y):e.removeAttribute("name")}function $m(e,s,l,n,o,d,f,y){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),s!=null||l!=null){if(!(d!=="submit"&&d!=="reset"||s!=null)){ic(e);return}l=l!=null?""+It(l):"",s=s!=null?""+It(s):l,y||s===e.value||(e.value=s),e.defaultValue=s}n=n??o,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=y?e.checked:!!n,e.defaultChecked=!!n,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),ic(e)}function cc(e,s,l){s==="number"&&ci(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Ya(e,s,l,n){if(e=e.options,s){s={};for(var o=0;o<l.length;o++)s["$"+l[o]]=!0;for(l=0;l<e.length;l++)o=s.hasOwnProperty("$"+e[l].value),e[l].selected!==o&&(e[l].selected=o),o&&n&&(e[l].defaultSelected=!0)}else{for(l=""+It(l),s=null,o=0;o<e.length;o++){if(e[o].value===l){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}s!==null||e[o].disabled||(s=e[o])}s!==null&&(s.selected=!0)}}function qm(e,s,l){if(s!=null&&(s=""+It(s),s!==e.value&&(e.value=s),l==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=l!=null?""+It(l):""}function Hm(e,s,l,n){if(s==null){if(n!=null){if(l!=null)throw Error(c(92));if(W(n)){if(1<n.length)throw Error(c(93));n=n[0]}l=n}l==null&&(l=""),s=l}l=It(s),e.defaultValue=l,n=e.textContent,n===l&&n!==""&&n!==null&&(e.value=n),ic(e)}function Ga(e,s){if(s){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=s;return}}e.textContent=s}var jg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pm(e,s,l){var n=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?n?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":n?e.setProperty(s,l):typeof l!="number"||l===0||jg.has(s)?s==="float"?e.cssFloat=l:e[s]=(""+l).trim():e[s]=l+"px"}function Ym(e,s,l){if(s!=null&&typeof s!="object")throw Error(c(62));if(e=e.style,l!=null){for(var n in l)!l.hasOwnProperty(n)||s!=null&&s.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var o in s)n=s[o],s.hasOwnProperty(o)&&l[o]!==n&&Pm(e,o,n)}else for(var d in s)s.hasOwnProperty(d)&&Pm(e,d,s[d])}function dc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ng=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function di(e){return wg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Vs(){}var uc=null;function mc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ja=null,Va=null;function Gm(e){var s=De(e);if(s&&(e=s.stateNode)){var l=e[Tt]||null;e:switch(e=s.stateNode,s.type){case"input":if(oc(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Wt(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var n=l[s];if(n!==e&&n.form===e.form){var o=n[Tt]||null;if(!o)throw Error(c(90));oc(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(s=0;s<l.length;s++)n=l[s],n.form===e.form&&Bm(n)}break e;case"textarea":qm(e,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Ya(e,!!l.multiple,s,!1)}}}var xc=!1;function Jm(e,s,l){if(xc)return e(s,l);xc=!0;try{var n=e(s);return n}finally{if(xc=!1,(Ja!==null||Va!==null)&&(Zi(),Ja&&(s=Ja,e=Va,Va=Ja=null,Gm(s),e)))for(s=0;s<e.length;s++)Gm(e[s])}}function qn(e,s){var l=e.stateNode;if(l===null)return null;var n=l[Tt]||null;if(n===null)return null;l=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(c(231,s,typeof l));return l}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fc=!1;if(Xs)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){fc=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch{fc=!1}var kl=null,hc=null,ui=null;function Vm(){if(ui)return ui;var e,s=hc,l=s.length,n,o="value"in kl?kl.value:kl.textContent,d=o.length;for(e=0;e<l&&s[e]===o[e];e++);var f=l-e;for(n=1;n<=f&&s[l-n]===o[d-n];n++);return ui=o.slice(e,1<n?1-n:void 0)}function mi(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function xi(){return!0}function Xm(){return!1}function Ut(e){function s(l,n,o,d,f){this._reactName=l,this._targetInst=o,this.type=n,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(l=e[y],this[y]=l?l(d):d[y]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?xi:Xm,this.isPropagationStopped=Xm,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=xi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=xi)},persist:function(){},isPersistent:xi}),s}var da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fi=Ut(da),Pn=v({},da,{view:0,detail:0}),Sg=Ut(Pn),pc,bc,Yn,hi=v({},Pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yn&&(Yn&&e.type==="mousemove"?(pc=e.screenX-Yn.screenX,bc=e.screenY-Yn.screenY):bc=pc=0,Yn=e),pc)},movementY:function(e){return"movementY"in e?e.movementY:bc}}),Qm=Ut(hi),kg=v({},hi,{dataTransfer:0}),Cg=Ut(kg),Ag=v({},Pn,{relatedTarget:0}),gc=Ut(Ag),Eg=v({},da,{animationName:0,elapsedTime:0,pseudoElement:0}),Tg=Ut(Eg),Dg=v({},da,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rg=Ut(Dg),Mg=v({},da,{data:0}),Fm=Ut(Mg),Og={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_g={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ug(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Lg[e])?!!s[e]:!1}function yc(){return Ug}var zg=v({},Pn,{key:function(e){if(e.key){var s=Og[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=mi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_g[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yc,charCode:function(e){return e.type==="keypress"?mi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bg=Ut(zg),$g=v({},hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Km=Ut($g),qg=v({},Pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yc}),Hg=Ut(qg),Pg=v({},da,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yg=Ut(Pg),Gg=v({},hi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jg=Ut(Gg),Vg=v({},da,{newState:0,oldState:0}),Xg=Ut(Vg),Qg=[9,13,27,32],vc=Xs&&"CompositionEvent"in window,Gn=null;Xs&&"documentMode"in document&&(Gn=document.documentMode);var Fg=Xs&&"TextEvent"in window&&!Gn,Zm=Xs&&(!vc||Gn&&8<Gn&&11>=Gn),Im=" ",Wm=!1;function ex(e,s){switch(e){case"keyup":return Qg.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xa=!1;function Kg(e,s){switch(e){case"compositionend":return tx(s);case"keypress":return s.which!==32?null:(Wm=!0,Im);case"textInput":return e=s.data,e===Im&&Wm?null:e;default:return null}}function Zg(e,s){if(Xa)return e==="compositionend"||!vc&&ex(e,s)?(e=Vm(),ui=hc=kl=null,Xa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Zm&&s.locale!=="ko"?null:s.data;default:return null}}var Ig={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sx(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!Ig[e.type]:s==="textarea"}function lx(e,s,l,n){Ja?Va?Va.push(n):Va=[n]:Ja=n,s=ao(s,"onChange"),0<s.length&&(l=new fi("onChange","change",null,l,n),e.push({event:l,listeners:s}))}var Jn=null,Vn=null;function Wg(e){q0(e,0)}function pi(e){var s=Pe(e);if(Bm(s))return e}function ax(e,s){if(e==="change")return s}var nx=!1;if(Xs){var jc;if(Xs){var Nc="oninput"in document;if(!Nc){var rx=document.createElement("div");rx.setAttribute("oninput","return;"),Nc=typeof rx.oninput=="function"}jc=Nc}else jc=!1;nx=jc&&(!document.documentMode||9<document.documentMode)}function ix(){Jn&&(Jn.detachEvent("onpropertychange",ox),Vn=Jn=null)}function ox(e){if(e.propertyName==="value"&&pi(Vn)){var s=[];lx(s,Vn,e,mc(e)),Jm(Wg,s)}}function ey(e,s,l){e==="focusin"?(ix(),Jn=s,Vn=l,Jn.attachEvent("onpropertychange",ox)):e==="focusout"&&ix()}function ty(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pi(Vn)}function sy(e,s){if(e==="click")return pi(s)}function ly(e,s){if(e==="input"||e==="change")return pi(s)}function ay(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Yt=typeof Object.is=="function"?Object.is:ay;function Xn(e,s){if(Yt(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var l=Object.keys(e),n=Object.keys(s);if(l.length!==n.length)return!1;for(n=0;n<l.length;n++){var o=l[n];if(!fe.call(s,o)||!Yt(e[o],s[o]))return!1}return!0}function cx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dx(e,s){var l=cx(e);e=0;for(var n;l;){if(l.nodeType===3){if(n=e+l.textContent.length,e<=s&&n>=s)return{node:l,offset:s-e};e=n}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=cx(l)}}function ux(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?ux(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function mx(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=ci(e.document);s instanceof e.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)e=s.contentWindow;else break;s=ci(e.document)}return s}function wc(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var ny=Xs&&"documentMode"in document&&11>=document.documentMode,Qa=null,Sc=null,Qn=null,kc=!1;function xx(e,s,l){var n=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;kc||Qa==null||Qa!==ci(n)||(n=Qa,"selectionStart"in n&&wc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Qn&&Xn(Qn,n)||(Qn=n,n=ao(Sc,"onSelect"),0<n.length&&(s=new fi("onSelect","select",null,s,l),e.push({event:s,listeners:n}),s.target=Qa)))}function ua(e,s){var l={};return l[e.toLowerCase()]=s.toLowerCase(),l["Webkit"+e]="webkit"+s,l["Moz"+e]="moz"+s,l}var Fa={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionrun:ua("Transition","TransitionRun"),transitionstart:ua("Transition","TransitionStart"),transitioncancel:ua("Transition","TransitionCancel"),transitionend:ua("Transition","TransitionEnd")},Cc={},fx={};Xs&&(fx=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function ma(e){if(Cc[e])return Cc[e];if(!Fa[e])return e;var s=Fa[e],l;for(l in s)if(s.hasOwnProperty(l)&&l in fx)return Cc[e]=s[l];return e}var hx=ma("animationend"),px=ma("animationiteration"),bx=ma("animationstart"),ry=ma("transitionrun"),iy=ma("transitionstart"),oy=ma("transitioncancel"),gx=ma("transitionend"),yx=new Map,Ac="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ac.push("scrollEnd");function ps(e,s){yx.set(e,s),Dt(s,[e])}var bi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},es=[],Ka=0,Ec=0;function gi(){for(var e=Ka,s=Ec=Ka=0;s<e;){var l=es[s];es[s++]=null;var n=es[s];es[s++]=null;var o=es[s];es[s++]=null;var d=es[s];if(es[s++]=null,n!==null&&o!==null){var f=n.pending;f===null?o.next=o:(o.next=f.next,f.next=o),n.pending=o}d!==0&&vx(l,o,d)}}function yi(e,s,l,n){es[Ka++]=e,es[Ka++]=s,es[Ka++]=l,es[Ka++]=n,Ec|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Tc(e,s,l,n){return yi(e,s,l,n),vi(e)}function xa(e,s){return yi(e,null,null,s),vi(e)}function vx(e,s,l){e.lanes|=l;var n=e.alternate;n!==null&&(n.lanes|=l);for(var o=!1,d=e.return;d!==null;)d.childLanes|=l,n=d.alternate,n!==null&&(n.childLanes|=l),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(o=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,o&&s!==null&&(o=31-St(l),e=d.hiddenUpdates,n=e[o],n===null?e[o]=[s]:n.push(s),s.lane=l|536870912),d):null}function vi(e){if(50<pr)throw pr=0,Bd=null,Error(c(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var Za={};function cy(e,s,l,n){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,s,l,n){return new cy(e,s,l,n)}function Dc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qs(e,s){var l=e.alternate;return l===null?(l=Gt(e.tag,s,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=s,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,s=e.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function jx(e,s){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,s=l.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function ji(e,s,l,n,o,d){var f=0;if(n=e,typeof e=="function")Dc(e)&&(f=1);else if(typeof e=="string")f=fv(e,l,he.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case I:return e=Gt(31,l,s,o),e.elementType=I,e.lanes=d,e;case _:return fa(l.children,o,d,s);case k:f=8,o|=24;break;case L:return e=Gt(12,l,s,o|2),e.elementType=L,e.lanes=d,e;case J:return e=Gt(13,l,s,o),e.elementType=J,e.lanes=d,e;case te:return e=Gt(19,l,s,o),e.elementType=te,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U:f=10;break e;case N:f=9;break e;case M:f=11;break e;case q:f=14;break e;case Y:f=16,n=null;break e}f=29,l=Error(c(130,e===null?"null":typeof e,"")),n=null}return s=Gt(f,l,s,o),s.elementType=e,s.type=n,s.lanes=d,s}function fa(e,s,l,n){return e=Gt(7,e,n,s),e.lanes=l,e}function Rc(e,s,l){return e=Gt(6,e,null,s),e.lanes=l,e}function Nx(e){var s=Gt(18,null,null,0);return s.stateNode=e,s}function Mc(e,s,l){return s=Gt(4,e.children!==null?e.children:[],e.key,s),s.lanes=l,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var wx=new WeakMap;function ts(e,s){if(typeof e=="object"&&e!==null){var l=wx.get(e);return l!==void 0?l:(s={value:e,source:s,stack:xe(s)},wx.set(e,s),s)}return{value:e,source:s,stack:xe(s)}}var Ia=[],Wa=0,Ni=null,Fn=0,ss=[],ls=0,Cl=null,Cs=1,As="";function Fs(e,s){Ia[Wa++]=Fn,Ia[Wa++]=Ni,Ni=e,Fn=s}function Sx(e,s,l){ss[ls++]=Cs,ss[ls++]=As,ss[ls++]=Cl,Cl=e;var n=Cs;e=As;var o=32-St(n)-1;n&=~(1<<o),l+=1;var d=32-St(s)+o;if(30<d){var f=o-o%5;d=(n&(1<<f)-1).toString(32),n>>=f,o-=f,Cs=1<<32-St(s)+o|l<<o|n,As=d+e}else Cs=1<<d|l<<o|n,As=e}function Oc(e){e.return!==null&&(Fs(e,1),Sx(e,1,0))}function _c(e){for(;e===Ni;)Ni=Ia[--Wa],Ia[Wa]=null,Fn=Ia[--Wa],Ia[Wa]=null;for(;e===Cl;)Cl=ss[--ls],ss[ls]=null,As=ss[--ls],ss[ls]=null,Cs=ss[--ls],ss[ls]=null}function kx(e,s){ss[ls++]=Cs,ss[ls++]=As,ss[ls++]=Cl,Cs=s.id,As=s.overflow,Cl=e}var kt=null,et=null,Be=!1,Al=null,as=!1,Lc=Error(c(519));function El(e){var s=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kn(ts(s,e)),Lc}function Cx(e){var s=e.stateNode,l=e.type,n=e.memoizedProps;switch(s[pt]=e,s[Tt]=n,l){case"dialog":Le("cancel",s),Le("close",s);break;case"iframe":case"object":case"embed":Le("load",s);break;case"video":case"audio":for(l=0;l<gr.length;l++)Le(gr[l],s);break;case"source":Le("error",s);break;case"img":case"image":case"link":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"input":Le("invalid",s),$m(s,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Le("invalid",s);break;case"textarea":Le("invalid",s),Hm(s,n.value,n.defaultValue,n.children)}l=n.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||n.suppressHydrationWarning===!0||G0(s.textContent,l)?(n.popover!=null&&(Le("beforetoggle",s),Le("toggle",s)),n.onScroll!=null&&Le("scroll",s),n.onScrollEnd!=null&&Le("scrollend",s),n.onClick!=null&&(s.onclick=Vs),s=!0):s=!1,s||El(e,!0)}function Ax(e){for(kt=e.return;kt;)switch(kt.tag){case 5:case 31:case 13:as=!1;return;case 27:case 3:as=!0;return;default:kt=kt.return}}function en(e){if(e!==kt)return!1;if(!Be)return Ax(e),Be=!0,!1;var s=e.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Wd(e.type,e.memoizedProps)),l=!l),l&&et&&El(e),Ax(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));et=W0(e)}else if(s===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));et=W0(e)}else s===27?(s=et,Pl(e.type)?(e=au,au=null,et=e):et=s):et=kt?rs(e.stateNode.nextSibling):null;return!0}function ha(){et=kt=null,Be=!1}function Uc(){var e=Al;return e!==null&&(qt===null?qt=e:qt.push.apply(qt,e),Al=null),e}function Kn(e){Al===null?Al=[e]:Al.push(e)}var zc=w(null),pa=null,Ks=null;function Tl(e,s,l){ne(zc,s._currentValue),s._currentValue=l}function Zs(e){e._currentValue=zc.current,E(zc)}function Bc(e,s,l){for(;e!==null;){var n=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),e===l)break;e=e.return}}function $c(e,s,l,n){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){var f=o.child;d=d.firstContext;e:for(;d!==null;){var y=d;d=o;for(var O=0;O<s.length;O++)if(y.context===s[O]){d.lanes|=l,y=d.alternate,y!==null&&(y.lanes|=l),Bc(d.return,l,e),n||(f=null);break e}d=y.next}}else if(o.tag===18){if(f=o.return,f===null)throw Error(c(341));f.lanes|=l,d=f.alternate,d!==null&&(d.lanes|=l),Bc(f,l,e),f=null}else f=o.child;if(f!==null)f.return=o;else for(f=o;f!==null;){if(f===e){f=null;break}if(o=f.sibling,o!==null){o.return=f.return,f=o;break}f=f.return}o=f}}function tn(e,s,l,n){e=null;for(var o=s,d=!1;o!==null;){if(!d){if((o.flags&524288)!==0)d=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var f=o.alternate;if(f===null)throw Error(c(387));if(f=f.memoizedProps,f!==null){var y=o.type;Yt(o.pendingProps.value,f.value)||(e!==null?e.push(y):e=[y])}}else if(o===ke.current){if(f=o.alternate,f===null)throw Error(c(387));f.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(wr):e=[wr])}o=o.return}e!==null&&$c(s,e,l,n),s.flags|=262144}function wi(e){for(e=e.firstContext;e!==null;){if(!Yt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ba(e){pa=e,Ks=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ct(e){return Ex(pa,e)}function Si(e,s){return pa===null&&ba(e),Ex(e,s)}function Ex(e,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Ks===null){if(e===null)throw Error(c(308));Ks=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else Ks=Ks.next=s;return l}var dy=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(l,n){e.push(n)}};this.abort=function(){s.aborted=!0,e.forEach(function(l){return l()})}},uy=a.unstable_scheduleCallback,my=a.unstable_NormalPriority,ut={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qc(){return{controller:new dy,data:new Map,refCount:0}}function Zn(e){e.refCount--,e.refCount===0&&uy(my,function(){e.controller.abort()})}var In=null,Hc=0,sn=0,ln=null;function xy(e,s){if(In===null){var l=In=[];Hc=0,sn=Gd(),ln={status:"pending",value:void 0,then:function(n){l.push(n)}}}return Hc++,s.then(Tx,Tx),s}function Tx(){if(--Hc===0&&In!==null){ln!==null&&(ln.status="fulfilled");var e=In;In=null,sn=0,ln=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function fy(e,s){var l=[],n={status:"pending",value:null,reason:null,then:function(o){l.push(o)}};return e.then(function(){n.status="fulfilled",n.value=s;for(var o=0;o<l.length;o++)(0,l[o])(s)},function(o){for(n.status="rejected",n.reason=o,o=0;o<l.length;o++)(0,l[o])(void 0)}),n}var Dx=R.S;R.S=function(e,s){f0=Oe(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&xy(e,s),Dx!==null&&Dx(e,s)};var ga=w(null);function Pc(){var e=ga.current;return e!==null?e:Ie.pooledCache}function ki(e,s){s===null?ne(ga,ga.current):ne(ga,s.pool)}function Rx(){var e=Pc();return e===null?null:{parent:ut._currentValue,pool:e}}var an=Error(c(460)),Yc=Error(c(474)),Ci=Error(c(542)),Ai={then:function(){}};function Mx(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ox(e,s,l){switch(l=e[l],l===void 0?e.push(s):l!==s&&(s.then(Vs,Vs),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Lx(e),e;default:if(typeof s.status=="string")s.then(Vs,Vs);else{if(e=Ie,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=s,e.status="pending",e.then(function(n){if(s.status==="pending"){var o=s;o.status="fulfilled",o.value=n}},function(n){if(s.status==="pending"){var o=s;o.status="rejected",o.reason=n}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Lx(e),e}throw va=s,an}}function ya(e){try{var s=e._init;return s(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(va=l,an):l}}var va=null;function _x(){if(va===null)throw Error(c(459));var e=va;return va=null,e}function Lx(e){if(e===an||e===Ci)throw Error(c(483))}var nn=null,Wn=0;function Ei(e){var s=Wn;return Wn+=1,nn===null&&(nn=[]),Ox(nn,e,s)}function er(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function Ti(e,s){throw s.$$typeof===D?Error(c(525)):(e=Object.prototype.toString.call(s),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function Ux(e){function s(G,B){if(e){var V=G.deletions;V===null?(G.deletions=[B],G.flags|=16):V.push(B)}}function l(G,B){if(!e)return null;for(;B!==null;)s(G,B),B=B.sibling;return null}function n(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function o(G,B){return G=Qs(G,B),G.index=0,G.sibling=null,G}function d(G,B,V){return G.index=V,e?(V=G.alternate,V!==null?(V=V.index,V<B?(G.flags|=67108866,B):V):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function f(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function y(G,B,V,oe){return B===null||B.tag!==6?(B=Rc(V,G.mode,oe),B.return=G,B):(B=o(B,V),B.return=G,B)}function O(G,B,V,oe){var we=V.type;return we===_?re(G,B,V.props.children,oe,V.key):B!==null&&(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Y&&ya(we)===B.type)?(B=o(B,V.props),er(B,V),B.return=G,B):(B=ji(V.type,V.key,V.props,null,G.mode,oe),er(B,V),B.return=G,B)}function X(G,B,V,oe){return B===null||B.tag!==4||B.stateNode.containerInfo!==V.containerInfo||B.stateNode.implementation!==V.implementation?(B=Mc(V,G.mode,oe),B.return=G,B):(B=o(B,V.children||[]),B.return=G,B)}function re(G,B,V,oe,we){return B===null||B.tag!==7?(B=fa(V,G.mode,oe,we),B.return=G,B):(B=o(B,V),B.return=G,B)}function de(G,B,V){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Rc(""+B,G.mode,V),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return V=ji(B.type,B.key,B.props,null,G.mode,V),er(V,B),V.return=G,V;case z:return B=Mc(B,G.mode,V),B.return=G,B;case Y:return B=ya(B),de(G,B,V)}if(W(B)||$(B))return B=fa(B,G.mode,V,null),B.return=G,B;if(typeof B.then=="function")return de(G,Ei(B),V);if(B.$$typeof===U)return de(G,Si(G,B),V);Ti(G,B)}return null}function F(G,B,V,oe){var we=B!==null?B.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return we!==null?null:y(G,B,""+V,oe);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case C:return V.key===we?O(G,B,V,oe):null;case z:return V.key===we?X(G,B,V,oe):null;case Y:return V=ya(V),F(G,B,V,oe)}if(W(V)||$(V))return we!==null?null:re(G,B,V,oe,null);if(typeof V.then=="function")return F(G,B,Ei(V),oe);if(V.$$typeof===U)return F(G,B,Si(G,V),oe);Ti(G,V)}return null}function ae(G,B,V,oe,we){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return G=G.get(V)||null,y(B,G,""+oe,we);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case C:return G=G.get(oe.key===null?V:oe.key)||null,O(B,G,oe,we);case z:return G=G.get(oe.key===null?V:oe.key)||null,X(B,G,oe,we);case Y:return oe=ya(oe),ae(G,B,V,oe,we)}if(W(oe)||$(oe))return G=G.get(V)||null,re(B,G,oe,we,null);if(typeof oe.then=="function")return ae(G,B,V,Ei(oe),we);if(oe.$$typeof===U)return ae(G,B,V,Si(B,oe),we);Ti(B,oe)}return null}function ye(G,B,V,oe){for(var we=null,Ye=null,je=B,Re=B=0,ze=null;je!==null&&Re<V.length;Re++){je.index>Re?(ze=je,je=null):ze=je.sibling;var Ge=F(G,je,V[Re],oe);if(Ge===null){je===null&&(je=ze);break}e&&je&&Ge.alternate===null&&s(G,je),B=d(Ge,B,Re),Ye===null?we=Ge:Ye.sibling=Ge,Ye=Ge,je=ze}if(Re===V.length)return l(G,je),Be&&Fs(G,Re),we;if(je===null){for(;Re<V.length;Re++)je=de(G,V[Re],oe),je!==null&&(B=d(je,B,Re),Ye===null?we=je:Ye.sibling=je,Ye=je);return Be&&Fs(G,Re),we}for(je=n(je);Re<V.length;Re++)ze=ae(je,G,Re,V[Re],oe),ze!==null&&(e&&ze.alternate!==null&&je.delete(ze.key===null?Re:ze.key),B=d(ze,B,Re),Ye===null?we=ze:Ye.sibling=ze,Ye=ze);return e&&je.forEach(function(Xl){return s(G,Xl)}),Be&&Fs(G,Re),we}function Se(G,B,V,oe){if(V==null)throw Error(c(151));for(var we=null,Ye=null,je=B,Re=B=0,ze=null,Ge=V.next();je!==null&&!Ge.done;Re++,Ge=V.next()){je.index>Re?(ze=je,je=null):ze=je.sibling;var Xl=F(G,je,Ge.value,oe);if(Xl===null){je===null&&(je=ze);break}e&&je&&Xl.alternate===null&&s(G,je),B=d(Xl,B,Re),Ye===null?we=Xl:Ye.sibling=Xl,Ye=Xl,je=ze}if(Ge.done)return l(G,je),Be&&Fs(G,Re),we;if(je===null){for(;!Ge.done;Re++,Ge=V.next())Ge=de(G,Ge.value,oe),Ge!==null&&(B=d(Ge,B,Re),Ye===null?we=Ge:Ye.sibling=Ge,Ye=Ge);return Be&&Fs(G,Re),we}for(je=n(je);!Ge.done;Re++,Ge=V.next())Ge=ae(je,G,Re,Ge.value,oe),Ge!==null&&(e&&Ge.alternate!==null&&je.delete(Ge.key===null?Re:Ge.key),B=d(Ge,B,Re),Ye===null?we=Ge:Ye.sibling=Ge,Ye=Ge);return e&&je.forEach(function(kv){return s(G,kv)}),Be&&Fs(G,Re),we}function Ze(G,B,V,oe){if(typeof V=="object"&&V!==null&&V.type===_&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case C:e:{for(var we=V.key;B!==null;){if(B.key===we){if(we=V.type,we===_){if(B.tag===7){l(G,B.sibling),oe=o(B,V.props.children),oe.return=G,G=oe;break e}}else if(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Y&&ya(we)===B.type){l(G,B.sibling),oe=o(B,V.props),er(oe,V),oe.return=G,G=oe;break e}l(G,B);break}else s(G,B);B=B.sibling}V.type===_?(oe=fa(V.props.children,G.mode,oe,V.key),oe.return=G,G=oe):(oe=ji(V.type,V.key,V.props,null,G.mode,oe),er(oe,V),oe.return=G,G=oe)}return f(G);case z:e:{for(we=V.key;B!==null;){if(B.key===we)if(B.tag===4&&B.stateNode.containerInfo===V.containerInfo&&B.stateNode.implementation===V.implementation){l(G,B.sibling),oe=o(B,V.children||[]),oe.return=G,G=oe;break e}else{l(G,B);break}else s(G,B);B=B.sibling}oe=Mc(V,G.mode,oe),oe.return=G,G=oe}return f(G);case Y:return V=ya(V),Ze(G,B,V,oe)}if(W(V))return ye(G,B,V,oe);if($(V)){if(we=$(V),typeof we!="function")throw Error(c(150));return V=we.call(V),Se(G,B,V,oe)}if(typeof V.then=="function")return Ze(G,B,Ei(V),oe);if(V.$$typeof===U)return Ze(G,B,Si(G,V),oe);Ti(G,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,B!==null&&B.tag===6?(l(G,B.sibling),oe=o(B,V),oe.return=G,G=oe):(l(G,B),oe=Rc(V,G.mode,oe),oe.return=G,G=oe),f(G)):l(G,B)}return function(G,B,V,oe){try{Wn=0;var we=Ze(G,B,V,oe);return nn=null,we}catch(je){if(je===an||je===Ci)throw je;var Ye=Gt(29,je,null,G.mode);return Ye.lanes=oe,Ye.return=G,Ye}}}var ja=Ux(!0),zx=Ux(!1),Dl=!1;function Gc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jc(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Rl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ml(e,s,l){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ve&2)!==0){var o=n.pending;return o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s,s=vi(e),vx(e,null,l),s}return yi(e,n,s,l),vi(e)}function tr(e,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var n=s.lanes;n&=e.pendingLanes,l|=n,s.lanes=l,li(e,l)}}function Vc(e,s){var l=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,l===n)){var o=null,d=null;if(l=l.firstBaseUpdate,l!==null){do{var f={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};d===null?o=d=f:d=d.next=f,l=l.next}while(l!==null);d===null?o=d=s:d=d.next=s}else o=d=s;l={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:d,shared:n.shared,callbacks:n.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=s:e.next=s,l.lastBaseUpdate=s}var Xc=!1;function sr(){if(Xc){var e=ln;if(e!==null)throw e}}function lr(e,s,l,n){Xc=!1;var o=e.updateQueue;Dl=!1;var d=o.firstBaseUpdate,f=o.lastBaseUpdate,y=o.shared.pending;if(y!==null){o.shared.pending=null;var O=y,X=O.next;O.next=null,f===null?d=X:f.next=X,f=O;var re=e.alternate;re!==null&&(re=re.updateQueue,y=re.lastBaseUpdate,y!==f&&(y===null?re.firstBaseUpdate=X:y.next=X,re.lastBaseUpdate=O))}if(d!==null){var de=o.baseState;f=0,re=X=O=null,y=d;do{var F=y.lane&-536870913,ae=F!==y.lane;if(ae?(Ue&F)===F:(n&F)===F){F!==0&&F===sn&&(Xc=!0),re!==null&&(re=re.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var ye=e,Se=y;F=s;var Ze=l;switch(Se.tag){case 1:if(ye=Se.payload,typeof ye=="function"){de=ye.call(Ze,de,F);break e}de=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Se.payload,F=typeof ye=="function"?ye.call(Ze,de,F):ye,F==null)break e;de=v({},de,F);break e;case 2:Dl=!0}}F=y.callback,F!==null&&(e.flags|=64,ae&&(e.flags|=8192),ae=o.callbacks,ae===null?o.callbacks=[F]:ae.push(F))}else ae={lane:F,tag:y.tag,payload:y.payload,callback:y.callback,next:null},re===null?(X=re=ae,O=de):re=re.next=ae,f|=F;if(y=y.next,y===null){if(y=o.shared.pending,y===null)break;ae=y,y=ae.next,ae.next=null,o.lastBaseUpdate=ae,o.shared.pending=null}}while(!0);re===null&&(O=de),o.baseState=O,o.firstBaseUpdate=X,o.lastBaseUpdate=re,d===null&&(o.shared.lanes=0),zl|=f,e.lanes=f,e.memoizedState=de}}function Bx(e,s){if(typeof e!="function")throw Error(c(191,e));e.call(s)}function $x(e,s){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)Bx(l[e],s)}var rn=w(null),Di=w(0);function qx(e,s){e=rl,ne(Di,e),ne(rn,s),rl=e|s.baseLanes}function Qc(){ne(Di,rl),ne(rn,rn.current)}function Fc(){rl=Di.current,E(rn),E(Di)}var Jt=w(null),ns=null;function Ol(e){var s=e.alternate;ne(ot,ot.current&1),ne(Jt,e),ns===null&&(s===null||rn.current!==null||s.memoizedState!==null)&&(ns=e)}function Kc(e){ne(ot,ot.current),ne(Jt,e),ns===null&&(ns=e)}function Hx(e){e.tag===22?(ne(ot,ot.current),ne(Jt,e),ns===null&&(ns=e)):_l()}function _l(){ne(ot,ot.current),ne(Jt,Jt.current)}function Vt(e){E(Jt),ns===e&&(ns=null),E(ot)}var ot=w(0);function Ri(e){for(var s=e;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||su(l)||lu(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Is=0,Te=null,Fe=null,mt=null,Mi=!1,on=!1,Na=!1,Oi=0,ar=0,cn=null,hy=0;function rt(){throw Error(c(321))}function Zc(e,s){if(s===null)return!1;for(var l=0;l<s.length&&l<e.length;l++)if(!Yt(e[l],s[l]))return!1;return!0}function Ic(e,s,l,n,o,d){return Is=d,Te=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,R.H=e===null||e.memoizedState===null?kf:xd,Na=!1,d=l(n,o),Na=!1,on&&(d=Yx(s,l,n,o)),Px(e),d}function Px(e){R.H=ir;var s=Fe!==null&&Fe.next!==null;if(Is=0,mt=Fe=Te=null,Mi=!1,ar=0,cn=null,s)throw Error(c(300));e===null||xt||(e=e.dependencies,e!==null&&wi(e)&&(xt=!0))}function Yx(e,s,l,n){Te=e;var o=0;do{if(on&&(cn=null),ar=0,on=!1,25<=o)throw Error(c(301));if(o+=1,mt=Fe=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}R.H=Cf,d=s(l,n)}while(on);return d}function py(){var e=R.H,s=e.useState()[0];return s=typeof s.then=="function"?nr(s):s,e=e.useState()[0],(Fe!==null?Fe.memoizedState:null)!==e&&(Te.flags|=1024),s}function Wc(){var e=Oi!==0;return Oi=0,e}function ed(e,s,l){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~l}function td(e){if(Mi){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}Mi=!1}Is=0,mt=Fe=Te=null,on=!1,ar=Oi=0,cn=null}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Te.memoizedState=mt=e:mt=mt.next=e,mt}function ct(){if(Fe===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var s=mt===null?Te.memoizedState:mt.next;if(s!==null)mt=s,Fe=e;else{if(e===null)throw Te.alternate===null?Error(c(467)):Error(c(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},mt===null?Te.memoizedState=mt=e:mt=mt.next=e}return mt}function _i(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nr(e){var s=ar;return ar+=1,cn===null&&(cn=[]),e=Ox(cn,e,s),s=Te,(mt===null?s.memoizedState:mt.next)===null&&(s=s.alternate,R.H=s===null||s.memoizedState===null?kf:xd),e}function Li(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return nr(e);if(e.$$typeof===U)return Ct(e)}throw Error(c(438,String(e)))}function sd(e){var s=null,l=Te.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var n=Te.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(s={data:n.data.map(function(o){return o.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=_i(),Te.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(e),n=0;n<e;n++)l[n]=T;return s.index++,l}function Ws(e,s){return typeof s=="function"?s(e):s}function Ui(e){var s=ct();return ld(s,Fe,e)}function ld(e,s,l){var n=e.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=l;var o=e.baseQueue,d=n.pending;if(d!==null){if(o!==null){var f=o.next;o.next=d.next,d.next=f}s.baseQueue=o=d,n.pending=null}if(d=e.baseState,o===null)e.memoizedState=d;else{s=o.next;var y=f=null,O=null,X=s,re=!1;do{var de=X.lane&-536870913;if(de!==X.lane?(Ue&de)===de:(Is&de)===de){var F=X.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),de===sn&&(re=!0);else if((Is&F)===F){X=X.next,F===sn&&(re=!0);continue}else de={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},O===null?(y=O=de,f=d):O=O.next=de,Te.lanes|=F,zl|=F;de=X.action,Na&&l(d,de),d=X.hasEagerState?X.eagerState:l(d,de)}else F={lane:de,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},O===null?(y=O=F,f=d):O=O.next=F,Te.lanes|=de,zl|=de;X=X.next}while(X!==null&&X!==s);if(O===null?f=d:O.next=y,!Yt(d,e.memoizedState)&&(xt=!0,re&&(l=ln,l!==null)))throw l;e.memoizedState=d,e.baseState=f,e.baseQueue=O,n.lastRenderedState=d}return o===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function ad(e){var s=ct(),l=s.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=e;var n=l.dispatch,o=l.pending,d=s.memoizedState;if(o!==null){l.pending=null;var f=o=o.next;do d=e(d,f.action),f=f.next;while(f!==o);Yt(d,s.memoizedState)||(xt=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),l.lastRenderedState=d}return[d,n]}function Gx(e,s,l){var n=Te,o=ct(),d=Be;if(d){if(l===void 0)throw Error(c(407));l=l()}else l=s();var f=!Yt((Fe||o).memoizedState,l);if(f&&(o.memoizedState=l,xt=!0),o=o.queue,id(Xx.bind(null,n,o,e),[e]),o.getSnapshot!==s||f||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,dn(9,{destroy:void 0},Vx.bind(null,n,o,l,s),null),Ie===null)throw Error(c(349));d||(Is&127)!==0||Jx(n,s,l)}return l}function Jx(e,s,l){e.flags|=16384,e={getSnapshot:s,value:l},s=Te.updateQueue,s===null?(s=_i(),Te.updateQueue=s,s.stores=[e]):(l=s.stores,l===null?s.stores=[e]:l.push(e))}function Vx(e,s,l,n){s.value=l,s.getSnapshot=n,Qx(s)&&Fx(e)}function Xx(e,s,l){return l(function(){Qx(s)&&Fx(e)})}function Qx(e){var s=e.getSnapshot;e=e.value;try{var l=s();return!Yt(e,l)}catch{return!0}}function Fx(e){var s=xa(e,2);s!==null&&Ht(s,e,2)}function nd(e){var s=Lt();if(typeof e=="function"){var l=e;if(e=l(),Na){wt(!0);try{l()}finally{wt(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:e},s}function Kx(e,s,l,n){return e.baseState=l,ld(e,Fe,typeof n=="function"?n:Ws)}function by(e,s,l,n,o){if($i(e))throw Error(c(485));if(e=s.action,e!==null){var d={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){d.listeners.push(f)}};R.T!==null?l(!0):d.isTransition=!1,n(d),l=s.pending,l===null?(d.next=s.pending=d,Zx(s,d)):(d.next=l.next,s.pending=l.next=d)}}function Zx(e,s){var l=s.action,n=s.payload,o=e.state;if(s.isTransition){var d=R.T,f={};R.T=f;try{var y=l(o,n),O=R.S;O!==null&&O(f,y),Ix(e,s,y)}catch(X){rd(e,s,X)}finally{d!==null&&f.types!==null&&(d.types=f.types),R.T=d}}else try{d=l(o,n),Ix(e,s,d)}catch(X){rd(e,s,X)}}function Ix(e,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(n){Wx(e,s,n)},function(n){return rd(e,s,n)}):Wx(e,s,l)}function Wx(e,s,l){s.status="fulfilled",s.value=l,ef(s),e.state=l,s=e.pending,s!==null&&(l=s.next,l===s?e.pending=null:(l=l.next,s.next=l,Zx(e,l)))}function rd(e,s,l){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do s.status="rejected",s.reason=l,ef(s),s=s.next;while(s!==n)}e.action=null}function ef(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function tf(e,s){return s}function sf(e,s){if(Be){var l=Ie.formState;if(l!==null){e:{var n=Te;if(Be){if(et){t:{for(var o=et,d=as;o.nodeType!==8;){if(!d){o=null;break t}if(o=rs(o.nextSibling),o===null){o=null;break t}}d=o.data,o=d==="F!"||d==="F"?o:null}if(o){et=rs(o.nextSibling),n=o.data==="F!";break e}}El(n)}n=!1}n&&(s=l[0])}}return l=Lt(),l.memoizedState=l.baseState=s,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tf,lastRenderedState:s},l.queue=n,l=Nf.bind(null,Te,n),n.dispatch=l,n=nd(!1),d=md.bind(null,Te,!1,n.queue),n=Lt(),o={state:s,dispatch:null,action:e,pending:null},n.queue=o,l=by.bind(null,Te,o,d,l),o.dispatch=l,n.memoizedState=e,[s,l,!1]}function lf(e){var s=ct();return af(s,Fe,e)}function af(e,s,l){if(s=ld(e,s,tf)[0],e=Ui(Ws)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var n=nr(s)}catch(f){throw f===an?Ci:f}else n=s;s=ct();var o=s.queue,d=o.dispatch;return l!==s.memoizedState&&(Te.flags|=2048,dn(9,{destroy:void 0},gy.bind(null,o,l),null)),[n,d,e]}function gy(e,s){e.action=s}function nf(e){var s=ct(),l=Fe;if(l!==null)return af(s,l,e);ct(),s=s.memoizedState,l=ct();var n=l.queue.dispatch;return l.memoizedState=e,[s,n,!1]}function dn(e,s,l,n){return e={tag:e,create:l,deps:n,inst:s,next:null},s=Te.updateQueue,s===null&&(s=_i(),Te.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=e.next=e:(n=l.next,l.next=e,e.next=n,s.lastEffect=e),e}function rf(){return ct().memoizedState}function zi(e,s,l,n){var o=Lt();Te.flags|=e,o.memoizedState=dn(1|s,{destroy:void 0},l,n===void 0?null:n)}function Bi(e,s,l,n){var o=ct();n=n===void 0?null:n;var d=o.memoizedState.inst;Fe!==null&&n!==null&&Zc(n,Fe.memoizedState.deps)?o.memoizedState=dn(s,d,l,n):(Te.flags|=e,o.memoizedState=dn(1|s,d,l,n))}function of(e,s){zi(8390656,8,e,s)}function id(e,s){Bi(2048,8,e,s)}function yy(e){Te.flags|=4;var s=Te.updateQueue;if(s===null)s=_i(),Te.updateQueue=s,s.events=[e];else{var l=s.events;l===null?s.events=[e]:l.push(e)}}function cf(e){var s=ct().memoizedState;return yy({ref:s,nextImpl:e}),function(){if((Ve&2)!==0)throw Error(c(440));return s.impl.apply(void 0,arguments)}}function df(e,s){return Bi(4,2,e,s)}function uf(e,s){return Bi(4,4,e,s)}function mf(e,s){if(typeof s=="function"){e=e();var l=s(e);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function xf(e,s,l){l=l!=null?l.concat([e]):null,Bi(4,4,mf.bind(null,s,e),l)}function od(){}function ff(e,s){var l=ct();s=s===void 0?null:s;var n=l.memoizedState;return s!==null&&Zc(s,n[1])?n[0]:(l.memoizedState=[e,s],e)}function hf(e,s){var l=ct();s=s===void 0?null:s;var n=l.memoizedState;if(s!==null&&Zc(s,n[1]))return n[0];if(n=e(),Na){wt(!0);try{e()}finally{wt(!1)}}return l.memoizedState=[n,s],n}function cd(e,s,l){return l===void 0||(Is&1073741824)!==0&&(Ue&261930)===0?e.memoizedState=s:(e.memoizedState=l,e=p0(),Te.lanes|=e,zl|=e,l)}function pf(e,s,l,n){return Yt(l,s)?l:rn.current!==null?(e=cd(e,l,n),Yt(e,s)||(xt=!0),e):(Is&42)===0||(Is&1073741824)!==0&&(Ue&261930)===0?(xt=!0,e.memoizedState=l):(e=p0(),Te.lanes|=e,zl|=e,s)}function bf(e,s,l,n,o){var d=ee.p;ee.p=d!==0&&8>d?d:8;var f=R.T,y={};R.T=y,md(e,!1,s,l);try{var O=o(),X=R.S;if(X!==null&&X(y,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var re=fy(O,n);rr(e,s,re,Ft(e))}else rr(e,s,n,Ft(e))}catch(de){rr(e,s,{then:function(){},status:"rejected",reason:de},Ft())}finally{ee.p=d,f!==null&&y.types!==null&&(f.types=y.types),R.T=f}}function vy(){}function dd(e,s,l,n){if(e.tag!==5)throw Error(c(476));var o=gf(e).queue;bf(e,o,s,Q,l===null?vy:function(){return yf(e),l(n)})}function gf(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:Q},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:l},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function yf(e){var s=gf(e);s.next===null&&(s=e.alternate.memoizedState),rr(e,s.next.queue,{},Ft())}function ud(){return Ct(wr)}function vf(){return ct().memoizedState}function jf(){return ct().memoizedState}function jy(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var l=Ft();e=Rl(l);var n=Ml(s,e,l);n!==null&&(Ht(n,s,l),tr(n,s,l)),s={cache:qc()},e.payload=s;return}s=s.return}}function Ny(e,s,l){var n=Ft();l={lane:n,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},$i(e)?wf(s,l):(l=Tc(e,s,l,n),l!==null&&(Ht(l,e,n),Sf(l,s,n)))}function Nf(e,s,l){var n=Ft();rr(e,s,l,n)}function rr(e,s,l,n){var o={lane:n,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if($i(e))wf(s,o);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var f=s.lastRenderedState,y=d(f,l);if(o.hasEagerState=!0,o.eagerState=y,Yt(y,f))return yi(e,s,o,0),Ie===null&&gi(),!1}catch{}if(l=Tc(e,s,o,n),l!==null)return Ht(l,e,n),Sf(l,s,n),!0}return!1}function md(e,s,l,n){if(n={lane:2,revertLane:Gd(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},$i(e)){if(s)throw Error(c(479))}else s=Tc(e,l,n,2),s!==null&&Ht(s,e,2)}function $i(e){var s=e.alternate;return e===Te||s!==null&&s===Te}function wf(e,s){on=Mi=!0;var l=e.pending;l===null?s.next=s:(s.next=l.next,l.next=s),e.pending=s}function Sf(e,s,l){if((l&4194048)!==0){var n=s.lanes;n&=e.pendingLanes,l|=n,s.lanes=l,li(e,l)}}var ir={readContext:Ct,use:Li,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useLayoutEffect:rt,useInsertionEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useSyncExternalStore:rt,useId:rt,useHostTransitionStatus:rt,useFormState:rt,useActionState:rt,useOptimistic:rt,useMemoCache:rt,useCacheRefresh:rt};ir.useEffectEvent=rt;var kf={readContext:Ct,use:Li,useCallback:function(e,s){return Lt().memoizedState=[e,s===void 0?null:s],e},useContext:Ct,useEffect:of,useImperativeHandle:function(e,s,l){l=l!=null?l.concat([e]):null,zi(4194308,4,mf.bind(null,s,e),l)},useLayoutEffect:function(e,s){return zi(4194308,4,e,s)},useInsertionEffect:function(e,s){zi(4,2,e,s)},useMemo:function(e,s){var l=Lt();s=s===void 0?null:s;var n=e();if(Na){wt(!0);try{e()}finally{wt(!1)}}return l.memoizedState=[n,s],n},useReducer:function(e,s,l){var n=Lt();if(l!==void 0){var o=l(s);if(Na){wt(!0);try{l(s)}finally{wt(!1)}}}else o=s;return n.memoizedState=n.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},n.queue=e,e=e.dispatch=Ny.bind(null,Te,e),[n.memoizedState,e]},useRef:function(e){var s=Lt();return e={current:e},s.memoizedState=e},useState:function(e){e=nd(e);var s=e.queue,l=Nf.bind(null,Te,s);return s.dispatch=l,[e.memoizedState,l]},useDebugValue:od,useDeferredValue:function(e,s){var l=Lt();return cd(l,e,s)},useTransition:function(){var e=nd(!1);return e=bf.bind(null,Te,e.queue,!0,!1),Lt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,l){var n=Te,o=Lt();if(Be){if(l===void 0)throw Error(c(407));l=l()}else{if(l=s(),Ie===null)throw Error(c(349));(Ue&127)!==0||Jx(n,s,l)}o.memoizedState=l;var d={value:l,getSnapshot:s};return o.queue=d,of(Xx.bind(null,n,d,e),[e]),n.flags|=2048,dn(9,{destroy:void 0},Vx.bind(null,n,d,l,s),null),l},useId:function(){var e=Lt(),s=Ie.identifierPrefix;if(Be){var l=As,n=Cs;l=(n&~(1<<32-St(n)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Oi++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=hy++,s="_"+s+"r_"+l.toString(32)+"_";return e.memoizedState=s},useHostTransitionStatus:ud,useFormState:sf,useActionState:sf,useOptimistic:function(e){var s=Lt();s.memoizedState=s.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=md.bind(null,Te,!0,l),l.dispatch=s,[e,s]},useMemoCache:sd,useCacheRefresh:function(){return Lt().memoizedState=jy.bind(null,Te)},useEffectEvent:function(e){var s=Lt(),l={impl:e};return s.memoizedState=l,function(){if((Ve&2)!==0)throw Error(c(440));return l.impl.apply(void 0,arguments)}}},xd={readContext:Ct,use:Li,useCallback:ff,useContext:Ct,useEffect:id,useImperativeHandle:xf,useInsertionEffect:df,useLayoutEffect:uf,useMemo:hf,useReducer:Ui,useRef:rf,useState:function(){return Ui(Ws)},useDebugValue:od,useDeferredValue:function(e,s){var l=ct();return pf(l,Fe.memoizedState,e,s)},useTransition:function(){var e=Ui(Ws)[0],s=ct().memoizedState;return[typeof e=="boolean"?e:nr(e),s]},useSyncExternalStore:Gx,useId:vf,useHostTransitionStatus:ud,useFormState:lf,useActionState:lf,useOptimistic:function(e,s){var l=ct();return Kx(l,Fe,e,s)},useMemoCache:sd,useCacheRefresh:jf};xd.useEffectEvent=cf;var Cf={readContext:Ct,use:Li,useCallback:ff,useContext:Ct,useEffect:id,useImperativeHandle:xf,useInsertionEffect:df,useLayoutEffect:uf,useMemo:hf,useReducer:ad,useRef:rf,useState:function(){return ad(Ws)},useDebugValue:od,useDeferredValue:function(e,s){var l=ct();return Fe===null?cd(l,e,s):pf(l,Fe.memoizedState,e,s)},useTransition:function(){var e=ad(Ws)[0],s=ct().memoizedState;return[typeof e=="boolean"?e:nr(e),s]},useSyncExternalStore:Gx,useId:vf,useHostTransitionStatus:ud,useFormState:nf,useActionState:nf,useOptimistic:function(e,s){var l=ct();return Fe!==null?Kx(l,Fe,e,s):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:sd,useCacheRefresh:jf};Cf.useEffectEvent=cf;function fd(e,s,l,n){s=e.memoizedState,l=l(n,s),l=l==null?s:v({},s,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var hd={enqueueSetState:function(e,s,l){e=e._reactInternals;var n=Ft(),o=Rl(n);o.payload=s,l!=null&&(o.callback=l),s=Ml(e,o,n),s!==null&&(Ht(s,e,n),tr(s,e,n))},enqueueReplaceState:function(e,s,l){e=e._reactInternals;var n=Ft(),o=Rl(n);o.tag=1,o.payload=s,l!=null&&(o.callback=l),s=Ml(e,o,n),s!==null&&(Ht(s,e,n),tr(s,e,n))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var l=Ft(),n=Rl(l);n.tag=2,s!=null&&(n.callback=s),s=Ml(e,n,l),s!==null&&(Ht(s,e,l),tr(s,e,l))}};function Af(e,s,l,n,o,d,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,d,f):s.prototype&&s.prototype.isPureReactComponent?!Xn(l,n)||!Xn(o,d):!0}function Ef(e,s,l,n){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,n),s.state!==e&&hd.enqueueReplaceState(s,s.state,null)}function wa(e,s){var l=s;if("ref"in s){l={};for(var n in s)n!=="ref"&&(l[n]=s[n])}if(e=e.defaultProps){l===s&&(l=v({},l));for(var o in e)l[o]===void 0&&(l[o]=e[o])}return l}function Tf(e){bi(e)}function Df(e){console.error(e)}function Rf(e){bi(e)}function qi(e,s){try{var l=e.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(n){setTimeout(function(){throw n})}}function Mf(e,s,l){try{var n=e.onCaughtError;n(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function pd(e,s,l){return l=Rl(l),l.tag=3,l.payload={element:null},l.callback=function(){qi(e,s)},l}function Of(e){return e=Rl(e),e.tag=3,e}function _f(e,s,l,n){var o=l.type.getDerivedStateFromError;if(typeof o=="function"){var d=n.value;e.payload=function(){return o(d)},e.callback=function(){Mf(s,l,n)}}var f=l.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){Mf(s,l,n),typeof o!="function"&&(Bl===null?Bl=new Set([this]):Bl.add(this));var y=n.stack;this.componentDidCatch(n.value,{componentStack:y!==null?y:""})})}function wy(e,s,l,n,o){if(l.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(s=l.alternate,s!==null&&tn(s,l,o,!0),l=Jt.current,l!==null){switch(l.tag){case 31:case 13:return ns===null?Ii():l.alternate===null&&it===0&&(it=3),l.flags&=-257,l.flags|=65536,l.lanes=o,n===Ai?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([n]):s.add(n),Hd(e,n,o)),!1;case 22:return l.flags|=65536,n===Ai?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([n])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([n]):l.add(n)),Hd(e,n,o)),!1}throw Error(c(435,l.tag))}return Hd(e,n,o),Ii(),!1}if(Be)return s=Jt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=o,n!==Lc&&(e=Error(c(422),{cause:n}),Kn(ts(e,l)))):(n!==Lc&&(s=Error(c(423),{cause:n}),Kn(ts(s,l))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,n=ts(n,l),o=pd(e.stateNode,n,o),Vc(e,o),it!==4&&(it=2)),!1;var d=Error(c(520),{cause:n});if(d=ts(d,l),hr===null?hr=[d]:hr.push(d),it!==4&&(it=2),s===null)return!0;n=ts(n,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,e=o&-o,l.lanes|=e,e=pd(l.stateNode,n,e),Vc(l,e),!1;case 1:if(s=l.type,d=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Bl===null||!Bl.has(d))))return l.flags|=65536,o&=-o,l.lanes|=o,o=Of(o),_f(o,e,l,n),Vc(l,o),!1}l=l.return}while(l!==null);return!1}var bd=Error(c(461)),xt=!1;function At(e,s,l,n){s.child=e===null?zx(s,null,l,n):ja(s,e.child,l,n)}function Lf(e,s,l,n,o){l=l.render;var d=s.ref;if("ref"in n){var f={};for(var y in n)y!=="ref"&&(f[y]=n[y])}else f=n;return ba(s),n=Ic(e,s,l,f,d,o),y=Wc(),e!==null&&!xt?(ed(e,s,o),el(e,s,o)):(Be&&y&&Oc(s),s.flags|=1,At(e,s,n,o),s.child)}function Uf(e,s,l,n,o){if(e===null){var d=l.type;return typeof d=="function"&&!Dc(d)&&d.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=d,zf(e,s,d,n,o)):(e=ji(l.type,null,n,s,s.mode,o),e.ref=s.ref,e.return=s,s.child=e)}if(d=e.child,!kd(e,o)){var f=d.memoizedProps;if(l=l.compare,l=l!==null?l:Xn,l(f,n)&&e.ref===s.ref)return el(e,s,o)}return s.flags|=1,e=Qs(d,n),e.ref=s.ref,e.return=s,s.child=e}function zf(e,s,l,n,o){if(e!==null){var d=e.memoizedProps;if(Xn(d,n)&&e.ref===s.ref)if(xt=!1,s.pendingProps=n=d,kd(e,o))(e.flags&131072)!==0&&(xt=!0);else return s.lanes=e.lanes,el(e,s,o)}return gd(e,s,l,n,o)}function Bf(e,s,l,n){var o=n.children,d=e!==null?e.memoizedState:null;if(e===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((s.flags&128)!==0){if(d=d!==null?d.baseLanes|l:l,e!==null){for(n=s.child=e.child,o=0;n!==null;)o=o|n.lanes|n.childLanes,n=n.sibling;n=o&~d}else n=0,s.child=null;return $f(e,s,d,l,n)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&ki(s,d!==null?d.cachePool:null),d!==null?qx(s,d):Qc(),Hx(s);else return n=s.lanes=536870912,$f(e,s,d!==null?d.baseLanes|l:l,l,n)}else d!==null?(ki(s,d.cachePool),qx(s,d),_l(),s.memoizedState=null):(e!==null&&ki(s,null),Qc(),_l());return At(e,s,o,l),s.child}function or(e,s){return e!==null&&e.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function $f(e,s,l,n,o){var d=Pc();return d=d===null?null:{parent:ut._currentValue,pool:d},s.memoizedState={baseLanes:l,cachePool:d},e!==null&&ki(s,null),Qc(),Hx(s),e!==null&&tn(e,s,n,!0),s.childLanes=o,null}function Hi(e,s){return s=Yi({mode:s.mode,children:s.children},e.mode),s.ref=e.ref,e.child=s,s.return=e,s}function qf(e,s,l){return ja(s,e.child,null,l),e=Hi(s,s.pendingProps),e.flags|=2,Vt(s),s.memoizedState=null,e}function Sy(e,s,l){var n=s.pendingProps,o=(s.flags&128)!==0;if(s.flags&=-129,e===null){if(Be){if(n.mode==="hidden")return e=Hi(s,n),s.lanes=536870912,or(null,e);if(Kc(s),(e=et)?(e=I0(e,as),e=e!==null&&e.data==="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:Cl!==null?{id:Cs,overflow:As}:null,retryLane:536870912,hydrationErrors:null},l=Nx(e),l.return=s,s.child=l,kt=s,et=null)):e=null,e===null)throw El(s);return s.lanes=536870912,null}return Hi(s,n)}var d=e.memoizedState;if(d!==null){var f=d.dehydrated;if(Kc(s),o)if(s.flags&256)s.flags&=-257,s=qf(e,s,l);else if(s.memoizedState!==null)s.child=e.child,s.flags|=128,s=null;else throw Error(c(558));else if(xt||tn(e,s,l,!1),o=(l&e.childLanes)!==0,xt||o){if(n=Ie,n!==null&&(f=na(n,l),f!==0&&f!==d.retryLane))throw d.retryLane=f,xa(e,f),Ht(n,e,f),bd;Ii(),s=qf(e,s,l)}else e=d.treeContext,et=rs(f.nextSibling),kt=s,Be=!0,Al=null,as=!1,e!==null&&kx(s,e),s=Hi(s,n),s.flags|=4096;return s}return e=Qs(e.child,{mode:n.mode,children:n.children}),e.ref=s.ref,s.child=e,e.return=s,e}function Pi(e,s){var l=s.ref;if(l===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(c(284));(e===null||e.ref!==l)&&(s.flags|=4194816)}}function gd(e,s,l,n,o){return ba(s),l=Ic(e,s,l,n,void 0,o),n=Wc(),e!==null&&!xt?(ed(e,s,o),el(e,s,o)):(Be&&n&&Oc(s),s.flags|=1,At(e,s,l,o),s.child)}function Hf(e,s,l,n,o,d){return ba(s),s.updateQueue=null,l=Yx(s,n,l,o),Px(e),n=Wc(),e!==null&&!xt?(ed(e,s,d),el(e,s,d)):(Be&&n&&Oc(s),s.flags|=1,At(e,s,l,d),s.child)}function Pf(e,s,l,n,o){if(ba(s),s.stateNode===null){var d=Za,f=l.contextType;typeof f=="object"&&f!==null&&(d=Ct(f)),d=new l(n,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=hd,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=n,d.state=s.memoizedState,d.refs={},Gc(s),f=l.contextType,d.context=typeof f=="object"&&f!==null?Ct(f):Za,d.state=s.memoizedState,f=l.getDerivedStateFromProps,typeof f=="function"&&(fd(s,l,f,n),d.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(f=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),f!==d.state&&hd.enqueueReplaceState(d,d.state,null),lr(s,n,d,o),sr(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),n=!0}else if(e===null){d=s.stateNode;var y=s.memoizedProps,O=wa(l,y);d.props=O;var X=d.context,re=l.contextType;f=Za,typeof re=="object"&&re!==null&&(f=Ct(re));var de=l.getDerivedStateFromProps;re=typeof de=="function"||typeof d.getSnapshotBeforeUpdate=="function",y=s.pendingProps!==y,re||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y||X!==f)&&Ef(s,d,n,f),Dl=!1;var F=s.memoizedState;d.state=F,lr(s,n,d,o),sr(),X=s.memoizedState,y||F!==X||Dl?(typeof de=="function"&&(fd(s,l,de,n),X=s.memoizedState),(O=Dl||Af(s,l,O,n,F,X,f))?(re||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=X),d.props=n,d.state=X,d.context=f,n=O):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{d=s.stateNode,Jc(e,s),f=s.memoizedProps,re=wa(l,f),d.props=re,de=s.pendingProps,F=d.context,X=l.contextType,O=Za,typeof X=="object"&&X!==null&&(O=Ct(X)),y=l.getDerivedStateFromProps,(X=typeof y=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(f!==de||F!==O)&&Ef(s,d,n,O),Dl=!1,F=s.memoizedState,d.state=F,lr(s,n,d,o),sr();var ae=s.memoizedState;f!==de||F!==ae||Dl||e!==null&&e.dependencies!==null&&wi(e.dependencies)?(typeof y=="function"&&(fd(s,l,y,n),ae=s.memoizedState),(re=Dl||Af(s,l,re,n,F,ae,O)||e!==null&&e.dependencies!==null&&wi(e.dependencies))?(X||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(n,ae,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(n,ae,O)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||f===e.memoizedProps&&F===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&F===e.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=ae),d.props=n,d.state=ae,d.context=O,n=re):(typeof d.componentDidUpdate!="function"||f===e.memoizedProps&&F===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&F===e.memoizedState||(s.flags|=1024),n=!1)}return d=n,Pi(e,s),n=(s.flags&128)!==0,d||n?(d=s.stateNode,l=n&&typeof l.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,e!==null&&n?(s.child=ja(s,e.child,null,o),s.child=ja(s,null,l,o)):At(e,s,l,o),s.memoizedState=d.state,e=s.child):e=el(e,s,o),e}function Yf(e,s,l,n){return ha(),s.flags|=256,At(e,s,l,n),s.child}var yd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vd(e){return{baseLanes:e,cachePool:Rx()}}function jd(e,s,l){return e=e!==null?e.childLanes&~l:0,s&&(e|=Qt),e}function Gf(e,s,l){var n=s.pendingProps,o=!1,d=(s.flags&128)!==0,f;if((f=d)||(f=e!==null&&e.memoizedState===null?!1:(ot.current&2)!==0),f&&(o=!0,s.flags&=-129),f=(s.flags&32)!==0,s.flags&=-33,e===null){if(Be){if(o?Ol(s):_l(),(e=et)?(e=I0(e,as),e=e!==null&&e.data!=="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:Cl!==null?{id:Cs,overflow:As}:null,retryLane:536870912,hydrationErrors:null},l=Nx(e),l.return=s,s.child=l,kt=s,et=null)):e=null,e===null)throw El(s);return lu(e)?s.lanes=32:s.lanes=536870912,null}var y=n.children;return n=n.fallback,o?(_l(),o=s.mode,y=Yi({mode:"hidden",children:y},o),n=fa(n,o,l,null),y.return=s,n.return=s,y.sibling=n,s.child=y,n=s.child,n.memoizedState=vd(l),n.childLanes=jd(e,f,l),s.memoizedState=yd,or(null,n)):(Ol(s),Nd(s,y))}var O=e.memoizedState;if(O!==null&&(y=O.dehydrated,y!==null)){if(d)s.flags&256?(Ol(s),s.flags&=-257,s=wd(e,s,l)):s.memoizedState!==null?(_l(),s.child=e.child,s.flags|=128,s=null):(_l(),y=n.fallback,o=s.mode,n=Yi({mode:"visible",children:n.children},o),y=fa(y,o,l,null),y.flags|=2,n.return=s,y.return=s,n.sibling=y,s.child=n,ja(s,e.child,null,l),n=s.child,n.memoizedState=vd(l),n.childLanes=jd(e,f,l),s.memoizedState=yd,s=or(null,n));else if(Ol(s),lu(y)){if(f=y.nextSibling&&y.nextSibling.dataset,f)var X=f.dgst;f=X,n=Error(c(419)),n.stack="",n.digest=f,Kn({value:n,source:null,stack:null}),s=wd(e,s,l)}else if(xt||tn(e,s,l,!1),f=(l&e.childLanes)!==0,xt||f){if(f=Ie,f!==null&&(n=na(f,l),n!==0&&n!==O.retryLane))throw O.retryLane=n,xa(e,n),Ht(f,e,n),bd;su(y)||Ii(),s=wd(e,s,l)}else su(y)?(s.flags|=192,s.child=e.child,s=null):(e=O.treeContext,et=rs(y.nextSibling),kt=s,Be=!0,Al=null,as=!1,e!==null&&kx(s,e),s=Nd(s,n.children),s.flags|=4096);return s}return o?(_l(),y=n.fallback,o=s.mode,O=e.child,X=O.sibling,n=Qs(O,{mode:"hidden",children:n.children}),n.subtreeFlags=O.subtreeFlags&65011712,X!==null?y=Qs(X,y):(y=fa(y,o,l,null),y.flags|=2),y.return=s,n.return=s,n.sibling=y,s.child=n,or(null,n),n=s.child,y=e.child.memoizedState,y===null?y=vd(l):(o=y.cachePool,o!==null?(O=ut._currentValue,o=o.parent!==O?{parent:O,pool:O}:o):o=Rx(),y={baseLanes:y.baseLanes|l,cachePool:o}),n.memoizedState=y,n.childLanes=jd(e,f,l),s.memoizedState=yd,or(e.child,n)):(Ol(s),l=e.child,e=l.sibling,l=Qs(l,{mode:"visible",children:n.children}),l.return=s,l.sibling=null,e!==null&&(f=s.deletions,f===null?(s.deletions=[e],s.flags|=16):f.push(e)),s.child=l,s.memoizedState=null,l)}function Nd(e,s){return s=Yi({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function Yi(e,s){return e=Gt(22,e,null,s),e.lanes=0,e}function wd(e,s,l){return ja(s,e.child,null,l),e=Nd(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Jf(e,s,l){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s),Bc(e.return,s,l)}function Sd(e,s,l,n,o,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:l,tailMode:o,treeForkCount:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=n,f.tail=l,f.tailMode=o,f.treeForkCount=d)}function Vf(e,s,l){var n=s.pendingProps,o=n.revealOrder,d=n.tail;n=n.children;var f=ot.current,y=(f&2)!==0;if(y?(f=f&1|2,s.flags|=128):f&=1,ne(ot,f),At(e,s,n,l),n=Be?Fn:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jf(e,l,s);else if(e.tag===19)Jf(e,l,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(l=s.child,o=null;l!==null;)e=l.alternate,e!==null&&Ri(e)===null&&(o=l),l=l.sibling;l=o,l===null?(o=s.child,s.child=null):(o=l.sibling,l.sibling=null),Sd(s,!1,o,l,d,n);break;case"backwards":case"unstable_legacy-backwards":for(l=null,o=s.child,s.child=null;o!==null;){if(e=o.alternate,e!==null&&Ri(e)===null){s.child=o;break}e=o.sibling,o.sibling=l,l=o,o=e}Sd(s,!0,l,null,d,n);break;case"together":Sd(s,!1,null,null,void 0,n);break;default:s.memoizedState=null}return s.child}function el(e,s,l){if(e!==null&&(s.dependencies=e.dependencies),zl|=s.lanes,(l&s.childLanes)===0)if(e!==null){if(tn(e,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(c(153));if(s.child!==null){for(e=s.child,l=Qs(e,e.pendingProps),s.child=l,l.return=s;e.sibling!==null;)e=e.sibling,l=l.sibling=Qs(e,e.pendingProps),l.return=s;l.sibling=null}return s.child}function kd(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&wi(e)))}function ky(e,s,l){switch(s.tag){case 3:ce(s,s.stateNode.containerInfo),Tl(s,ut,e.memoizedState.cache),ha();break;case 27:case 5:Je(s);break;case 4:ce(s,s.stateNode.containerInfo);break;case 10:Tl(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Kc(s),null;break;case 13:var n=s.memoizedState;if(n!==null)return n.dehydrated!==null?(Ol(s),s.flags|=128,null):(l&s.child.childLanes)!==0?Gf(e,s,l):(Ol(s),e=el(e,s,l),e!==null?e.sibling:null);Ol(s);break;case 19:var o=(e.flags&128)!==0;if(n=(l&s.childLanes)!==0,n||(tn(e,s,l,!1),n=(l&s.childLanes)!==0),o){if(n)return Vf(e,s,l);s.flags|=128}if(o=s.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ne(ot,ot.current),n)break;return null;case 22:return s.lanes=0,Bf(e,s,l,s.pendingProps);case 24:Tl(s,ut,e.memoizedState.cache)}return el(e,s,l)}function Xf(e,s,l){if(e!==null)if(e.memoizedProps!==s.pendingProps)xt=!0;else{if(!kd(e,l)&&(s.flags&128)===0)return xt=!1,ky(e,s,l);xt=(e.flags&131072)!==0}else xt=!1,Be&&(s.flags&1048576)!==0&&Sx(s,Fn,s.index);switch(s.lanes=0,s.tag){case 16:e:{var n=s.pendingProps;if(e=ya(s.elementType),s.type=e,typeof e=="function")Dc(e)?(n=wa(e,n),s.tag=1,s=Pf(null,s,e,n,l)):(s.tag=0,s=gd(null,s,e,n,l));else{if(e!=null){var o=e.$$typeof;if(o===M){s.tag=11,s=Lf(null,s,e,n,l);break e}else if(o===q){s.tag=14,s=Uf(null,s,e,n,l);break e}}throw s=ie(e)||e,Error(c(306,s,""))}}return s;case 0:return gd(e,s,s.type,s.pendingProps,l);case 1:return n=s.type,o=wa(n,s.pendingProps),Pf(e,s,n,o,l);case 3:e:{if(ce(s,s.stateNode.containerInfo),e===null)throw Error(c(387));n=s.pendingProps;var d=s.memoizedState;o=d.element,Jc(e,s),lr(s,n,null,l);var f=s.memoizedState;if(n=f.cache,Tl(s,ut,n),n!==d.cache&&$c(s,[ut],l,!0),sr(),n=f.element,d.isDehydrated)if(d={element:n,isDehydrated:!1,cache:f.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=Yf(e,s,n,l);break e}else if(n!==o){o=ts(Error(c(424)),s),Kn(o),s=Yf(e,s,n,l);break e}else for(e=s.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,et=rs(e.firstChild),kt=s,Be=!0,Al=null,as=!0,l=zx(s,null,n,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ha(),n===o){s=el(e,s,l);break e}At(e,s,n,l)}s=s.child}return s;case 26:return Pi(e,s),e===null?(l=ah(s.type,null,s.pendingProps,null))?s.memoizedState=l:Be||(l=s.type,e=s.pendingProps,n=no(Ne.current).createElement(l),n[pt]=s,n[Tt]=e,Et(n,l,e),lt(n),s.stateNode=n):s.memoizedState=ah(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return Je(s),e===null&&Be&&(n=s.stateNode=th(s.type,s.pendingProps,Ne.current),kt=s,as=!0,o=et,Pl(s.type)?(au=o,et=rs(n.firstChild)):et=o),At(e,s,s.pendingProps.children,l),Pi(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Be&&((o=n=et)&&(n=tv(n,s.type,s.pendingProps,as),n!==null?(s.stateNode=n,kt=s,et=rs(n.firstChild),as=!1,o=!0):o=!1),o||El(s)),Je(s),o=s.type,d=s.pendingProps,f=e!==null?e.memoizedProps:null,n=d.children,Wd(o,d)?n=null:f!==null&&Wd(o,f)&&(s.flags|=32),s.memoizedState!==null&&(o=Ic(e,s,py,null,null,l),wr._currentValue=o),Pi(e,s),At(e,s,n,l),s.child;case 6:return e===null&&Be&&((e=l=et)&&(l=sv(l,s.pendingProps,as),l!==null?(s.stateNode=l,kt=s,et=null,e=!0):e=!1),e||El(s)),null;case 13:return Gf(e,s,l);case 4:return ce(s,s.stateNode.containerInfo),n=s.pendingProps,e===null?s.child=ja(s,null,n,l):At(e,s,n,l),s.child;case 11:return Lf(e,s,s.type,s.pendingProps,l);case 7:return At(e,s,s.pendingProps,l),s.child;case 8:return At(e,s,s.pendingProps.children,l),s.child;case 12:return At(e,s,s.pendingProps.children,l),s.child;case 10:return n=s.pendingProps,Tl(s,s.type,n.value),At(e,s,n.children,l),s.child;case 9:return o=s.type._context,n=s.pendingProps.children,ba(s),o=Ct(o),n=n(o),s.flags|=1,At(e,s,n,l),s.child;case 14:return Uf(e,s,s.type,s.pendingProps,l);case 15:return zf(e,s,s.type,s.pendingProps,l);case 19:return Vf(e,s,l);case 31:return Sy(e,s,l);case 22:return Bf(e,s,l,s.pendingProps);case 24:return ba(s),n=Ct(ut),e===null?(o=Pc(),o===null&&(o=Ie,d=qc(),o.pooledCache=d,d.refCount++,d!==null&&(o.pooledCacheLanes|=l),o=d),s.memoizedState={parent:n,cache:o},Gc(s),Tl(s,ut,o)):((e.lanes&l)!==0&&(Jc(e,s),lr(s,null,null,l),sr()),o=e.memoizedState,d=s.memoizedState,o.parent!==n?(o={parent:n,cache:n},s.memoizedState=o,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=o),Tl(s,ut,n)):(n=d.cache,Tl(s,ut,n),n!==o.cache&&$c(s,[ut],l,!0))),At(e,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(c(156,s.tag))}function tl(e){e.flags|=4}function Cd(e,s,l,n,o){if((s=(e.mode&32)!==0)&&(s=!1),s){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(v0())e.flags|=8192;else throw va=Ai,Yc}else e.flags&=-16777217}function Qf(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ch(s))if(v0())e.flags|=8192;else throw va=Ai,Yc}function Gi(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?la():536870912,e.lanes|=s,fn|=s)}function cr(e,s){if(!Be)switch(e.tailMode){case"hidden":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var n=null;l!==null;)l.alternate!==null&&(n=l),l=l.sibling;n===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function tt(e){var s=e.alternate!==null&&e.alternate.child===e.child,l=0,n=0;if(s)for(var o=e.child;o!==null;)l|=o.lanes|o.childLanes,n|=o.subtreeFlags&65011712,n|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)l|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=l,s}function Cy(e,s,l){var n=s.pendingProps;switch(_c(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(s),null;case 1:return tt(s),null;case 3:return l=s.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),s.memoizedState.cache!==n&&(s.flags|=2048),Zs(ut),ve(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(en(s)?tl(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Uc())),tt(s),null;case 26:var o=s.type,d=s.memoizedState;return e===null?(tl(s),d!==null?(tt(s),Qf(s,d)):(tt(s),Cd(s,o,null,n,l))):d?d!==e.memoizedState?(tl(s),tt(s),Qf(s,d)):(tt(s),s.flags&=-16777217):(e=e.memoizedProps,e!==n&&tl(s),tt(s),Cd(s,o,e,n,l)),null;case 27:if(Me(s),l=Ne.current,o=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==n&&tl(s);else{if(!n){if(s.stateNode===null)throw Error(c(166));return tt(s),null}e=he.current,en(s)?Cx(s):(e=th(o,n,l),s.stateNode=e,tl(s))}return tt(s),null;case 5:if(Me(s),o=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==n&&tl(s);else{if(!n){if(s.stateNode===null)throw Error(c(166));return tt(s),null}if(d=he.current,en(s))Cx(s);else{var f=no(Ne.current);switch(d){case 1:d=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:d=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":d=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":d=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":d=f.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof n.is=="string"?f.createElement("select",{is:n.is}):f.createElement("select"),n.multiple?d.multiple=!0:n.size&&(d.size=n.size);break;default:d=typeof n.is=="string"?f.createElement(o,{is:n.is}):f.createElement(o)}}d[pt]=s,d[Tt]=n;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)d.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=d;e:switch(Et(d,o,n),o){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&tl(s)}}return tt(s),Cd(s,s.type,e===null?null:e.memoizedProps,s.pendingProps,l),null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==n&&tl(s);else{if(typeof n!="string"&&s.stateNode===null)throw Error(c(166));if(e=Ne.current,en(s)){if(e=s.stateNode,l=s.memoizedProps,n=null,o=kt,o!==null)switch(o.tag){case 27:case 5:n=o.memoizedProps}e[pt]=s,e=!!(e.nodeValue===l||n!==null&&n.suppressHydrationWarning===!0||G0(e.nodeValue,l)),e||El(s,!0)}else e=no(e).createTextNode(n),e[pt]=s,s.stateNode=e}return tt(s),null;case 31:if(l=s.memoizedState,e===null||e.memoizedState!==null){if(n=en(s),l!==null){if(e===null){if(!n)throw Error(c(318));if(e=s.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[pt]=s}else ha(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tt(s),e=!1}else l=Uc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return s.flags&256?(Vt(s),s):(Vt(s),null);if((s.flags&128)!==0)throw Error(c(558))}return tt(s),null;case 13:if(n=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=en(s),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(c(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(c(317));o[pt]=s}else ha(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tt(s),o=!1}else o=Uc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return s.flags&256?(Vt(s),s):(Vt(s),null)}return Vt(s),(s.flags&128)!==0?(s.lanes=l,s):(l=n!==null,e=e!==null&&e.memoizedState!==null,l&&(n=s.child,o=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(o=n.alternate.memoizedState.cachePool.pool),d=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),d!==o&&(n.flags|=2048)),l!==e&&l&&(s.child.flags|=8192),Gi(s,s.updateQueue),tt(s),null);case 4:return ve(),e===null&&Qd(s.stateNode.containerInfo),tt(s),null;case 10:return Zs(s.type),tt(s),null;case 19:if(E(ot),n=s.memoizedState,n===null)return tt(s),null;if(o=(s.flags&128)!==0,d=n.rendering,d===null)if(o)cr(n,!1);else{if(it!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(d=Ri(e),d!==null){for(s.flags|=128,cr(n,!1),e=d.updateQueue,s.updateQueue=e,Gi(s,e),s.subtreeFlags=0,e=l,l=s.child;l!==null;)jx(l,e),l=l.sibling;return ne(ot,ot.current&1|2),Be&&Fs(s,n.treeForkCount),s.child}e=e.sibling}n.tail!==null&&Oe()>Fi&&(s.flags|=128,o=!0,cr(n,!1),s.lanes=4194304)}else{if(!o)if(e=Ri(d),e!==null){if(s.flags|=128,o=!0,e=e.updateQueue,s.updateQueue=e,Gi(s,e),cr(n,!0),n.tail===null&&n.tailMode==="hidden"&&!d.alternate&&!Be)return tt(s),null}else 2*Oe()-n.renderingStartTime>Fi&&l!==536870912&&(s.flags|=128,o=!0,cr(n,!1),s.lanes=4194304);n.isBackwards?(d.sibling=s.child,s.child=d):(e=n.last,e!==null?e.sibling=d:s.child=d,n.last=d)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Oe(),e.sibling=null,l=ot.current,ne(ot,o?l&1|2:l&1),Be&&Fs(s,n.treeForkCount),e):(tt(s),null);case 22:case 23:return Vt(s),Fc(),n=s.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(s.flags|=8192):n&&(s.flags|=8192),n?(l&536870912)!==0&&(s.flags&128)===0&&(tt(s),s.subtreeFlags&6&&(s.flags|=8192)):tt(s),l=s.updateQueue,l!==null&&Gi(s,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==l&&(s.flags|=2048),e!==null&&E(ga),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Zs(ut),tt(s),null;case 25:return null;case 30:return null}throw Error(c(156,s.tag))}function Ay(e,s){switch(_c(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Zs(ut),ve(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return Me(s),null;case 31:if(s.memoizedState!==null){if(Vt(s),s.alternate===null)throw Error(c(340));ha()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 13:if(Vt(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(c(340));ha()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return E(ot),null;case 4:return ve(),null;case 10:return Zs(s.type),null;case 22:case 23:return Vt(s),Fc(),e!==null&&E(ga),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return Zs(ut),null;case 25:return null;default:return null}}function Ff(e,s){switch(_c(s),s.tag){case 3:Zs(ut),ve();break;case 26:case 27:case 5:Me(s);break;case 4:ve();break;case 31:s.memoizedState!==null&&Vt(s);break;case 13:Vt(s);break;case 19:E(ot);break;case 10:Zs(s.type);break;case 22:case 23:Vt(s),Fc(),e!==null&&E(ga);break;case 24:Zs(ut)}}function dr(e,s){try{var l=s.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var o=n.next;l=o;do{if((l.tag&e)===e){n=void 0;var d=l.create,f=l.inst;n=d(),f.destroy=n}l=l.next}while(l!==o)}}catch(y){Qe(s,s.return,y)}}function Ll(e,s,l){try{var n=s.updateQueue,o=n!==null?n.lastEffect:null;if(o!==null){var d=o.next;n=d;do{if((n.tag&e)===e){var f=n.inst,y=f.destroy;if(y!==void 0){f.destroy=void 0,o=s;var O=l,X=y;try{X()}catch(re){Qe(o,O,re)}}}n=n.next}while(n!==d)}}catch(re){Qe(s,s.return,re)}}function Kf(e){var s=e.updateQueue;if(s!==null){var l=e.stateNode;try{$x(s,l)}catch(n){Qe(e,e.return,n)}}}function Zf(e,s,l){l.props=wa(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(n){Qe(e,s,n)}}function ur(e,s){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof l=="function"?e.refCleanup=l(n):l.current=n}}catch(o){Qe(e,s,o)}}function Es(e,s){var l=e.ref,n=e.refCleanup;if(l!==null)if(typeof n=="function")try{n()}catch(o){Qe(e,s,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(o){Qe(e,s,o)}else l.current=null}function If(e){var s=e.type,l=e.memoizedProps,n=e.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break e;case"img":l.src?n.src=l.src:l.srcSet&&(n.srcset=l.srcSet)}}catch(o){Qe(e,e.return,o)}}function Ad(e,s,l){try{var n=e.stateNode;Fy(n,e.type,l,s),n[Tt]=s}catch(o){Qe(e,e.return,o)}}function Wf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Pl(e.type)||e.tag===4}function Ed(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Pl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Td(e,s,l){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(e),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Vs));else if(n!==4&&(n===27&&Pl(e.type)&&(l=e.stateNode,s=null),e=e.child,e!==null))for(Td(e,s,l),e=e.sibling;e!==null;)Td(e,s,l),e=e.sibling}function Ji(e,s,l){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?l.insertBefore(e,s):l.appendChild(e);else if(n!==4&&(n===27&&Pl(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Ji(e,s,l),e=e.sibling;e!==null;)Ji(e,s,l),e=e.sibling}function e0(e){var s=e.stateNode,l=e.memoizedProps;try{for(var n=e.type,o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Et(s,n,l),s[pt]=e,s[Tt]=l}catch(d){Qe(e,e.return,d)}}var sl=!1,ft=!1,Dd=!1,t0=typeof WeakSet=="function"?WeakSet:Set,vt=null;function Ey(e,s){if(e=e.containerInfo,Zd=xo,e=mx(e),wc(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var n=l.getSelection&&l.getSelection();if(n&&n.rangeCount!==0){l=n.anchorNode;var o=n.anchorOffset,d=n.focusNode;n=n.focusOffset;try{l.nodeType,d.nodeType}catch{l=null;break e}var f=0,y=-1,O=-1,X=0,re=0,de=e,F=null;t:for(;;){for(var ae;de!==l||o!==0&&de.nodeType!==3||(y=f+o),de!==d||n!==0&&de.nodeType!==3||(O=f+n),de.nodeType===3&&(f+=de.nodeValue.length),(ae=de.firstChild)!==null;)F=de,de=ae;for(;;){if(de===e)break t;if(F===l&&++X===o&&(y=f),F===d&&++re===n&&(O=f),(ae=de.nextSibling)!==null)break;de=F,F=de.parentNode}de=ae}l=y===-1||O===-1?null:{start:y,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Id={focusedElem:e,selectionRange:l},xo=!1,vt=s;vt!==null;)if(s=vt,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,vt=e;else for(;vt!==null;){switch(s=vt,d=s.alternate,e=s.flags,s.tag){case 0:if((e&4)!==0&&(e=s.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)o=e[l],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,l=s,o=d.memoizedProps,d=d.memoizedState,n=l.stateNode;try{var ye=wa(l.type,o);e=n.getSnapshotBeforeUpdate(ye,d),n.__reactInternalSnapshotBeforeUpdate=e}catch(Se){Qe(l,l.return,Se)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,l=e.nodeType,l===9)tu(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":tu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=s.sibling,e!==null){e.return=s.return,vt=e;break}vt=s.return}}function s0(e,s,l){var n=l.flags;switch(l.tag){case 0:case 11:case 15:al(e,l),n&4&&dr(5,l);break;case 1:if(al(e,l),n&4)if(e=l.stateNode,s===null)try{e.componentDidMount()}catch(f){Qe(l,l.return,f)}else{var o=wa(l.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(o,s,e.__reactInternalSnapshotBeforeUpdate)}catch(f){Qe(l,l.return,f)}}n&64&&Kf(l),n&512&&ur(l,l.return);break;case 3:if(al(e,l),n&64&&(e=l.updateQueue,e!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{$x(e,s)}catch(f){Qe(l,l.return,f)}}break;case 27:s===null&&n&4&&e0(l);case 26:case 5:al(e,l),s===null&&n&4&&If(l),n&512&&ur(l,l.return);break;case 12:al(e,l);break;case 31:al(e,l),n&4&&n0(e,l);break;case 13:al(e,l),n&4&&r0(e,l),n&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=zy.bind(null,l),lv(e,l))));break;case 22:if(n=l.memoizedState!==null||sl,!n){s=s!==null&&s.memoizedState!==null||ft,o=sl;var d=ft;sl=n,(ft=s)&&!d?nl(e,l,(l.subtreeFlags&8772)!==0):al(e,l),sl=o,ft=d}break;case 30:break;default:al(e,l)}}function l0(e){var s=e.alternate;s!==null&&(e.alternate=null,l0(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&pe(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var at=null,zt=!1;function ll(e,s,l){for(l=l.child;l!==null;)a0(e,s,l),l=l.sibling}function a0(e,s,l){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(wl,l)}catch{}switch(l.tag){case 26:ft||Es(l,s),ll(e,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ft||Es(l,s);var n=at,o=zt;Pl(l.type)&&(at=l.stateNode,zt=!1),ll(e,s,l),vr(l.stateNode),at=n,zt=o;break;case 5:ft||Es(l,s);case 6:if(n=at,o=zt,at=null,ll(e,s,l),at=n,zt=o,at!==null)if(zt)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(l.stateNode)}catch(d){Qe(l,s,d)}else try{at.removeChild(l.stateNode)}catch(d){Qe(l,s,d)}break;case 18:at!==null&&(zt?(e=at,K0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Nn(e)):K0(at,l.stateNode));break;case 4:n=at,o=zt,at=l.stateNode.containerInfo,zt=!0,ll(e,s,l),at=n,zt=o;break;case 0:case 11:case 14:case 15:Ll(2,l,s),ft||Ll(4,l,s),ll(e,s,l);break;case 1:ft||(Es(l,s),n=l.stateNode,typeof n.componentWillUnmount=="function"&&Zf(l,s,n)),ll(e,s,l);break;case 21:ll(e,s,l);break;case 22:ft=(n=ft)||l.memoizedState!==null,ll(e,s,l),ft=n;break;default:ll(e,s,l)}}function n0(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Nn(e)}catch(l){Qe(s,s.return,l)}}}function r0(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Nn(e)}catch(l){Qe(s,s.return,l)}}function Ty(e){switch(e.tag){case 31:case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new t0),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new t0),s;default:throw Error(c(435,e.tag))}}function Vi(e,s){var l=Ty(e);s.forEach(function(n){if(!l.has(n)){l.add(n);var o=By.bind(null,e,n);n.then(o,o)}})}function Bt(e,s){var l=s.deletions;if(l!==null)for(var n=0;n<l.length;n++){var o=l[n],d=e,f=s,y=f;e:for(;y!==null;){switch(y.tag){case 27:if(Pl(y.type)){at=y.stateNode,zt=!1;break e}break;case 5:at=y.stateNode,zt=!1;break e;case 3:case 4:at=y.stateNode.containerInfo,zt=!0;break e}y=y.return}if(at===null)throw Error(c(160));a0(d,f,o),at=null,zt=!1,d=o.alternate,d!==null&&(d.return=null),o.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)i0(s,e),s=s.sibling}var bs=null;function i0(e,s){var l=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Bt(s,e),$t(e),n&4&&(Ll(3,e,e.return),dr(3,e),Ll(5,e,e.return));break;case 1:Bt(s,e),$t(e),n&512&&(ft||l===null||Es(l,l.return)),n&64&&sl&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?n:l.concat(n))));break;case 26:var o=bs;if(Bt(s,e),$t(e),n&512&&(ft||l===null||Es(l,l.return)),n&4){var d=l!==null?l.memoizedState:null;if(n=e.memoizedState,l===null)if(n===null)if(e.stateNode===null){e:{n=e.type,l=e.memoizedProps,o=o.ownerDocument||o;t:switch(n){case"title":d=o.getElementsByTagName("title")[0],(!d||d[A]||d[pt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=o.createElement(n),o.head.insertBefore(d,o.querySelector("head > title"))),Et(d,n,l),d[pt]=e,lt(d),n=d;break e;case"link":var f=ih("link","href",o).get(n+(l.href||""));if(f){for(var y=0;y<f.length;y++)if(d=f[y],d.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&d.getAttribute("rel")===(l.rel==null?null:l.rel)&&d.getAttribute("title")===(l.title==null?null:l.title)&&d.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){f.splice(y,1);break t}}d=o.createElement(n),Et(d,n,l),o.head.appendChild(d);break;case"meta":if(f=ih("meta","content",o).get(n+(l.content||""))){for(y=0;y<f.length;y++)if(d=f[y],d.getAttribute("content")===(l.content==null?null:""+l.content)&&d.getAttribute("name")===(l.name==null?null:l.name)&&d.getAttribute("property")===(l.property==null?null:l.property)&&d.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&d.getAttribute("charset")===(l.charSet==null?null:l.charSet)){f.splice(y,1);break t}}d=o.createElement(n),Et(d,n,l),o.head.appendChild(d);break;default:throw Error(c(468,n))}d[pt]=e,lt(d),n=d}e.stateNode=n}else oh(o,e.type,e.stateNode);else e.stateNode=rh(o,n,e.memoizedProps);else d!==n?(d===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):d.count--,n===null?oh(o,e.type,e.stateNode):rh(o,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Ad(e,e.memoizedProps,l.memoizedProps)}break;case 27:Bt(s,e),$t(e),n&512&&(ft||l===null||Es(l,l.return)),l!==null&&n&4&&Ad(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Bt(s,e),$t(e),n&512&&(ft||l===null||Es(l,l.return)),e.flags&32){o=e.stateNode;try{Ga(o,"")}catch(ye){Qe(e,e.return,ye)}}n&4&&e.stateNode!=null&&(o=e.memoizedProps,Ad(e,o,l!==null?l.memoizedProps:o)),n&1024&&(Dd=!0);break;case 6:if(Bt(s,e),$t(e),n&4){if(e.stateNode===null)throw Error(c(162));n=e.memoizedProps,l=e.stateNode;try{l.nodeValue=n}catch(ye){Qe(e,e.return,ye)}}break;case 3:if(oo=null,o=bs,bs=ro(s.containerInfo),Bt(s,e),bs=o,$t(e),n&4&&l!==null&&l.memoizedState.isDehydrated)try{Nn(s.containerInfo)}catch(ye){Qe(e,e.return,ye)}Dd&&(Dd=!1,o0(e));break;case 4:n=bs,bs=ro(e.stateNode.containerInfo),Bt(s,e),$t(e),bs=n;break;case 12:Bt(s,e),$t(e);break;case 31:Bt(s,e),$t(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Vi(e,n)));break;case 13:Bt(s,e),$t(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Qi=Oe()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Vi(e,n)));break;case 22:o=e.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,X=sl,re=ft;if(sl=X||o,ft=re||O,Bt(s,e),ft=re,sl=X,$t(e),n&8192)e:for(s=e.stateNode,s._visibility=o?s._visibility&-2:s._visibility|1,o&&(l===null||O||sl||ft||Sa(e)),l=null,s=e;;){if(s.tag===5||s.tag===26){if(l===null){O=l=s;try{if(d=O.stateNode,o)f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{y=O.stateNode;var de=O.memoizedProps.style,F=de!=null&&de.hasOwnProperty("display")?de.display:null;y.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(ye){Qe(O,O.return,ye)}}}else if(s.tag===6){if(l===null){O=s;try{O.stateNode.nodeValue=o?"":O.memoizedProps}catch(ye){Qe(O,O.return,ye)}}}else if(s.tag===18){if(l===null){O=s;try{var ae=O.stateNode;o?Z0(ae,!0):Z0(O.stateNode,!1)}catch(ye){Qe(O,O.return,ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}n&4&&(n=e.updateQueue,n!==null&&(l=n.retryQueue,l!==null&&(n.retryQueue=null,Vi(e,l))));break;case 19:Bt(s,e),$t(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Vi(e,n)));break;case 30:break;case 21:break;default:Bt(s,e),$t(e)}}function $t(e){var s=e.flags;if(s&2){try{for(var l,n=e.return;n!==null;){if(Wf(n)){l=n;break}n=n.return}if(l==null)throw Error(c(160));switch(l.tag){case 27:var o=l.stateNode,d=Ed(e);Ji(e,d,o);break;case 5:var f=l.stateNode;l.flags&32&&(Ga(f,""),l.flags&=-33);var y=Ed(e);Ji(e,y,f);break;case 3:case 4:var O=l.stateNode.containerInfo,X=Ed(e);Td(e,X,O);break;default:throw Error(c(161))}}catch(re){Qe(e,e.return,re)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function o0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;o0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function al(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)s0(e,s.alternate,s),s=s.sibling}function Sa(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:Ll(4,s,s.return),Sa(s);break;case 1:Es(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&Zf(s,s.return,l),Sa(s);break;case 27:vr(s.stateNode);case 26:case 5:Es(s,s.return),Sa(s);break;case 22:s.memoizedState===null&&Sa(s);break;case 30:Sa(s);break;default:Sa(s)}e=e.sibling}}function nl(e,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var n=s.alternate,o=e,d=s,f=d.flags;switch(d.tag){case 0:case 11:case 15:nl(o,d,l),dr(4,d);break;case 1:if(nl(o,d,l),n=d,o=n.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(X){Qe(n,n.return,X)}if(n=d,o=n.updateQueue,o!==null){var y=n.stateNode;try{var O=o.shared.hiddenCallbacks;if(O!==null)for(o.shared.hiddenCallbacks=null,o=0;o<O.length;o++)Bx(O[o],y)}catch(X){Qe(n,n.return,X)}}l&&f&64&&Kf(d),ur(d,d.return);break;case 27:e0(d);case 26:case 5:nl(o,d,l),l&&n===null&&f&4&&If(d),ur(d,d.return);break;case 12:nl(o,d,l);break;case 31:nl(o,d,l),l&&f&4&&n0(o,d);break;case 13:nl(o,d,l),l&&f&4&&r0(o,d);break;case 22:d.memoizedState===null&&nl(o,d,l),ur(d,d.return);break;case 30:break;default:nl(o,d,l)}s=s.sibling}}function Rd(e,s){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&Zn(l))}function Md(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Zn(e))}function gs(e,s,l,n){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)c0(e,s,l,n),s=s.sibling}function c0(e,s,l,n){var o=s.flags;switch(s.tag){case 0:case 11:case 15:gs(e,s,l,n),o&2048&&dr(9,s);break;case 1:gs(e,s,l,n);break;case 3:gs(e,s,l,n),o&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Zn(e)));break;case 12:if(o&2048){gs(e,s,l,n),e=s.stateNode;try{var d=s.memoizedProps,f=d.id,y=d.onPostCommit;typeof y=="function"&&y(f,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){Qe(s,s.return,O)}}else gs(e,s,l,n);break;case 31:gs(e,s,l,n);break;case 13:gs(e,s,l,n);break;case 23:break;case 22:d=s.stateNode,f=s.alternate,s.memoizedState!==null?d._visibility&2?gs(e,s,l,n):mr(e,s):d._visibility&2?gs(e,s,l,n):(d._visibility|=2,un(e,s,l,n,(s.subtreeFlags&10256)!==0||!1)),o&2048&&Rd(f,s);break;case 24:gs(e,s,l,n),o&2048&&Md(s.alternate,s);break;default:gs(e,s,l,n)}}function un(e,s,l,n,o){for(o=o&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var d=e,f=s,y=l,O=n,X=f.flags;switch(f.tag){case 0:case 11:case 15:un(d,f,y,O,o),dr(8,f);break;case 23:break;case 22:var re=f.stateNode;f.memoizedState!==null?re._visibility&2?un(d,f,y,O,o):mr(d,f):(re._visibility|=2,un(d,f,y,O,o)),o&&X&2048&&Rd(f.alternate,f);break;case 24:un(d,f,y,O,o),o&&X&2048&&Md(f.alternate,f);break;default:un(d,f,y,O,o)}s=s.sibling}}function mr(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=e,n=s,o=n.flags;switch(n.tag){case 22:mr(l,n),o&2048&&Rd(n.alternate,n);break;case 24:mr(l,n),o&2048&&Md(n.alternate,n);break;default:mr(l,n)}s=s.sibling}}var xr=8192;function mn(e,s,l){if(e.subtreeFlags&xr)for(e=e.child;e!==null;)d0(e,s,l),e=e.sibling}function d0(e,s,l){switch(e.tag){case 26:mn(e,s,l),e.flags&xr&&e.memoizedState!==null&&hv(l,bs,e.memoizedState,e.memoizedProps);break;case 5:mn(e,s,l);break;case 3:case 4:var n=bs;bs=ro(e.stateNode.containerInfo),mn(e,s,l),bs=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=xr,xr=16777216,mn(e,s,l),xr=n):mn(e,s,l));break;default:mn(e,s,l)}}function u0(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function fr(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var n=s[l];vt=n,x0(n,e)}u0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)m0(e),e=e.sibling}function m0(e){switch(e.tag){case 0:case 11:case 15:fr(e),e.flags&2048&&Ll(9,e,e.return);break;case 3:fr(e);break;case 12:fr(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Xi(e)):fr(e);break;default:fr(e)}}function Xi(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var n=s[l];vt=n,x0(n,e)}u0(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:Ll(8,s,s.return),Xi(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Xi(s));break;default:Xi(s)}e=e.sibling}}function x0(e,s){for(;vt!==null;){var l=vt;switch(l.tag){case 0:case 11:case 15:Ll(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var n=l.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Zn(l.memoizedState.cache)}if(n=l.child,n!==null)n.return=l,vt=n;else e:for(l=e;vt!==null;){n=vt;var o=n.sibling,d=n.return;if(l0(n),n===l){vt=null;break e}if(o!==null){o.return=d,vt=o;break e}vt=d}}}var Dy={getCacheForType:function(e){var s=Ct(ut),l=s.data.get(e);return l===void 0&&(l=e(),s.data.set(e,l)),l},cacheSignal:function(){return Ct(ut).controller.signal}},Ry=typeof WeakMap=="function"?WeakMap:Map,Ve=0,Ie=null,_e=null,Ue=0,Xe=0,Xt=null,Ul=!1,xn=!1,Od=!1,rl=0,it=0,zl=0,ka=0,_d=0,Qt=0,fn=0,hr=null,qt=null,Ld=!1,Qi=0,f0=0,Fi=1/0,Ki=null,Bl=null,bt=0,$l=null,hn=null,il=0,Ud=0,zd=null,h0=null,pr=0,Bd=null;function Ft(){return(Ve&2)!==0&&Ue!==0?Ue&-Ue:R.T!==null?Gd():$n()}function p0(){if(Qt===0)if((Ue&536870912)===0||Be){var e=$a;$a<<=1,($a&3932160)===0&&($a=262144),Qt=e}else Qt=536870912;return e=Jt.current,e!==null&&(e.flags|=32),Qt}function Ht(e,s,l){(e===Ie&&(Xe===2||Xe===9)||e.cancelPendingCommit!==null)&&(pn(e,0),ql(e,Ue,Qt,!1)),aa(e,l),((Ve&2)===0||e!==Ie)&&(e===Ie&&((Ve&2)===0&&(ka|=l),it===4&&ql(e,Ue,Qt,!1)),Ts(e))}function b0(e,s,l){if((Ve&6)!==0)throw Error(c(327));var n=!l&&(s&127)===0&&(s&e.expiredLanes)===0||sa(e,s),o=n?_y(e,s):qd(e,s,!0),d=n;do{if(o===0){xn&&!n&&ql(e,s,0,!1);break}else{if(l=e.current.alternate,d&&!My(l)){o=qd(e,s,!1),d=!1;continue}if(o===2){if(d=s,e.errorRecoveryDisabledLanes&d)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){s=f;e:{var y=e;o=hr;var O=y.current.memoizedState.isDehydrated;if(O&&(pn(y,f).flags|=256),f=qd(y,f,!1),f!==2){if(Od&&!O){y.errorRecoveryDisabledLanes|=d,ka|=d,o=4;break e}d=qt,qt=o,d!==null&&(qt===null?qt=d:qt.push.apply(qt,d))}o=f}if(d=!1,o!==2)continue}}if(o===1){pn(e,0),ql(e,s,0,!0);break}e:{switch(n=e,d=o,d){case 0:case 1:throw Error(c(345));case 4:if((s&4194048)!==s)break;case 6:ql(n,s,Qt,!Ul);break e;case 2:qt=null;break;case 3:case 5:break;default:throw Error(c(329))}if((s&62914560)===s&&(o=Qi+300-Oe(),10<o)){if(ql(n,s,Qt,!Ul),Ha(n,0,!0)!==0)break e;il=s,n.timeoutHandle=Q0(g0.bind(null,n,l,qt,Ki,Ld,s,Qt,ka,fn,Ul,d,"Throttled",-0,0),o);break e}g0(n,l,qt,Ki,Ld,s,Qt,ka,fn,Ul,d,null,-0,0)}}break}while(!0);Ts(e)}function g0(e,s,l,n,o,d,f,y,O,X,re,de,F,ae){if(e.timeoutHandle=-1,de=s.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vs},d0(s,d,de);var ye=(d&62914560)===d?Qi-Oe():(d&4194048)===d?f0-Oe():0;if(ye=pv(de,ye),ye!==null){il=d,e.cancelPendingCommit=ye(C0.bind(null,e,s,d,l,n,o,f,y,O,re,de,null,F,ae)),ql(e,d,f,!X);return}}C0(e,s,d,l,n,o,f,y,O)}function My(e){for(var s=e;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var n=0;n<l.length;n++){var o=l[n],d=o.getSnapshot;o=o.value;try{if(!Yt(d(),o))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ql(e,s,l,n){s&=~_d,s&=~ka,e.suspendedLanes|=s,e.pingedLanes&=~s,n&&(e.warmLanes|=s),n=e.expirationTimes;for(var o=s;0<o;){var d=31-St(o),f=1<<d;n[d]=-1,o&=~f}l!==0&&fs(e,l,s)}function Zi(){return(Ve&6)===0?(br(0),!1):!0}function $d(){if(_e!==null){if(Xe===0)var e=_e.return;else e=_e,Ks=pa=null,td(e),nn=null,Wn=0,e=_e;for(;e!==null;)Ff(e.alternate,e),e=e.return;_e=null}}function pn(e,s){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,Iy(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),il=0,$d(),Ie=e,_e=l=Qs(e.current,null),Ue=s,Xe=0,Xt=null,Ul=!1,xn=sa(e,s),Od=!1,fn=Qt=_d=ka=zl=it=0,qt=hr=null,Ld=!1,(s&8)!==0&&(s|=s&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=s;0<n;){var o=31-St(n),d=1<<o;s|=e[o],n&=~d}return rl=s,gi(),l}function y0(e,s){Te=null,R.H=ir,s===an||s===Ci?(s=_x(),Xe=3):s===Yc?(s=_x(),Xe=4):Xe=s===bd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Xt=s,_e===null&&(it=1,qi(e,ts(s,e.current)))}function v0(){var e=Jt.current;return e===null?!0:(Ue&4194048)===Ue?ns===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?e===ns:!1}function j0(){var e=R.H;return R.H=ir,e===null?ir:e}function N0(){var e=R.A;return R.A=Dy,e}function Ii(){it=4,Ul||(Ue&4194048)!==Ue&&Jt.current!==null||(xn=!0),(zl&134217727)===0&&(ka&134217727)===0||Ie===null||ql(Ie,Ue,Qt,!1)}function qd(e,s,l){var n=Ve;Ve|=2;var o=j0(),d=N0();(Ie!==e||Ue!==s)&&(Ki=null,pn(e,s)),s=!1;var f=it;e:do try{if(Xe!==0&&_e!==null){var y=_e,O=Xt;switch(Xe){case 8:$d(),f=6;break e;case 3:case 2:case 9:case 6:Jt.current===null&&(s=!0);var X=Xe;if(Xe=0,Xt=null,bn(e,y,O,X),l&&xn){f=0;break e}break;default:X=Xe,Xe=0,Xt=null,bn(e,y,O,X)}}Oy(),f=it;break}catch(re){y0(e,re)}while(!0);return s&&e.shellSuspendCounter++,Ks=pa=null,Ve=n,R.H=o,R.A=d,_e===null&&(Ie=null,Ue=0,gi()),f}function Oy(){for(;_e!==null;)w0(_e)}function _y(e,s){var l=Ve;Ve|=2;var n=j0(),o=N0();Ie!==e||Ue!==s?(Ki=null,Fi=Oe()+500,pn(e,s)):xn=sa(e,s);e:do try{if(Xe!==0&&_e!==null){s=_e;var d=Xt;t:switch(Xe){case 1:Xe=0,Xt=null,bn(e,s,d,1);break;case 2:case 9:if(Mx(d)){Xe=0,Xt=null,S0(s);break}s=function(){Xe!==2&&Xe!==9||Ie!==e||(Xe=7),Ts(e)},d.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:Mx(d)?(Xe=0,Xt=null,S0(s)):(Xe=0,Xt=null,bn(e,s,d,7));break;case 5:var f=null;switch(_e.tag){case 26:f=_e.memoizedState;case 5:case 27:var y=_e;if(f?ch(f):y.stateNode.complete){Xe=0,Xt=null;var O=y.sibling;if(O!==null)_e=O;else{var X=y.return;X!==null?(_e=X,Wi(X)):_e=null}break t}}Xe=0,Xt=null,bn(e,s,d,5);break;case 6:Xe=0,Xt=null,bn(e,s,d,6);break;case 8:$d(),it=6;break e;default:throw Error(c(462))}}Ly();break}catch(re){y0(e,re)}while(!0);return Ks=pa=null,R.H=n,R.A=o,Ve=l,_e!==null?0:(Ie=null,Ue=0,gi(),it)}function Ly(){for(;_e!==null&&!me();)w0(_e)}function w0(e){var s=Xf(e.alternate,e,rl);e.memoizedProps=e.pendingProps,s===null?Wi(e):_e=s}function S0(e){var s=e,l=s.alternate;switch(s.tag){case 15:case 0:s=Hf(l,s,s.pendingProps,s.type,void 0,Ue);break;case 11:s=Hf(l,s,s.pendingProps,s.type.render,s.ref,Ue);break;case 5:td(s);default:Ff(l,s),s=_e=jx(s,rl),s=Xf(l,s,rl)}e.memoizedProps=e.pendingProps,s===null?Wi(e):_e=s}function bn(e,s,l,n){Ks=pa=null,td(s),nn=null,Wn=0;var o=s.return;try{if(wy(e,o,s,l,Ue)){it=1,qi(e,ts(l,e.current)),_e=null;return}}catch(d){if(o!==null)throw _e=o,d;it=1,qi(e,ts(l,e.current)),_e=null;return}s.flags&32768?(Be||n===1?e=!0:xn||(Ue&536870912)!==0?e=!1:(Ul=e=!0,(n===2||n===9||n===3||n===6)&&(n=Jt.current,n!==null&&n.tag===13&&(n.flags|=16384))),k0(s,e)):Wi(s)}function Wi(e){var s=e;do{if((s.flags&32768)!==0){k0(s,Ul);return}e=s.return;var l=Cy(s.alternate,s,rl);if(l!==null){_e=l;return}if(s=s.sibling,s!==null){_e=s;return}_e=s=e}while(s!==null);it===0&&(it=5)}function k0(e,s){do{var l=Ay(e.alternate,e);if(l!==null){l.flags&=32767,_e=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(e=e.sibling,e!==null)){_e=e;return}_e=e=l}while(e!==null);it=6,_e=null}function C0(e,s,l,n,o,d,f,y,O){e.cancelPendingCommit=null;do eo();while(bt!==0);if((Ve&6)!==0)throw Error(c(327));if(s!==null){if(s===e.current)throw Error(c(177));if(d=s.lanes|s.childLanes,d|=Ec,Gs(e,l,d,f,y,O),e===Ie&&(_e=Ie=null,Ue=0),hn=s,$l=e,il=l,Ud=d,zd=o,h0=n,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,$y(Ps,function(){return R0(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||n){n=R.T,R.T=null,o=ee.p,ee.p=2,f=Ve,Ve|=4;try{Ey(e,s,l)}finally{Ve=f,ee.p=o,R.T=n}}bt=1,A0(),E0(),T0()}}function A0(){if(bt===1){bt=0;var e=$l,s=hn,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var n=ee.p;ee.p=2;var o=Ve;Ve|=4;try{i0(s,e);var d=Id,f=mx(e.containerInfo),y=d.focusedElem,O=d.selectionRange;if(f!==y&&y&&y.ownerDocument&&ux(y.ownerDocument.documentElement,y)){if(O!==null&&wc(y)){var X=O.start,re=O.end;if(re===void 0&&(re=X),"selectionStart"in y)y.selectionStart=X,y.selectionEnd=Math.min(re,y.value.length);else{var de=y.ownerDocument||document,F=de&&de.defaultView||window;if(F.getSelection){var ae=F.getSelection(),ye=y.textContent.length,Se=Math.min(O.start,ye),Ze=O.end===void 0?Se:Math.min(O.end,ye);!ae.extend&&Se>Ze&&(f=Ze,Ze=Se,Se=f);var G=dx(y,Se),B=dx(y,Ze);if(G&&B&&(ae.rangeCount!==1||ae.anchorNode!==G.node||ae.anchorOffset!==G.offset||ae.focusNode!==B.node||ae.focusOffset!==B.offset)){var V=de.createRange();V.setStart(G.node,G.offset),ae.removeAllRanges(),Se>Ze?(ae.addRange(V),ae.extend(B.node,B.offset)):(V.setEnd(B.node,B.offset),ae.addRange(V))}}}}for(de=[],ae=y;ae=ae.parentNode;)ae.nodeType===1&&de.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<de.length;y++){var oe=de[y];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}xo=!!Zd,Id=Zd=null}finally{Ve=o,ee.p=n,R.T=l}}e.current=s,bt=2}}function E0(){if(bt===2){bt=0;var e=$l,s=hn,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var n=ee.p;ee.p=2;var o=Ve;Ve|=4;try{s0(e,s.alternate,s)}finally{Ve=o,ee.p=n,R.T=l}}bt=3}}function T0(){if(bt===4||bt===3){bt=0,Pt();var e=$l,s=hn,l=il,n=h0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?bt=5:(bt=0,hn=$l=null,D0(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Bl=null),ia(l),s=s.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(wl,s,void 0,(s.current.flags&128)===128)}catch{}if(n!==null){s=R.T,o=ee.p,ee.p=2,R.T=null;try{for(var d=e.onRecoverableError,f=0;f<n.length;f++){var y=n[f];d(y.value,{componentStack:y.stack})}}finally{R.T=s,ee.p=o}}(il&3)!==0&&eo(),Ts(e),o=e.pendingLanes,(l&261930)!==0&&(o&42)!==0?e===Bd?pr++:(pr=0,Bd=e):pr=0,br(0)}}function D0(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,Zn(s)))}function eo(){return A0(),E0(),T0(),R0()}function R0(){if(bt!==5)return!1;var e=$l,s=Ud;Ud=0;var l=ia(il),n=R.T,o=ee.p;try{ee.p=32>l?32:l,R.T=null,l=zd,zd=null;var d=$l,f=il;if(bt=0,hn=$l=null,il=0,(Ve&6)!==0)throw Error(c(331));var y=Ve;if(Ve|=4,m0(d.current),c0(d,d.current,f,l),Ve=y,br(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(wl,d)}catch{}return!0}finally{ee.p=o,R.T=n,D0(e,s)}}function M0(e,s,l){s=ts(l,s),s=pd(e.stateNode,s,2),e=Ml(e,s,2),e!==null&&(aa(e,2),Ts(e))}function Qe(e,s,l){if(e.tag===3)M0(e,e,l);else for(;s!==null;){if(s.tag===3){M0(s,e,l);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Bl===null||!Bl.has(n))){e=ts(l,e),l=Of(2),n=Ml(s,l,2),n!==null&&(_f(l,n,s,e),aa(n,2),Ts(n));break}}s=s.return}}function Hd(e,s,l){var n=e.pingCache;if(n===null){n=e.pingCache=new Ry;var o=new Set;n.set(s,o)}else o=n.get(s),o===void 0&&(o=new Set,n.set(s,o));o.has(l)||(Od=!0,o.add(l),e=Uy.bind(null,e,s,l),s.then(e,e))}function Uy(e,s,l){var n=e.pingCache;n!==null&&n.delete(s),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Ie===e&&(Ue&l)===l&&(it===4||it===3&&(Ue&62914560)===Ue&&300>Oe()-Qi?(Ve&2)===0&&pn(e,0):_d|=l,fn===Ue&&(fn=0)),Ts(e)}function O0(e,s){s===0&&(s=la()),e=xa(e,s),e!==null&&(aa(e,s),Ts(e))}function zy(e){var s=e.memoizedState,l=0;s!==null&&(l=s.retryLane),O0(e,l)}function By(e,s){var l=0;switch(e.tag){case 31:case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(l=o.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(c(314))}n!==null&&n.delete(s),O0(e,l)}function $y(e,s){return He(e,s)}var to=null,gn=null,Pd=!1,so=!1,Yd=!1,Hl=0;function Ts(e){e!==gn&&e.next===null&&(gn===null?to=gn=e:gn=gn.next=e),so=!0,Pd||(Pd=!0,Hy())}function br(e,s){if(!Yd&&so){Yd=!0;do for(var l=!1,n=to;n!==null;){if(e!==0){var o=n.pendingLanes;if(o===0)var d=0;else{var f=n.suspendedLanes,y=n.pingedLanes;d=(1<<31-St(42|e)+1)-1,d&=o&~(f&~y),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(l=!0,z0(n,d))}else d=Ue,d=Ha(n,n===Ie?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(d&3)===0||sa(n,d)||(l=!0,z0(n,d));n=n.next}while(l);Yd=!1}}function qy(){_0()}function _0(){so=Pd=!1;var e=0;Hl!==0&&Zy()&&(e=Hl);for(var s=Oe(),l=null,n=to;n!==null;){var o=n.next,d=L0(n,s);d===0?(n.next=null,l===null?to=o:l.next=o,o===null&&(gn=l)):(l=n,(e!==0||(d&3)!==0)&&(so=!0)),n=o}bt!==0&&bt!==5||br(e),Hl!==0&&(Hl=0)}function L0(e,s){for(var l=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var f=31-St(d),y=1<<f,O=o[f];O===-1?((y&l)===0||(y&n)!==0)&&(o[f]=si(y,s)):O<=s&&(e.expiredLanes|=y),d&=~y}if(s=Ie,l=Ue,l=Ha(e,e===s?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,l===0||e===s&&(Xe===2||Xe===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&We(n),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||sa(e,l)){if(s=l&-l,s===e.callbackPriority)return s;switch(n!==null&&We(n),ia(l)){case 2:case 8:l=Ua;break;case 32:l=Ps;break;case 268435456:l=Wr;break;default:l=Ps}return n=U0.bind(null,e),l=He(l,n),e.callbackPriority=s,e.callbackNode=l,s}return n!==null&&n!==null&&We(n),e.callbackPriority=2,e.callbackNode=null,2}function U0(e,s){if(bt!==0&&bt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(eo()&&e.callbackNode!==l)return null;var n=Ue;return n=Ha(e,e===Ie?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(b0(e,n,s),L0(e,Oe()),e.callbackNode!=null&&e.callbackNode===l?U0.bind(null,e):null)}function z0(e,s){if(eo())return null;b0(e,s,!0)}function Hy(){Wy(function(){(Ve&6)!==0?He(ta,qy):_0()})}function Gd(){if(Hl===0){var e=sn;e===0&&(e=Ba,Ba<<=1,(Ba&261888)===0&&(Ba=256)),Hl=e}return Hl}function B0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:di(""+e)}function $0(e,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,e.id&&l.setAttribute("form",e.id),s.parentNode.insertBefore(l,s),e=new FormData(e),l.parentNode.removeChild(l),e}function Py(e,s,l,n,o){if(s==="submit"&&l&&l.stateNode===o){var d=B0((o[Tt]||null).action),f=n.submitter;f&&(s=(s=f[Tt]||null)?B0(s.formAction):f.getAttribute("formAction"),s!==null&&(d=s,f=null));var y=new fi("action","action",null,n,o);e.push({event:y,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Hl!==0){var O=f?$0(o,f):new FormData(o);dd(l,{pending:!0,data:O,method:o.method,action:d},null,O)}}else typeof d=="function"&&(y.preventDefault(),O=f?$0(o,f):new FormData(o),dd(l,{pending:!0,data:O,method:o.method,action:d},d,O))},currentTarget:o}]})}}for(var Jd=0;Jd<Ac.length;Jd++){var Vd=Ac[Jd],Yy=Vd.toLowerCase(),Gy=Vd[0].toUpperCase()+Vd.slice(1);ps(Yy,"on"+Gy)}ps(hx,"onAnimationEnd"),ps(px,"onAnimationIteration"),ps(bx,"onAnimationStart"),ps("dblclick","onDoubleClick"),ps("focusin","onFocus"),ps("focusout","onBlur"),ps(ry,"onTransitionRun"),ps(iy,"onTransitionStart"),ps(oy,"onTransitionCancel"),ps(gx,"onTransitionEnd"),Pa("onMouseEnter",["mouseout","mouseover"]),Pa("onMouseLeave",["mouseout","mouseover"]),Pa("onPointerEnter",["pointerout","pointerover"]),Pa("onPointerLeave",["pointerout","pointerover"]),Dt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gr));function q0(e,s){s=(s&4)!==0;for(var l=0;l<e.length;l++){var n=e[l],o=n.event;n=n.listeners;e:{var d=void 0;if(s)for(var f=n.length-1;0<=f;f--){var y=n[f],O=y.instance,X=y.currentTarget;if(y=y.listener,O!==d&&o.isPropagationStopped())break e;d=y,o.currentTarget=X;try{d(o)}catch(re){bi(re)}o.currentTarget=null,d=O}else for(f=0;f<n.length;f++){if(y=n[f],O=y.instance,X=y.currentTarget,y=y.listener,O!==d&&o.isPropagationStopped())break e;d=y,o.currentTarget=X;try{d(o)}catch(re){bi(re)}o.currentTarget=null,d=O}}}}function Le(e,s){var l=s[oa];l===void 0&&(l=s[oa]=new Set);var n=e+"__bubble";l.has(n)||(H0(s,e,2,!1),l.add(n))}function Xd(e,s,l){var n=0;s&&(n|=4),H0(l,e,n,s)}var lo="_reactListening"+Math.random().toString(36).slice(2);function Qd(e){if(!e[lo]){e[lo]=!0,hs.forEach(function(l){l!=="selectionchange"&&(Jy.has(l)||Xd(l,!1,e),Xd(l,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[lo]||(s[lo]=!0,Xd("selectionchange",!1,s))}}function H0(e,s,l,n){switch(ph(s)){case 2:var o=yv;break;case 8:o=vv;break;default:o=cu}l=o.bind(null,s,l,e),o=void 0,!fc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(s,l,{capture:!0,passive:o}):e.addEventListener(s,l,!0):o!==void 0?e.addEventListener(s,l,{passive:o}):e.addEventListener(s,l,!1)}function Fd(e,s,l,n,o){var d=n;if((s&1)===0&&(s&2)===0&&n!==null)e:for(;;){if(n===null)return;var f=n.tag;if(f===3||f===4){var y=n.stateNode.containerInfo;if(y===o)break;if(f===4)for(f=n.return;f!==null;){var O=f.tag;if((O===3||O===4)&&f.stateNode.containerInfo===o)return;f=f.return}for(;y!==null;){if(f=Ee(y),f===null)return;if(O=f.tag,O===5||O===6||O===26||O===27){n=d=f;continue e}y=y.parentNode}}n=n.return}Jm(function(){var X=d,re=mc(l),de=[];e:{var F=yx.get(e);if(F!==void 0){var ae=fi,ye=e;switch(e){case"keypress":if(mi(l)===0)break e;case"keydown":case"keyup":ae=Bg;break;case"focusin":ye="focus",ae=gc;break;case"focusout":ye="blur",ae=gc;break;case"beforeblur":case"afterblur":ae=gc;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Qm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Cg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Hg;break;case hx:case px:case bx:ae=Tg;break;case gx:ae=Yg;break;case"scroll":case"scrollend":ae=Sg;break;case"wheel":ae=Jg;break;case"copy":case"cut":case"paste":ae=Rg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Km;break;case"toggle":case"beforetoggle":ae=Xg}var Se=(s&4)!==0,Ze=!Se&&(e==="scroll"||e==="scrollend"),G=Se?F!==null?F+"Capture":null:F;Se=[];for(var B=X,V;B!==null;){var oe=B;if(V=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||V===null||G===null||(oe=qn(B,G),oe!=null&&Se.push(yr(B,oe,V))),Ze)break;B=B.return}0<Se.length&&(F=new ae(F,ye,null,l,re),de.push({event:F,listeners:Se}))}}if((s&7)===0){e:{if(F=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",F&&l!==uc&&(ye=l.relatedTarget||l.fromElement)&&(Ee(ye)||ye[Sl]))break e;if((ae||F)&&(F=re.window===re?re:(F=re.ownerDocument)?F.defaultView||F.parentWindow:window,ae?(ye=l.relatedTarget||l.toElement,ae=X,ye=ye?Ee(ye):null,ye!==null&&(Ze=u(ye),Se=ye.tag,ye!==Ze||Se!==5&&Se!==27&&Se!==6)&&(ye=null)):(ae=null,ye=X),ae!==ye)){if(Se=Qm,oe="onMouseLeave",G="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(Se=Km,oe="onPointerLeave",G="onPointerEnter",B="pointer"),Ze=ae==null?F:Pe(ae),V=ye==null?F:Pe(ye),F=new Se(oe,B+"leave",ae,l,re),F.target=Ze,F.relatedTarget=V,oe=null,Ee(re)===X&&(Se=new Se(G,B+"enter",ye,l,re),Se.target=V,Se.relatedTarget=Ze,oe=Se),Ze=oe,ae&&ye)t:{for(Se=Vy,G=ae,B=ye,V=0,oe=G;oe;oe=Se(oe))V++;oe=0;for(var we=B;we;we=Se(we))oe++;for(;0<V-oe;)G=Se(G),V--;for(;0<oe-V;)B=Se(B),oe--;for(;V--;){if(G===B||B!==null&&G===B.alternate){Se=G;break t}G=Se(G),B=Se(B)}Se=null}else Se=null;ae!==null&&P0(de,F,ae,Se,!1),ye!==null&&Ze!==null&&P0(de,Ze,ye,Se,!0)}}e:{if(F=X?Pe(X):window,ae=F.nodeName&&F.nodeName.toLowerCase(),ae==="select"||ae==="input"&&F.type==="file")var Ye=ax;else if(sx(F))if(nx)Ye=ly;else{Ye=ty;var je=ey}else ae=F.nodeName,!ae||ae.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?X&&dc(X.elementType)&&(Ye=ax):Ye=sy;if(Ye&&(Ye=Ye(e,X))){lx(de,Ye,l,re);break e}je&&je(e,F,X),e==="focusout"&&X&&F.type==="number"&&X.memoizedProps.value!=null&&cc(F,"number",F.value)}switch(je=X?Pe(X):window,e){case"focusin":(sx(je)||je.contentEditable==="true")&&(Qa=je,Sc=X,Qn=null);break;case"focusout":Qn=Sc=Qa=null;break;case"mousedown":kc=!0;break;case"contextmenu":case"mouseup":case"dragend":kc=!1,xx(de,l,re);break;case"selectionchange":if(ny)break;case"keydown":case"keyup":xx(de,l,re)}var Re;if(vc)e:{switch(e){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Xa?ex(e,l)&&(ze="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(ze="onCompositionStart");ze&&(Zm&&l.locale!=="ko"&&(Xa||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Xa&&(Re=Vm()):(kl=re,hc="value"in kl?kl.value:kl.textContent,Xa=!0)),je=ao(X,ze),0<je.length&&(ze=new Fm(ze,e,null,l,re),de.push({event:ze,listeners:je}),Re?ze.data=Re:(Re=tx(l),Re!==null&&(ze.data=Re)))),(Re=Fg?Kg(e,l):Zg(e,l))&&(ze=ao(X,"onBeforeInput"),0<ze.length&&(je=new Fm("onBeforeInput","beforeinput",null,l,re),de.push({event:je,listeners:ze}),je.data=Re)),Py(de,e,X,l,re)}q0(de,s)})}function yr(e,s,l){return{instance:e,listener:s,currentTarget:l}}function ao(e,s){for(var l=s+"Capture",n=[];e!==null;){var o=e,d=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||d===null||(o=qn(e,l),o!=null&&n.unshift(yr(e,o,d)),o=qn(e,s),o!=null&&n.push(yr(e,o,d))),e.tag===3)return n;e=e.return}return[]}function Vy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function P0(e,s,l,n,o){for(var d=s._reactName,f=[];l!==null&&l!==n;){var y=l,O=y.alternate,X=y.stateNode;if(y=y.tag,O!==null&&O===n)break;y!==5&&y!==26&&y!==27||X===null||(O=X,o?(X=qn(l,d),X!=null&&f.unshift(yr(l,X,O))):o||(X=qn(l,d),X!=null&&f.push(yr(l,X,O)))),l=l.return}f.length!==0&&e.push({event:s,listeners:f})}var Xy=/\r\n?/g,Qy=/\u0000|\uFFFD/g;function Y0(e){return(typeof e=="string"?e:""+e).replace(Xy,`
`).replace(Qy,"")}function G0(e,s){return s=Y0(s),Y0(e)===s}function Ke(e,s,l,n,o,d){switch(l){case"children":typeof n=="string"?s==="body"||s==="textarea"&&n===""||Ga(e,n):(typeof n=="number"||typeof n=="bigint")&&s!=="body"&&Ga(e,""+n);break;case"className":oi(e,"class",n);break;case"tabIndex":oi(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(e,l,n);break;case"style":Ym(e,n,d);break;case"data":if(s!=="object"){oi(e,"data",n);break}case"src":case"href":if(n===""&&(s!=="a"||l!=="href")){e.removeAttribute(l);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(l);break}n=di(""+n),e.setAttribute(l,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(l==="formAction"?(s!=="input"&&Ke(e,s,"name",o.name,o,null),Ke(e,s,"formEncType",o.formEncType,o,null),Ke(e,s,"formMethod",o.formMethod,o,null),Ke(e,s,"formTarget",o.formTarget,o,null)):(Ke(e,s,"encType",o.encType,o,null),Ke(e,s,"method",o.method,o,null),Ke(e,s,"target",o.target,o,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(l);break}n=di(""+n),e.setAttribute(l,n);break;case"onClick":n!=null&&(e.onclick=Vs);break;case"onScroll":n!=null&&Le("scroll",e);break;case"onScrollEnd":n!=null&&Le("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(l=n.__html,l!=null){if(o.children!=null)throw Error(c(60));e.innerHTML=l}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}l=di(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(l,""+n):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":n===!0?e.setAttribute(l,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(l,n):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(l,n):e.removeAttribute(l);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(l):e.setAttribute(l,n);break;case"popover":Le("beforetoggle",e),Le("toggle",e),ii(e,"popover",n);break;case"xlinkActuate":Js(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Js(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Js(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Js(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Js(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Js(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Js(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Js(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Js(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":ii(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ng.get(l)||l,ii(e,l,n))}}function Kd(e,s,l,n,o,d){switch(l){case"style":Ym(e,n,d);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(l=n.__html,l!=null){if(o.children!=null)throw Error(c(60));e.innerHTML=l}}break;case"children":typeof n=="string"?Ga(e,n):(typeof n=="number"||typeof n=="bigint")&&Ga(e,""+n);break;case"onScroll":n!=null&&Le("scroll",e);break;case"onScrollEnd":n!=null&&Le("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Vs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ri.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(o=l.endsWith("Capture"),s=l.slice(2,o?l.length-7:void 0),d=e[Tt]||null,d=d!=null?d[l]:null,typeof d=="function"&&e.removeEventListener(s,d,o),typeof n=="function")){typeof d!="function"&&d!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(s,n,o);break e}l in e?e[l]=n:n===!0?e.setAttribute(l,""):ii(e,l,n)}}}function Et(e,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",e),Le("load",e);var n=!1,o=!1,d;for(d in l)if(l.hasOwnProperty(d)){var f=l[d];if(f!=null)switch(d){case"src":n=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,s));default:Ke(e,s,d,f,l,null)}}o&&Ke(e,s,"srcSet",l.srcSet,l,null),n&&Ke(e,s,"src",l.src,l,null);return;case"input":Le("invalid",e);var y=d=f=o=null,O=null,X=null;for(n in l)if(l.hasOwnProperty(n)){var re=l[n];if(re!=null)switch(n){case"name":o=re;break;case"type":f=re;break;case"checked":O=re;break;case"defaultChecked":X=re;break;case"value":d=re;break;case"defaultValue":y=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(c(137,s));break;default:Ke(e,s,n,re,l,null)}}$m(e,d,y,O,X,f,o,!1);return;case"select":Le("invalid",e),n=f=d=null;for(o in l)if(l.hasOwnProperty(o)&&(y=l[o],y!=null))switch(o){case"value":d=y;break;case"defaultValue":f=y;break;case"multiple":n=y;default:Ke(e,s,o,y,l,null)}s=d,l=f,e.multiple=!!n,s!=null?Ya(e,!!n,s,!1):l!=null&&Ya(e,!!n,l,!0);return;case"textarea":Le("invalid",e),d=o=n=null;for(f in l)if(l.hasOwnProperty(f)&&(y=l[f],y!=null))switch(f){case"value":n=y;break;case"defaultValue":o=y;break;case"children":d=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(c(91));break;default:Ke(e,s,f,y,l,null)}Hm(e,n,o,d);return;case"option":for(O in l)l.hasOwnProperty(O)&&(n=l[O],n!=null)&&(O==="selected"?e.selected=n&&typeof n!="function"&&typeof n!="symbol":Ke(e,s,O,n,l,null));return;case"dialog":Le("beforetoggle",e),Le("toggle",e),Le("cancel",e),Le("close",e);break;case"iframe":case"object":Le("load",e);break;case"video":case"audio":for(n=0;n<gr.length;n++)Le(gr[n],e);break;case"image":Le("error",e),Le("load",e);break;case"details":Le("toggle",e);break;case"embed":case"source":case"link":Le("error",e),Le("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(n=l[X],n!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,s));default:Ke(e,s,X,n,l,null)}return;default:if(dc(s)){for(re in l)l.hasOwnProperty(re)&&(n=l[re],n!==void 0&&Kd(e,s,re,n,l,void 0));return}}for(y in l)l.hasOwnProperty(y)&&(n=l[y],n!=null&&Ke(e,s,y,n,l,null))}function Fy(e,s,l,n){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,d=null,f=null,y=null,O=null,X=null,re=null;for(ae in l){var de=l[ae];if(l.hasOwnProperty(ae)&&de!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":O=de;default:n.hasOwnProperty(ae)||Ke(e,s,ae,null,n,de)}}for(var F in n){var ae=n[F];if(de=l[F],n.hasOwnProperty(F)&&(ae!=null||de!=null))switch(F){case"type":d=ae;break;case"name":o=ae;break;case"checked":X=ae;break;case"defaultChecked":re=ae;break;case"value":f=ae;break;case"defaultValue":y=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(c(137,s));break;default:ae!==de&&Ke(e,s,F,ae,n,de)}}oc(e,f,y,O,X,re,d,o);return;case"select":ae=f=y=F=null;for(d in l)if(O=l[d],l.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":ae=O;default:n.hasOwnProperty(d)||Ke(e,s,d,null,n,O)}for(o in n)if(d=n[o],O=l[o],n.hasOwnProperty(o)&&(d!=null||O!=null))switch(o){case"value":F=d;break;case"defaultValue":y=d;break;case"multiple":f=d;default:d!==O&&Ke(e,s,o,d,n,O)}s=y,l=f,n=ae,F!=null?Ya(e,!!l,F,!1):!!n!=!!l&&(s!=null?Ya(e,!!l,s,!0):Ya(e,!!l,l?[]:"",!1));return;case"textarea":ae=F=null;for(y in l)if(o=l[y],l.hasOwnProperty(y)&&o!=null&&!n.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ke(e,s,y,null,n,o)}for(f in n)if(o=n[f],d=l[f],n.hasOwnProperty(f)&&(o!=null||d!=null))switch(f){case"value":F=o;break;case"defaultValue":ae=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(c(91));break;default:o!==d&&Ke(e,s,f,o,n,d)}qm(e,F,ae);return;case"option":for(var ye in l)F=l[ye],l.hasOwnProperty(ye)&&F!=null&&!n.hasOwnProperty(ye)&&(ye==="selected"?e.selected=!1:Ke(e,s,ye,null,n,F));for(O in n)F=n[O],ae=l[O],n.hasOwnProperty(O)&&F!==ae&&(F!=null||ae!=null)&&(O==="selected"?e.selected=F&&typeof F!="function"&&typeof F!="symbol":Ke(e,s,O,F,n,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)F=l[Se],l.hasOwnProperty(Se)&&F!=null&&!n.hasOwnProperty(Se)&&Ke(e,s,Se,null,n,F);for(X in n)if(F=n[X],ae=l[X],n.hasOwnProperty(X)&&F!==ae&&(F!=null||ae!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(c(137,s));break;default:Ke(e,s,X,F,n,ae)}return;default:if(dc(s)){for(var Ze in l)F=l[Ze],l.hasOwnProperty(Ze)&&F!==void 0&&!n.hasOwnProperty(Ze)&&Kd(e,s,Ze,void 0,n,F);for(re in n)F=n[re],ae=l[re],!n.hasOwnProperty(re)||F===ae||F===void 0&&ae===void 0||Kd(e,s,re,F,n,ae);return}}for(var G in l)F=l[G],l.hasOwnProperty(G)&&F!=null&&!n.hasOwnProperty(G)&&Ke(e,s,G,null,n,F);for(de in n)F=n[de],ae=l[de],!n.hasOwnProperty(de)||F===ae||F==null&&ae==null||Ke(e,s,de,F,n,ae)}function J0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ky(){if(typeof performance.getEntriesByType=="function"){for(var e=0,s=0,l=performance.getEntriesByType("resource"),n=0;n<l.length;n++){var o=l[n],d=o.transferSize,f=o.initiatorType,y=o.duration;if(d&&y&&J0(f)){for(f=0,y=o.responseEnd,n+=1;n<l.length;n++){var O=l[n],X=O.startTime;if(X>y)break;var re=O.transferSize,de=O.initiatorType;re&&J0(de)&&(O=O.responseEnd,f+=re*(O<y?1:(y-X)/(O-X)))}if(--n,s+=8*(d+f)/(o.duration/1e3),e++,10<e)break}}if(0<e)return s/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Zd=null,Id=null;function no(e){return e.nodeType===9?e:e.ownerDocument}function V0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X0(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function Wd(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var eu=null;function Zy(){var e=window.event;return e&&e.type==="popstate"?e===eu?!1:(eu=e,!0):(eu=null,!1)}var Q0=typeof setTimeout=="function"?setTimeout:void 0,Iy=typeof clearTimeout=="function"?clearTimeout:void 0,F0=typeof Promise=="function"?Promise:void 0,Wy=typeof queueMicrotask=="function"?queueMicrotask:typeof F0<"u"?function(e){return F0.resolve(null).then(e).catch(ev)}:Q0;function ev(e){setTimeout(function(){throw e})}function Pl(e){return e==="head"}function K0(e,s){var l=s,n=0;do{var o=l.nextSibling;if(e.removeChild(l),o&&o.nodeType===8)if(l=o.data,l==="/$"||l==="/&"){if(n===0){e.removeChild(o),Nn(s);return}n--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")n++;else if(l==="html")vr(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,vr(l);for(var d=l.firstChild;d;){var f=d.nextSibling,y=d.nodeName;d[A]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&d.rel.toLowerCase()==="stylesheet"||l.removeChild(d),d=f}}else l==="body"&&vr(e.ownerDocument.body);l=o}while(l);Nn(s)}function Z0(e,s){var l=e;e=0;do{var n=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),n&&n.nodeType===8)if(l=n.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=n}while(l)}function tu(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":tu(l),pe(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function tv(e,s,l,n){for(;e.nodeType===1;){var o=l;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[A])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var d=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=rs(e.nextSibling),e===null)break}return null}function sv(e,s,l){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=rs(e.nextSibling),e===null))return null;return e}function I0(e,s){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=rs(e.nextSibling),e===null))return null;return e}function su(e){return e.data==="$?"||e.data==="$~"}function lu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function lv(e,s){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=s;else if(e.data!=="$?"||l.readyState!=="loading")s();else{var n=function(){s(),l.removeEventListener("DOMContentLoaded",n)};l.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function rs(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return e}var au=null;function W0(e){e=e.nextSibling;for(var s=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(s===0)return rs(e.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}e=e.nextSibling}return null}function eh(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return e;s--}else l!=="/$"&&l!=="/&"||s++}e=e.previousSibling}return null}function th(e,s,l){switch(s=no(l),e){case"html":if(e=s.documentElement,!e)throw Error(c(452));return e;case"head":if(e=s.head,!e)throw Error(c(453));return e;case"body":if(e=s.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function vr(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);pe(e)}var is=new Map,sh=new Set;function ro(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ol=ee.d;ee.d={f:av,r:nv,D:rv,C:iv,L:ov,m:cv,X:uv,S:dv,M:mv};function av(){var e=ol.f(),s=Zi();return e||s}function nv(e){var s=De(e);s!==null&&s.tag===5&&s.type==="form"?yf(s):ol.r(e)}var yn=typeof document>"u"?null:document;function lh(e,s,l){var n=yn;if(n&&typeof s=="string"&&s){var o=Wt(s);o='link[rel="'+e+'"][href="'+o+'"]',typeof l=="string"&&(o+='[crossorigin="'+l+'"]'),sh.has(o)||(sh.add(o),e={rel:e,crossOrigin:l,href:s},n.querySelector(o)===null&&(s=n.createElement("link"),Et(s,"link",e),lt(s),n.head.appendChild(s)))}}function rv(e){ol.D(e),lh("dns-prefetch",e,null)}function iv(e,s){ol.C(e,s),lh("preconnect",e,s)}function ov(e,s,l){ol.L(e,s,l);var n=yn;if(n&&e&&s){var o='link[rel="preload"][as="'+Wt(s)+'"]';s==="image"&&l&&l.imageSrcSet?(o+='[imagesrcset="'+Wt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(o+='[imagesizes="'+Wt(l.imageSizes)+'"]')):o+='[href="'+Wt(e)+'"]';var d=o;switch(s){case"style":d=vn(e);break;case"script":d=jn(e)}is.has(d)||(e=v({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:e,as:s},l),is.set(d,e),n.querySelector(o)!==null||s==="style"&&n.querySelector(jr(d))||s==="script"&&n.querySelector(Nr(d))||(s=n.createElement("link"),Et(s,"link",e),lt(s),n.head.appendChild(s)))}}function cv(e,s){ol.m(e,s);var l=yn;if(l&&e){var n=s&&typeof s.as=="string"?s.as:"script",o='link[rel="modulepreload"][as="'+Wt(n)+'"][href="'+Wt(e)+'"]',d=o;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=jn(e)}if(!is.has(d)&&(e=v({rel:"modulepreload",href:e},s),is.set(d,e),l.querySelector(o)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Nr(d)))return}n=l.createElement("link"),Et(n,"link",e),lt(n),l.head.appendChild(n)}}}function dv(e,s,l){ol.S(e,s,l);var n=yn;if(n&&e){var o=dt(n).hoistableStyles,d=vn(e);s=s||"default";var f=o.get(d);if(!f){var y={loading:0,preload:null};if(f=n.querySelector(jr(d)))y.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":s},l),(l=is.get(d))&&nu(e,l);var O=f=n.createElement("link");lt(O),Et(O,"link",e),O._p=new Promise(function(X,re){O.onload=X,O.onerror=re}),O.addEventListener("load",function(){y.loading|=1}),O.addEventListener("error",function(){y.loading|=2}),y.loading|=4,io(f,s,n)}f={type:"stylesheet",instance:f,count:1,state:y},o.set(d,f)}}}function uv(e,s){ol.X(e,s);var l=yn;if(l&&e){var n=dt(l).hoistableScripts,o=jn(e),d=n.get(o);d||(d=l.querySelector(Nr(o)),d||(e=v({src:e,async:!0},s),(s=is.get(o))&&ru(e,s),d=l.createElement("script"),lt(d),Et(d,"link",e),l.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},n.set(o,d))}}function mv(e,s){ol.M(e,s);var l=yn;if(l&&e){var n=dt(l).hoistableScripts,o=jn(e),d=n.get(o);d||(d=l.querySelector(Nr(o)),d||(e=v({src:e,async:!0,type:"module"},s),(s=is.get(o))&&ru(e,s),d=l.createElement("script"),lt(d),Et(d,"link",e),l.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},n.set(o,d))}}function ah(e,s,l,n){var o=(o=Ne.current)?ro(o):null;if(!o)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=vn(l.href),l=dt(o).hoistableStyles,n=l.get(s),n||(n={type:"style",instance:null,count:0,state:null},l.set(s,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=vn(l.href);var d=dt(o).hoistableStyles,f=d.get(e);if(f||(o=o.ownerDocument||o,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,f),(d=o.querySelector(jr(e)))&&!d._p&&(f.instance=d,f.state.loading=5),is.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},is.set(e,l),d||xv(o,e,l,f.state))),s&&n===null)throw Error(c(528,""));return f}if(s&&n!==null)throw Error(c(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=jn(l),l=dt(o).hoistableScripts,n=l.get(s),n||(n={type:"script",instance:null,count:0,state:null},l.set(s,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function vn(e){return'href="'+Wt(e)+'"'}function jr(e){return'link[rel="stylesheet"]['+e+"]"}function nh(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function xv(e,s,l,n){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?n.loading=1:(s=e.createElement("link"),n.preload=s,s.addEventListener("load",function(){return n.loading|=1}),s.addEventListener("error",function(){return n.loading|=2}),Et(s,"link",l),lt(s),e.head.appendChild(s))}function jn(e){return'[src="'+Wt(e)+'"]'}function Nr(e){return"script[async]"+e}function rh(e,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var n=e.querySelector('style[data-href~="'+Wt(l.href)+'"]');if(n)return s.instance=n,lt(n),n;var o=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),lt(n),Et(n,"style",o),io(n,l.precedence,e),s.instance=n;case"stylesheet":o=vn(l.href);var d=e.querySelector(jr(o));if(d)return s.state.loading|=4,s.instance=d,lt(d),d;n=nh(l),(o=is.get(o))&&nu(n,o),d=(e.ownerDocument||e).createElement("link"),lt(d);var f=d;return f._p=new Promise(function(y,O){f.onload=y,f.onerror=O}),Et(d,"link",n),s.state.loading|=4,io(d,l.precedence,e),s.instance=d;case"script":return d=jn(l.src),(o=e.querySelector(Nr(d)))?(s.instance=o,lt(o),o):(n=l,(o=is.get(d))&&(n=v({},l),ru(n,o)),e=e.ownerDocument||e,o=e.createElement("script"),lt(o),Et(o,"link",n),e.head.appendChild(o),s.instance=o);case"void":return null;default:throw Error(c(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(n=s.instance,s.state.loading|=4,io(n,l.precedence,e));return s.instance}function io(e,s,l){for(var n=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=n.length?n[n.length-1]:null,d=o,f=0;f<n.length;f++){var y=n[f];if(y.dataset.precedence===s)d=y;else if(d!==o)break}d?d.parentNode.insertBefore(e,d.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(e,s.firstChild))}function nu(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function ru(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var oo=null;function ih(e,s,l){if(oo===null){var n=new Map,o=oo=new Map;o.set(l,n)}else o=oo,n=o.get(l),n||(n=new Map,o.set(l,n));if(n.has(e))return n;for(n.set(e,null),l=l.getElementsByTagName(e),o=0;o<l.length;o++){var d=l[o];if(!(d[A]||d[pt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var f=d.getAttribute(s)||"";f=e+f;var y=n.get(f);y?y.push(d):n.set(f,[d])}}return n}function oh(e,s,l){e=e.ownerDocument||e,e.head.insertBefore(l,s==="title"?e.querySelector("head > title"):null)}function fv(e,s,l){if(l===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(e=s.disabled,typeof s.precedence=="string"&&e==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ch(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function hv(e,s,l,n){if(l.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var o=vn(n.href),d=s.querySelector(jr(o));if(d){s=d._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(e.count++,e=co.bind(e),s.then(e,e)),l.state.loading|=4,l.instance=d,lt(d);return}d=s.ownerDocument||s,n=nh(n),(o=is.get(o))&&nu(n,o),d=d.createElement("link"),lt(d);var f=d;f._p=new Promise(function(y,O){f.onload=y,f.onerror=O}),Et(d,"link",n),l.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=co.bind(e),s.addEventListener("load",l),s.addEventListener("error",l))}}var iu=0;function pv(e,s){return e.stylesheets&&e.count===0&&mo(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var n=setTimeout(function(){if(e.stylesheets&&mo(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+s);0<e.imgBytes&&iu===0&&(iu=62500*Ky());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&mo(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>iu?50:800)+s);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(o)}}:null}function co(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var uo=null;function mo(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,uo=new Map,s.forEach(bv,e),uo=null,co.call(e))}function bv(e,s){if(!(s.state.loading&4)){var l=uo.get(e);if(l)var n=l.get(null);else{l=new Map,uo.set(e,l);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<o.length;d++){var f=o[d];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(l.set(f.dataset.precedence,f),n=f)}n&&l.set(null,n)}o=s.instance,f=o.getAttribute("data-precedence"),d=l.get(f)||n,d===n&&l.set(null,o),l.set(f,o),this.count++,n=co.bind(this),o.addEventListener("load",n),o.addEventListener("error",n),d?d.parentNode.insertBefore(o,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),s.state.loading|=4}}var wr={$$typeof:U,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function gv(e,s,l,n,o,d,f,y,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bn(0),this.hiddenUpdates=Bn(null),this.identifierPrefix=n,this.onUncaughtError=o,this.onCaughtError=d,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function dh(e,s,l,n,o,d,f,y,O,X,re,de){return e=new gv(e,s,l,f,O,X,re,de,y),s=1,d===!0&&(s|=24),d=Gt(3,null,null,s),e.current=d,d.stateNode=e,s=qc(),s.refCount++,e.pooledCache=s,s.refCount++,d.memoizedState={element:n,isDehydrated:l,cache:s},Gc(d),e}function uh(e){return e?(e=Za,e):Za}function mh(e,s,l,n,o,d){o=uh(o),n.context===null?n.context=o:n.pendingContext=o,n=Rl(s),n.payload={element:l},d=d===void 0?null:d,d!==null&&(n.callback=d),l=Ml(e,n,s),l!==null&&(Ht(l,e,s),tr(l,e,s))}function xh(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<s?l:s}}function ou(e,s){xh(e,s),(e=e.alternate)&&xh(e,s)}function fh(e){if(e.tag===13||e.tag===31){var s=xa(e,67108864);s!==null&&Ht(s,e,67108864),ou(e,67108864)}}function hh(e){if(e.tag===13||e.tag===31){var s=Ft();s=ra(s);var l=xa(e,s);l!==null&&Ht(l,e,s),ou(e,s)}}var xo=!0;function yv(e,s,l,n){var o=R.T;R.T=null;var d=ee.p;try{ee.p=2,cu(e,s,l,n)}finally{ee.p=d,R.T=o}}function vv(e,s,l,n){var o=R.T;R.T=null;var d=ee.p;try{ee.p=8,cu(e,s,l,n)}finally{ee.p=d,R.T=o}}function cu(e,s,l,n){if(xo){var o=du(n);if(o===null)Fd(e,s,n,fo,l),bh(e,n);else if(Nv(o,e,s,l,n))n.stopPropagation();else if(bh(e,n),s&4&&-1<jv.indexOf(e)){for(;o!==null;){var d=De(o);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var f=Ys(d.pendingLanes);if(f!==0){var y=d;for(y.pendingLanes|=2,y.entangledLanes|=2;f;){var O=1<<31-St(f);y.entanglements[1]|=O,f&=~O}Ts(d),(Ve&6)===0&&(Fi=Oe()+500,br(0))}}break;case 31:case 13:y=xa(d,2),y!==null&&Ht(y,d,2),Zi(),ou(d,2)}if(d=du(n),d===null&&Fd(e,s,n,fo,l),d===o)break;o=d}o!==null&&n.stopPropagation()}else Fd(e,s,n,null,l)}}function du(e){return e=mc(e),uu(e)}var fo=null;function uu(e){if(fo=null,e=Ee(e),e!==null){var s=u(e);if(s===null)e=null;else{var l=s.tag;if(l===13){if(e=h(s),e!==null)return e;e=null}else if(l===31){if(e=g(s),e!==null)return e;e=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return fo=e,null}function ph(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xs()){case ta:return 2;case Ua:return 8;case Ps:case Nl:return 32;case Wr:return 268435456;default:return 32}default:return 32}}var mu=!1,Yl=null,Gl=null,Jl=null,Sr=new Map,kr=new Map,Vl=[],jv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,s){switch(e){case"focusin":case"focusout":Yl=null;break;case"dragenter":case"dragleave":Gl=null;break;case"mouseover":case"mouseout":Jl=null;break;case"pointerover":case"pointerout":Sr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":kr.delete(s.pointerId)}}function Cr(e,s,l,n,o,d){return e===null||e.nativeEvent!==d?(e={blockedOn:s,domEventName:l,eventSystemFlags:n,nativeEvent:d,targetContainers:[o]},s!==null&&(s=De(s),s!==null&&fh(s)),e):(e.eventSystemFlags|=n,s=e.targetContainers,o!==null&&s.indexOf(o)===-1&&s.push(o),e)}function Nv(e,s,l,n,o){switch(s){case"focusin":return Yl=Cr(Yl,e,s,l,n,o),!0;case"dragenter":return Gl=Cr(Gl,e,s,l,n,o),!0;case"mouseover":return Jl=Cr(Jl,e,s,l,n,o),!0;case"pointerover":var d=o.pointerId;return Sr.set(d,Cr(Sr.get(d)||null,e,s,l,n,o)),!0;case"gotpointercapture":return d=o.pointerId,kr.set(d,Cr(kr.get(d)||null,e,s,l,n,o)),!0}return!1}function gh(e){var s=Ee(e.target);if(s!==null){var l=u(s);if(l!==null){if(s=l.tag,s===13){if(s=h(l),s!==null){e.blockedOn=s,ai(e.priority,function(){hh(l)});return}}else if(s===31){if(s=g(l),s!==null){e.blockedOn=s,ai(e.priority,function(){hh(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ho(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var l=du(e.nativeEvent);if(l===null){l=e.nativeEvent;var n=new l.constructor(l.type,l);uc=n,l.target.dispatchEvent(n),uc=null}else return s=De(l),s!==null&&fh(s),e.blockedOn=l,!1;s.shift()}return!0}function yh(e,s,l){ho(e)&&l.delete(s)}function wv(){mu=!1,Yl!==null&&ho(Yl)&&(Yl=null),Gl!==null&&ho(Gl)&&(Gl=null),Jl!==null&&ho(Jl)&&(Jl=null),Sr.forEach(yh),kr.forEach(yh)}function po(e,s){e.blockedOn===s&&(e.blockedOn=null,mu||(mu=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wv)))}var bo=null;function vh(e){bo!==e&&(bo=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){bo===e&&(bo=null);for(var s=0;s<e.length;s+=3){var l=e[s],n=e[s+1],o=e[s+2];if(typeof n!="function"){if(uu(n||l)===null)continue;break}var d=De(l);d!==null&&(e.splice(s,3),s-=3,dd(d,{pending:!0,data:o,method:l.method,action:n},n,o))}}))}function Nn(e){function s(O){return po(O,e)}Yl!==null&&po(Yl,e),Gl!==null&&po(Gl,e),Jl!==null&&po(Jl,e),Sr.forEach(s),kr.forEach(s);for(var l=0;l<Vl.length;l++){var n=Vl[l];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Vl.length&&(l=Vl[0],l.blockedOn===null);)gh(l),l.blockedOn===null&&Vl.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(n=0;n<l.length;n+=3){var o=l[n],d=l[n+1],f=o[Tt]||null;if(typeof d=="function")f||vh(l);else if(f){var y=null;if(d&&d.hasAttribute("formAction")){if(o=d,f=d[Tt]||null)y=f.formAction;else if(uu(o)!==null)continue}else y=f.action;typeof y=="function"?l[n+1]=y:(l.splice(n,3),n-=3),vh(l)}}}function jh(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(f){return o=f})},focusReset:"manual",scroll:"manual"})}function s(){o!==null&&(o(),o=null),n||setTimeout(l,20)}function l(){if(!n&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),o!==null&&(o(),o=null)}}}function xu(e){this._internalRoot=e}go.prototype.render=xu.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(c(409));var l=s.current,n=Ft();mh(l,n,e,s,null,null)},go.prototype.unmount=xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;mh(e.current,2,null,e,null,null),Zi(),s[Sl]=null}};function go(e){this._internalRoot=e}go.prototype.unstable_scheduleHydration=function(e){if(e){var s=$n();e={blockedOn:null,target:e,priority:s};for(var l=0;l<Vl.length&&s!==0&&s<Vl[l].priority;l++);Vl.splice(l,0,e),l===0&&gh(e)}};var Nh=r.version;if(Nh!=="19.2.4")throw Error(c(527,Nh,"19.2.4"));ee.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=b(s),e=e!==null?j(e):null,e=e===null?null:e.stateNode,e};var Sv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yo.isDisabled&&yo.supportsFiber)try{wl=yo.inject(Sv),ht=yo}catch{}}return Er.createRoot=function(e,s){if(!m(e))throw Error(c(299));var l=!1,n="",o=Tf,d=Df,f=Rf;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(o=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=dh(e,1,!1,null,null,l,n,null,o,d,f,jh),e[Sl]=s.current,Qd(e),new xu(s)},Er.hydrateRoot=function(e,s,l){if(!m(e))throw Error(c(299));var n=!1,o="",d=Tf,f=Df,y=Rf,O=null;return l!=null&&(l.unstable_strictMode===!0&&(n=!0),l.identifierPrefix!==void 0&&(o=l.identifierPrefix),l.onUncaughtError!==void 0&&(d=l.onUncaughtError),l.onCaughtError!==void 0&&(f=l.onCaughtError),l.onRecoverableError!==void 0&&(y=l.onRecoverableError),l.formState!==void 0&&(O=l.formState)),s=dh(e,1,!0,s,l??null,n,o,O,d,f,y,jh),s.context=uh(null),l=s.current,n=Ft(),n=ra(n),o=Rl(n),o.callback=null,Ml(l,o,n),l=n,s.current.lanes=l,aa(s,l),Ts(s),e[Sl]=s.current,Qd(e),new go(s)},Er.version="19.2.4",Er}var Mh;function Lv(){if(Mh)return pu.exports;Mh=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(r){console.error(r)}}return a(),pu.exports=_v(),pu.exports}var Uv=Lv();const zv=ib(Uv);var Oh="popstate";function Bv(a={}){function r(c,m){let{pathname:u,search:h,hash:g}=c.location;return Wu("",{pathname:u,search:h,hash:g},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function i(c,m){return typeof m=="string"?m:Ur(m)}return qv(r,i,null,a)}function nt(a,r){if(a===!1||a===null||typeof a>"u")throw new Error(r)}function Ns(a,r){if(!a){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function $v(){return Math.random().toString(36).substring(2,10)}function _h(a,r){return{usr:a.state,key:a.key,idx:r}}function Wu(a,r,i=null,c){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof r=="string"?Tn(r):r,state:i,key:r&&r.key||c||$v()}}function Ur({pathname:a="/",search:r="",hash:i=""}){return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(a+=i.charAt(0)==="#"?i:"#"+i),a}function Tn(a){let r={};if(a){let i=a.indexOf("#");i>=0&&(r.hash=a.substring(i),a=a.substring(0,i));let c=a.indexOf("?");c>=0&&(r.search=a.substring(c),a=a.substring(0,c)),a&&(r.pathname=a)}return r}function qv(a,r,i,c={}){let{window:m=document.defaultView,v5Compat:u=!1}=c,h=m.history,g="POP",p=null,b=j();b==null&&(b=0,h.replaceState({...h.state,idx:b},""));function j(){return(h.state||{idx:null}).idx}function v(){g="POP";let k=j(),L=k==null?null:k-b;b=k,p&&p({action:g,location:_.location,delta:L})}function D(k,L){g="PUSH";let N=Wu(_.location,k,L);b=j()+1;let U=_h(N,b),M=_.createHref(N);try{h.pushState(U,"",M)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;m.location.assign(M)}u&&p&&p({action:g,location:_.location,delta:1})}function C(k,L){g="REPLACE";let N=Wu(_.location,k,L);b=j();let U=_h(N,b),M=_.createHref(N);h.replaceState(U,"",M),u&&p&&p({action:g,location:_.location,delta:0})}function z(k){return Hv(k)}let _={get action(){return g},get location(){return a(m,h)},listen(k){if(p)throw new Error("A history only accepts one active listener");return m.addEventListener(Oh,v),p=k,()=>{m.removeEventListener(Oh,v),p=null}},createHref(k){return r(m,k)},createURL:z,encodeLocation(k){let L=z(k);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:D,replace:C,go(k){return h.go(k)}};return _}function Hv(a,r=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),nt(i,"No window.location.(origin|href) available to create URL");let c=typeof a=="string"?a:Ur(a);return c=c.replace(/ $/,"%20"),!r&&c.startsWith("//")&&(c=i+c),new URL(c,i)}function ob(a,r,i="/"){return Pv(a,r,i,!1)}function Pv(a,r,i,c){let m=typeof r=="string"?Tn(r):r,u=fl(m.pathname||"/",i);if(u==null)return null;let h=cb(a);Yv(h);let g=null;for(let p=0;g==null&&p<h.length;++p){let b=ej(u);g=Iv(h[p],b,c)}return g}function cb(a,r=[],i=[],c="",m=!1){let u=(h,g,p=m,b)=>{let j={relativePath:b===void 0?h.path||"":b,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(c)&&p)return;nt(j.relativePath.startsWith(c),`Absolute route path "${j.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(c.length)}let v=xl([c,j.relativePath]),D=i.concat(j);h.children&&h.children.length>0&&(nt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),cb(h.children,r,D,v,p)),!(h.path==null&&!h.index)&&r.push({path:v,score:Kv(v,h.index),routesMeta:D})};return a.forEach((h,g)=>{if(h.path===""||!h.path?.includes("?"))u(h,g);else for(let p of db(h.path))u(h,g,!0,p)}),r}function db(a){let r=a.split("/");if(r.length===0)return[];let[i,...c]=r,m=i.endsWith("?"),u=i.replace(/\?$/,"");if(c.length===0)return m?[u,""]:[u];let h=db(c.join("/")),g=[];return g.push(...h.map(p=>p===""?u:[u,p].join("/"))),m&&g.push(...h),g.map(p=>a.startsWith("/")&&p===""?"/":p)}function Yv(a){a.sort((r,i)=>r.score!==i.score?i.score-r.score:Zv(r.routesMeta.map(c=>c.childrenIndex),i.routesMeta.map(c=>c.childrenIndex)))}var Gv=/^:[\w-]+$/,Jv=3,Vv=2,Xv=1,Qv=10,Fv=-2,Lh=a=>a==="*";function Kv(a,r){let i=a.split("/"),c=i.length;return i.some(Lh)&&(c+=Fv),r&&(c+=Vv),i.filter(m=>!Lh(m)).reduce((m,u)=>m+(Gv.test(u)?Jv:u===""?Xv:Qv),c)}function Zv(a,r){return a.length===r.length&&a.slice(0,-1).every((c,m)=>c===r[m])?a[a.length-1]-r[r.length-1]:0}function Iv(a,r,i=!1){let{routesMeta:c}=a,m={},u="/",h=[];for(let g=0;g<c.length;++g){let p=c[g],b=g===c.length-1,j=u==="/"?r:r.slice(u.length)||"/",v=Yo({path:p.relativePath,caseSensitive:p.caseSensitive,end:b},j),D=p.route;if(!v&&b&&i&&!c[c.length-1].route.index&&(v=Yo({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},j)),!v)return null;Object.assign(m,v.params),h.push({params:m,pathname:xl([u,v.pathname]),pathnameBase:aj(xl([u,v.pathnameBase])),route:D}),v.pathnameBase!=="/"&&(u=xl([u,v.pathnameBase]))}return h}function Yo(a,r){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[i,c]=Wv(a.path,a.caseSensitive,a.end),m=r.match(i);if(!m)return null;let u=m[0],h=u.replace(/(.)\/+$/,"$1"),g=m.slice(1);return{params:c.reduce((b,{paramName:j,isOptional:v},D)=>{if(j==="*"){let z=g[D]||"";h=u.slice(0,u.length-z.length).replace(/(.)\/+$/,"$1")}const C=g[D];return v&&!C?b[j]=void 0:b[j]=(C||"").replace(/%2F/g,"/"),b},{}),pathname:u,pathnameBase:h,pattern:a}}function Wv(a,r=!1,i=!0){Ns(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let c=[],m="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,p)=>(c.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(c.push({paramName:"*"}),m+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?m+="\\/*$":a!==""&&a!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,r?void 0:"i"),c]}function ej(a){try{return a.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Ns(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),a}}function fl(a,r){if(r==="/")return a;if(!a.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,c=a.charAt(i);return c&&c!=="/"?null:a.slice(i)||"/"}var tj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function sj(a,r="/"){let{pathname:i,search:c="",hash:m=""}=typeof a=="string"?Tn(a):a,u;return i?(i=i.replace(/\/\/+/g,"/"),i.startsWith("/")?u=Uh(i.substring(1),"/"):u=Uh(i,r)):u=r,{pathname:u,search:nj(c),hash:rj(m)}}function Uh(a,r){let i=r.replace(/\/+$/,"").split("/");return a.split("/").forEach(m=>{m===".."?i.length>1&&i.pop():m!=="."&&i.push(m)}),i.length>1?i.join("/"):"/"}function vu(a,r,i,c){return`Cannot include a '${a}' character in a manually specified \`to.${r}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lj(a){return a.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function mm(a){let r=lj(a);return r.map((i,c)=>c===r.length-1?i.pathname:i.pathnameBase)}function xm(a,r,i,c=!1){let m;typeof a=="string"?m=Tn(a):(m={...a},nt(!m.pathname||!m.pathname.includes("?"),vu("?","pathname","search",m)),nt(!m.pathname||!m.pathname.includes("#"),vu("#","pathname","hash",m)),nt(!m.search||!m.search.includes("#"),vu("#","search","hash",m)));let u=a===""||m.pathname==="",h=u?"/":m.pathname,g;if(h==null)g=i;else{let v=r.length-1;if(!c&&h.startsWith("..")){let D=h.split("/");for(;D[0]==="..";)D.shift(),v-=1;m.pathname=D.join("/")}g=v>=0?r[v]:"/"}let p=sj(m,g),b=h&&h!=="/"&&h.endsWith("/"),j=(u||h===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(b||j)&&(p.pathname+="/"),p}var xl=a=>a.join("/").replace(/\/\/+/g,"/"),aj=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),nj=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,rj=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,ij=class{constructor(a,r,i,c=!1){this.status=a,this.statusText=r||"",this.internal=c,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function oj(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function cj(a){return a.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ub=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mb(a,r){let i=a;if(typeof i!="string"||!tj.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let c=i,m=!1;if(ub)try{let u=new URL(window.location.href),h=i.startsWith("//")?new URL(u.protocol+i):new URL(i),g=fl(h.pathname,r);h.origin===u.origin&&g!=null?i=g+h.search+h.hash:m=!0}catch{Ns(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:c,isExternal:m,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xb=["POST","PUT","PATCH","DELETE"];new Set(xb);var dj=["GET",...xb];new Set(dj);var Dn=x.createContext(null);Dn.displayName="DataRouter";var Xo=x.createContext(null);Xo.displayName="DataRouterState";var uj=x.createContext(!1),fb=x.createContext({isTransitioning:!1});fb.displayName="ViewTransition";var mj=x.createContext(new Map);mj.displayName="Fetchers";var xj=x.createContext(null);xj.displayName="Await";var Zt=x.createContext(null);Zt.displayName="Navigation";var Hr=x.createContext(null);Hr.displayName="Location";var ws=x.createContext({outlet:null,matches:[],isDataRoute:!1});ws.displayName="Route";var fm=x.createContext(null);fm.displayName="RouteError";var hb="REACT_ROUTER_ERROR",fj="REDIRECT",hj="ROUTE_ERROR_RESPONSE";function pj(a){if(a.startsWith(`${hb}:${fj}:{`))try{let r=JSON.parse(a.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function bj(a){if(a.startsWith(`${hb}:${hj}:{`))try{let r=JSON.parse(a.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new ij(r.status,r.statusText,r.data)}catch{}}function gj(a,{relative:r}={}){nt(Rn(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:c}=x.useContext(Zt),{hash:m,pathname:u,search:h}=Pr(a,{relative:r}),g=u;return i!=="/"&&(g=u==="/"?i:xl([i,u])),c.createHref({pathname:g,search:h,hash:m})}function Rn(){return x.useContext(Hr)!=null}function bl(){return nt(Rn(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Hr).location}var pb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bb(a){x.useContext(Zt).static||x.useLayoutEffect(a)}function Ss(){let{isDataRoute:a}=x.useContext(ws);return a?Rj():yj()}function yj(){nt(Rn(),"useNavigate() may be used only in the context of a <Router> component.");let a=x.useContext(Dn),{basename:r,navigator:i}=x.useContext(Zt),{matches:c}=x.useContext(ws),{pathname:m}=bl(),u=JSON.stringify(mm(c)),h=x.useRef(!1);return bb(()=>{h.current=!0}),x.useCallback((p,b={})=>{if(Ns(h.current,pb),!h.current)return;if(typeof p=="number"){i.go(p);return}let j=xm(p,JSON.parse(u),m,b.relative==="path");a==null&&r!=="/"&&(j.pathname=j.pathname==="/"?r:xl([r,j.pathname])),(b.replace?i.replace:i.push)(j,b.state,b)},[r,i,u,m,a])}x.createContext(null);function gb(){let{matches:a}=x.useContext(ws),r=a[a.length-1];return r?r.params:{}}function Pr(a,{relative:r}={}){let{matches:i}=x.useContext(ws),{pathname:c}=bl(),m=JSON.stringify(mm(i));return x.useMemo(()=>xm(a,JSON.parse(m),c,r==="path"),[a,m,c,r])}function vj(a,r){return yb(a,r)}function yb(a,r,i,c,m){nt(Rn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=x.useContext(Zt),{matches:h}=x.useContext(ws),g=h[h.length-1],p=g?g.params:{},b=g?g.pathname:"/",j=g?g.pathnameBase:"/",v=g&&g.route;{let N=v&&v.path||"";jb(b,!v||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let D=bl(),C;if(r){let N=typeof r=="string"?Tn(r):r;nt(j==="/"||N.pathname?.startsWith(j),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${j}" but pathname "${N.pathname}" was given in the \`location\` prop.`),C=N}else C=D;let z=C.pathname||"/",_=z;if(j!=="/"){let N=j.replace(/^\//,"").split("/");_="/"+z.replace(/^\//,"").split("/").slice(N.length).join("/")}let k=ob(a,{pathname:_});Ns(v||k!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Ns(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=kj(k&&k.map(N=>Object.assign({},N,{params:Object.assign({},p,N.params),pathname:xl([j,u.encodeLocation?u.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?j:xl([j,u.encodeLocation?u.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),h,i,c,m);return r&&L?x.createElement(Hr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},L):L}function jj(){let a=Dj(),r=oj(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),i=a instanceof Error?a.stack:null,c="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:c},u={padding:"2px 4px",backgroundColor:c},h=null;return console.error("Error handled by React Router default ErrorBoundary:",a),h=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:u},"ErrorBoundary")," or"," ",x.createElement("code",{style:u},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},r),i?x.createElement("pre",{style:m},i):null,h)}var Nj=x.createElement(jj,null),vb=class extends x.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){this.props.onError?this.props.onError(a,r):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const i=bj(a.digest);i&&(a=i)}let r=a!==void 0?x.createElement(ws.Provider,{value:this.props.routeContext},x.createElement(fm.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?x.createElement(wj,{error:a},r):r}};vb.contextType=uj;var ju=new WeakMap;function wj({children:a,error:r}){let{basename:i}=x.useContext(Zt);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let c=pj(r.digest);if(c){let m=ju.get(r);if(m)throw m;let u=mb(c.location,i);if(ub&&!ju.get(r))if(u.isExternal||c.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:c.replace}));throw ju.set(r,h),h}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return a}function Sj({routeContext:a,match:r,children:i}){let c=x.useContext(Dn);return c&&c.static&&c.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(ws.Provider,{value:a},i)}function kj(a,r=[],i=null,c=null,m=null){if(a==null){if(!i)return null;if(i.errors)a=i.matches;else if(r.length===0&&!i.initialized&&i.matches.length>0)a=i.matches;else return null}let u=a,h=i?.errors;if(h!=null){let j=u.findIndex(v=>v.route.id&&h?.[v.route.id]!==void 0);nt(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,j+1))}let g=!1,p=-1;if(i)for(let j=0;j<u.length;j++){let v=u[j];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=j),v.route.id){let{loaderData:D,errors:C}=i,z=v.route.loader&&!D.hasOwnProperty(v.route.id)&&(!C||C[v.route.id]===void 0);if(v.route.lazy||z){g=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let b=i&&c?(j,v)=>{c(j,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:cj(i.matches),errorInfo:v})}:void 0;return u.reduceRight((j,v,D)=>{let C,z=!1,_=null,k=null;i&&(C=h&&v.route.id?h[v.route.id]:void 0,_=v.route.errorElement||Nj,g&&(p<0&&D===0?(jb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),z=!0,k=null):p===D&&(z=!0,k=v.route.hydrateFallbackElement||null)));let L=r.concat(u.slice(0,D+1)),N=()=>{let U;return C?U=_:z?U=k:v.route.Component?U=x.createElement(v.route.Component,null):v.route.element?U=v.route.element:U=j,x.createElement(Sj,{match:v,routeContext:{outlet:j,matches:L,isDataRoute:i!=null},children:U})};return i&&(v.route.ErrorBoundary||v.route.errorElement||D===0)?x.createElement(vb,{location:i.location,revalidation:i.revalidation,component:_,error:C,children:N(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:b}):N()},null)}function hm(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cj(a){let r=x.useContext(Dn);return nt(r,hm(a)),r}function Aj(a){let r=x.useContext(Xo);return nt(r,hm(a)),r}function Ej(a){let r=x.useContext(ws);return nt(r,hm(a)),r}function pm(a){let r=Ej(a),i=r.matches[r.matches.length-1];return nt(i.route.id,`${a} can only be used on routes that contain a unique "id"`),i.route.id}function Tj(){return pm("useRouteId")}function Dj(){let a=x.useContext(fm),r=Aj("useRouteError"),i=pm("useRouteError");return a!==void 0?a:r.errors?.[i]}function Rj(){let{router:a}=Cj("useNavigate"),r=pm("useNavigate"),i=x.useRef(!1);return bb(()=>{i.current=!0}),x.useCallback(async(m,u={})=>{Ns(i.current,pb),i.current&&(typeof m=="number"?await a.navigate(m):await a.navigate(m,{fromRouteId:r,...u}))},[a,r])}var zh={};function jb(a,r,i){!r&&!zh[a]&&(zh[a]=!0,Ns(!1,i))}x.memo(Mj);function Mj({routes:a,future:r,state:i,onError:c}){return yb(a,void 0,i,c,r)}function Sn({to:a,replace:r,state:i,relative:c}){nt(Rn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:m}=x.useContext(Zt);Ns(!m,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=x.useContext(ws),{pathname:h}=bl(),g=Ss(),p=xm(a,mm(u),h,c==="path"),b=JSON.stringify(p);return x.useEffect(()=>{g(JSON.parse(b),{replace:r,state:i,relative:c})},[g,b,c,r,i]),null}function qe(a){nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oj({basename:a="/",children:r=null,location:i,navigationType:c="POP",navigator:m,static:u=!1,unstable_useTransitions:h}){nt(!Rn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=a.replace(/^\/*/,"/"),p=x.useMemo(()=>({basename:g,navigator:m,static:u,unstable_useTransitions:h,future:{}}),[g,m,u,h]);typeof i=="string"&&(i=Tn(i));let{pathname:b="/",search:j="",hash:v="",state:D=null,key:C="default"}=i,z=x.useMemo(()=>{let _=fl(b,g);return _==null?null:{location:{pathname:_,search:j,hash:v,state:D,key:C},navigationType:c}},[g,b,j,v,D,C,c]);return Ns(z!=null,`<Router basename="${g}"> is not able to match the URL "${b}${j}${v}" because it does not start with the basename, so the <Router> won't render anything.`),z==null?null:x.createElement(Zt.Provider,{value:p},x.createElement(Hr.Provider,{children:r,value:z}))}function _j({children:a,location:r}){return vj(em(a),r)}function em(a,r=[]){let i=[];return x.Children.forEach(a,(c,m)=>{if(!x.isValidElement(c))return;let u=[...r,m];if(c.type===x.Fragment){i.push.apply(i,em(c.props.children,u));return}nt(c.type===qe,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nt(!c.props.index||!c.props.children,"An index route cannot have child routes.");let h={id:c.props.id||u.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,middleware:c.props.middleware,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(h.children=em(c.props.children,u)),i.push(h)}),i}var Uo="get",zo="application/x-www-form-urlencoded";function Qo(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function Lj(a){return Qo(a)&&a.tagName.toLowerCase()==="button"}function Uj(a){return Qo(a)&&a.tagName.toLowerCase()==="form"}function zj(a){return Qo(a)&&a.tagName.toLowerCase()==="input"}function Bj(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function $j(a,r){return a.button===0&&(!r||r==="_self")&&!Bj(a)}var vo=null;function qj(){if(vo===null)try{new FormData(document.createElement("form"),0),vo=!1}catch{vo=!0}return vo}var Hj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Nu(a){return a!=null&&!Hj.has(a)?(Ns(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zo}"`),null):a}function Pj(a,r){let i,c,m,u,h;if(Uj(a)){let g=a.getAttribute("action");c=g?fl(g,r):null,i=a.getAttribute("method")||Uo,m=Nu(a.getAttribute("enctype"))||zo,u=new FormData(a)}else if(Lj(a)||zj(a)&&(a.type==="submit"||a.type==="image")){let g=a.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=a.getAttribute("formaction")||g.getAttribute("action");if(c=p?fl(p,r):null,i=a.getAttribute("formmethod")||g.getAttribute("method")||Uo,m=Nu(a.getAttribute("formenctype"))||Nu(g.getAttribute("enctype"))||zo,u=new FormData(g,a),!qj()){let{name:b,type:j,value:v}=a;if(j==="image"){let D=b?`${b}.`:"";u.append(`${D}x`,"0"),u.append(`${D}y`,"0")}else b&&u.append(b,v)}}else{if(Qo(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Uo,c=null,m=zo,h=a}return u&&m==="text/plain"&&(h=u,u=void 0),{action:c,method:i.toLowerCase(),encType:m,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bm(a,r){if(a===!1||a===null||typeof a>"u")throw new Error(r)}function Yj(a,r,i,c){let m=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return i?m.pathname.endsWith("/")?m.pathname=`${m.pathname}_.${c}`:m.pathname=`${m.pathname}.${c}`:m.pathname==="/"?m.pathname=`_root.${c}`:r&&fl(m.pathname,r)==="/"?m.pathname=`${r.replace(/\/$/,"")}/_root.${c}`:m.pathname=`${m.pathname.replace(/\/$/,"")}.${c}`,m}async function Gj(a,r){if(a.id in r)return r[a.id];try{let i=await import(a.module);return r[a.id]=i,i}catch(i){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jj(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function Vj(a,r,i){let c=await Promise.all(a.map(async m=>{let u=r.routes[m.route.id];if(u){let h=await Gj(u,i);return h.links?h.links():[]}return[]}));return Kj(c.flat(1).filter(Jj).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function Bh(a,r,i,c,m,u){let h=(p,b)=>i[b]?p.route.id!==i[b].route.id:!0,g=(p,b)=>i[b].pathname!==p.pathname||i[b].route.path?.endsWith("*")&&i[b].params["*"]!==p.params["*"];return u==="assets"?r.filter((p,b)=>h(p,b)||g(p,b)):u==="data"?r.filter((p,b)=>{let j=c.routes[p.route.id];if(!j||!j.hasLoader)return!1;if(h(p,b)||g(p,b))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Xj(a,r,{includeHydrateFallback:i}={}){return Qj(a.map(c=>{let m=r.routes[c.route.id];if(!m)return[];let u=[m.module];return m.clientActionModule&&(u=u.concat(m.clientActionModule)),m.clientLoaderModule&&(u=u.concat(m.clientLoaderModule)),i&&m.hydrateFallbackModule&&(u=u.concat(m.hydrateFallbackModule)),m.imports&&(u=u.concat(m.imports)),u}).flat(1))}function Qj(a){return[...new Set(a)]}function Fj(a){let r={},i=Object.keys(a).sort();for(let c of i)r[c]=a[c];return r}function Kj(a,r){let i=new Set;return new Set(r),a.reduce((c,m)=>{let u=JSON.stringify(Fj(m));return i.has(u)||(i.add(u),c.push({key:u,link:m})),c},[])}function Nb(){let a=x.useContext(Dn);return bm(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function Zj(){let a=x.useContext(Xo);return bm(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var gm=x.createContext(void 0);gm.displayName="FrameworkContext";function wb(){let a=x.useContext(gm);return bm(a,"You must render this element inside a <HydratedRouter> element"),a}function Ij(a,r){let i=x.useContext(gm),[c,m]=x.useState(!1),[u,h]=x.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:b,onMouseLeave:j,onTouchStart:v}=r,D=x.useRef(null);x.useEffect(()=>{if(a==="render"&&h(!0),a==="viewport"){let _=L=>{L.forEach(N=>{h(N.isIntersecting)})},k=new IntersectionObserver(_,{threshold:.5});return D.current&&k.observe(D.current),()=>{k.disconnect()}}},[a]),x.useEffect(()=>{if(c){let _=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(_)}}},[c]);let C=()=>{m(!0)},z=()=>{m(!1),h(!1)};return i?a!=="intent"?[u,D,{}]:[u,D,{onFocus:Tr(g,C),onBlur:Tr(p,z),onMouseEnter:Tr(b,C),onMouseLeave:Tr(j,z),onTouchStart:Tr(v,C)}]:[!1,D,{}]}function Tr(a,r){return i=>{a&&a(i),i.defaultPrevented||r(i)}}function Wj({page:a,...r}){let{router:i}=Nb(),c=x.useMemo(()=>ob(i.routes,a,i.basename),[i.routes,a,i.basename]);return c?x.createElement(tN,{page:a,matches:c,...r}):null}function eN(a){let{manifest:r,routeModules:i}=wb(),[c,m]=x.useState([]);return x.useEffect(()=>{let u=!1;return Vj(a,r,i).then(h=>{u||m(h)}),()=>{u=!0}},[a,r,i]),c}function tN({page:a,matches:r,...i}){let c=bl(),{future:m,manifest:u,routeModules:h}=wb(),{basename:g}=Nb(),{loaderData:p,matches:b}=Zj(),j=x.useMemo(()=>Bh(a,r,b,u,c,"data"),[a,r,b,u,c]),v=x.useMemo(()=>Bh(a,r,b,u,c,"assets"),[a,r,b,u,c]),D=x.useMemo(()=>{if(a===c.pathname+c.search+c.hash)return[];let _=new Set,k=!1;if(r.forEach(N=>{let U=u.routes[N.route.id];!U||!U.hasLoader||(!j.some(M=>M.route.id===N.route.id)&&N.route.id in p&&h[N.route.id]?.shouldRevalidate||U.hasClientLoader?k=!0:_.add(N.route.id))}),_.size===0)return[];let L=Yj(a,g,m.unstable_trailingSlashAwareDataRequests,"data");return k&&_.size>0&&L.searchParams.set("_routes",r.filter(N=>_.has(N.route.id)).map(N=>N.route.id).join(",")),[L.pathname+L.search]},[g,m.unstable_trailingSlashAwareDataRequests,p,c,u,j,r,a,h]),C=x.useMemo(()=>Xj(v,u),[v,u]),z=eN(v);return x.createElement(x.Fragment,null,D.map(_=>x.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...i})),C.map(_=>x.createElement("link",{key:_,rel:"modulepreload",href:_,...i})),z.map(({key:_,link:k})=>x.createElement("link",{key:_,nonce:i.nonce,...k,crossOrigin:k.crossOrigin??i.crossOrigin})))}function sN(...a){return r=>{a.forEach(i=>{typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var lN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lN&&(window.__reactRouterVersion="7.13.0")}catch{}function aN({basename:a,children:r,unstable_useTransitions:i,window:c}){let m=x.useRef();m.current==null&&(m.current=Bv({window:c,v5Compat:!0}));let u=m.current,[h,g]=x.useState({action:u.action,location:u.location}),p=x.useCallback(b=>{i===!1?g(b):x.startTransition(()=>g(b))},[i]);return x.useLayoutEffect(()=>u.listen(p),[u,p]),x.createElement(Oj,{basename:a,children:r,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:i})}var Sb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fo=x.forwardRef(function({onClick:r,discover:i="render",prefetch:c="none",relative:m,reloadDocument:u,replace:h,state:g,target:p,to:b,preventScrollReset:j,viewTransition:v,unstable_defaultShouldRevalidate:D,...C},z){let{basename:_,unstable_useTransitions:k}=x.useContext(Zt),L=typeof b=="string"&&Sb.test(b),N=mb(b,_);b=N.to;let U=gj(b,{relative:m}),[M,J,te]=Ij(c,C),q=iN(b,{replace:h,state:g,target:p,preventScrollReset:j,relative:m,viewTransition:v,unstable_defaultShouldRevalidate:D,unstable_useTransitions:k});function Y(T){r&&r(T),T.defaultPrevented||q(T)}let I=x.createElement("a",{...C,...te,href:N.absoluteURL||U,onClick:N.isExternal||u?r:Y,ref:sN(z,J),target:p,"data-discover":!L&&i==="render"?"true":void 0});return M&&!L?x.createElement(x.Fragment,null,I,x.createElement(Wj,{page:U})):I});Fo.displayName="Link";var st=x.forwardRef(function({"aria-current":r="page",caseSensitive:i=!1,className:c="",end:m=!1,style:u,to:h,viewTransition:g,children:p,...b},j){let v=Pr(h,{relative:b.relative}),D=bl(),C=x.useContext(Xo),{navigator:z,basename:_}=x.useContext(Zt),k=C!=null&&mN(v)&&g===!0,L=z.encodeLocation?z.encodeLocation(v).pathname:v.pathname,N=D.pathname,U=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;i||(N=N.toLowerCase(),U=U?U.toLowerCase():null,L=L.toLowerCase()),U&&_&&(U=fl(U,_)||U);const M=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let J=N===L||!m&&N.startsWith(L)&&N.charAt(M)==="/",te=U!=null&&(U===L||!m&&U.startsWith(L)&&U.charAt(L.length)==="/"),q={isActive:J,isPending:te,isTransitioning:k},Y=J?r:void 0,I;typeof c=="function"?I=c(q):I=[c,J?"active":null,te?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let T=typeof u=="function"?u(q):u;return x.createElement(Fo,{...b,"aria-current":Y,className:I,ref:j,style:T,to:h,viewTransition:g},typeof p=="function"?p(q):p)});st.displayName="NavLink";var nN=x.forwardRef(({discover:a="render",fetcherKey:r,navigate:i,reloadDocument:c,replace:m,state:u,method:h=Uo,action:g,onSubmit:p,relative:b,preventScrollReset:j,viewTransition:v,unstable_defaultShouldRevalidate:D,...C},z)=>{let{unstable_useTransitions:_}=x.useContext(Zt),k=dN(),L=uN(g,{relative:b}),N=h.toLowerCase()==="get"?"get":"post",U=typeof g=="string"&&Sb.test(g),M=J=>{if(p&&p(J),J.defaultPrevented)return;J.preventDefault();let te=J.nativeEvent.submitter,q=te?.getAttribute("formmethod")||h,Y=()=>k(te||J.currentTarget,{fetcherKey:r,method:q,navigate:i,replace:m,state:u,relative:b,preventScrollReset:j,viewTransition:v,unstable_defaultShouldRevalidate:D});_&&i!==!1?x.startTransition(()=>Y()):Y()};return x.createElement("form",{ref:z,method:N,action:L,onSubmit:c?p:M,...C,"data-discover":!U&&a==="render"?"true":void 0})});nN.displayName="Form";function rN(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kb(a){let r=x.useContext(Dn);return nt(r,rN(a)),r}function iN(a,{target:r,replace:i,state:c,preventScrollReset:m,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:p}={}){let b=Ss(),j=bl(),v=Pr(a,{relative:u});return x.useCallback(D=>{if($j(D,r)){D.preventDefault();let C=i!==void 0?i:Ur(j)===Ur(v),z=()=>b(a,{replace:C,state:c,preventScrollReset:m,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:g});p?x.startTransition(()=>z()):z()}},[j,b,v,i,c,r,a,m,u,h,g,p])}var oN=0,cN=()=>`__${String(++oN)}__`;function dN(){let{router:a}=kb("useSubmit"),{basename:r}=x.useContext(Zt),i=Tj(),c=a.fetch,m=a.navigate;return x.useCallback(async(u,h={})=>{let{action:g,method:p,encType:b,formData:j,body:v}=Pj(u,r);if(h.navigate===!1){let D=h.fetcherKey||cN();await c(D,i,h.action||g,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:j,body:v,formMethod:h.method||p,formEncType:h.encType||b,flushSync:h.flushSync})}else await m(h.action||g,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:j,body:v,formMethod:h.method||p,formEncType:h.encType||b,replace:h.replace,state:h.state,fromRouteId:i,flushSync:h.flushSync,viewTransition:h.viewTransition})},[c,m,r,i])}function uN(a,{relative:r}={}){let{basename:i}=x.useContext(Zt),c=x.useContext(ws);nt(c,"useFormAction must be used inside a RouteContext");let[m]=c.matches.slice(-1),u={...Pr(a||".",{relative:r})},h=bl();if(a==null){u.search=h.search;let g=new URLSearchParams(u.search),p=g.getAll("index");if(p.some(j=>j==="")){g.delete("index"),p.filter(v=>v).forEach(v=>g.append("index",v));let j=g.toString();u.search=j?`?${j}`:""}}return(!a||a===".")&&m.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:xl([i,u.pathname])),Ur(u)}function mN(a,{relative:r}={}){let i=x.useContext(fb);nt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=kb("useViewTransitionState"),m=Pr(a,{relative:r});if(!i.isTransitioning)return!1;let u=fl(i.currentLocation.pathname,c)||i.currentLocation.pathname,h=fl(i.nextLocation.pathname,c)||i.nextLocation.pathname;return Yo(m.pathname,h)!=null||Yo(m.pathname,u)!=null}const Ko="/assets/logo-BEZYUMiH.png";function xN(a){return a==="payroll_manager"||a==="admin"?"/pm/dashboard":"/dashboard"}function fN(){const a=Ss(),[r,i]=x.useState("employee@test.com"),[c,m]=x.useState("Pass1234"),[u,h]=x.useState(""),[g,p]=x.useState(!1);async function b(j){j.preventDefault(),h(""),p(!0);try{const v=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:c})}),D=await v.json().catch(()=>({}));if(!v.ok){h(D.message||`Login failed (${v.status})`);return}localStorage.setItem("token",D.token),localStorage.setItem("user",JSON.stringify(D.user)),a(xN(D?.user?.role),{replace:!0})}catch(v){h(`Network error: ${v.message}`)}finally{p(!1)}}return t.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center px-4",children:t.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white/5 backdrop-blur border border-white/10 shadow-xl p-6",children:[t.jsxs("div",{className:"mb-1 flex flex-col items-center text-center",children:[t.jsx("img",{src:Ko,alt:"Smart Payroll",className:"h-50 w-50 rounded-2xl object-contain mb-1 drop-shadow-lg"}),t.jsx("p",{className:"text-sm text-white/60",children:"Sign in to view your payslips"})]}),t.jsxs("form",{onSubmit:b,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-white/70",children:"Email"}),t.jsx("input",{className:"mt-1 w-full rounded-xl bg-white/10 border border-white/10 px-4 py-3 text-white outline-none focus:ring-2 focus:ring-indigo-400",value:r,onChange:j=>i(j.target.value),placeholder:"you@company.com",autoComplete:"email"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-white/70",children:"Password"}),t.jsx("input",{className:"mt-1 w-full rounded-xl bg-white/10 border border-white/10 px-4 py-3 text-white outline-none focus:ring-2 focus:ring-indigo-400",value:c,onChange:j=>m(j.target.value),placeholder:"",type:"password",autoComplete:"current-password"})]}),u?t.jsx("div",{className:"rounded-xl bg-red-500/10 border border-red-500/20 px-4 py-3 text-sm text-red-200",children:u}):null,t.jsx("button",{type:"submit",disabled:g,className:"w-full rounded-xl bg-indigo-500 hover:bg-indigo-600 transition text-white font-semibold py-3 disabled:opacity-60",children:g?"Signing in...":"Sign in"}),t.jsx("div",{className:"text-xs text-white/40 text-center",children:"Demo credentials are prefilled for testing."})]})]})})}const hN="http://localhost:5000",pN="https://www.gstatic.com/generate_204";function $h(a,r={},i=2500){const c=new AbortController,m=setTimeout(()=>c.abort(),i);return fetch(a,{...r,signal:c.signal}).finally(()=>clearTimeout(m))}function bN(){const[a,r]=x.useState(!1),i=x.useRef(null);async function c(){try{return await $h(`${pN}?t=${Date.now()}`,{mode:"no-cors",cache:"no-store"},2500),!0}catch{return!1}}async function m(){try{const h=await $h(`${hN}/ping?t=${Date.now()}`,{cache:"no-store"},2500);return!!h&&h.ok}catch{return!1}}async function u(){if(typeof navigator<"u"&&navigator.onLine===!1){r(!0);return}const[h,g]=await Promise.all([c(),m()]);r(!h||!g)}return x.useEffect(()=>{u();const h=()=>u();return window.addEventListener("focus",h),i.current=setInterval(u,4e3),()=>{window.removeEventListener("focus",h),i.current&&clearInterval(i.current)}},[]),a?t.jsx("div",{className:"fixed top-2 left-1/2 z-[99999] -translate-x-1/2",children:t.jsx("div",{className:"rounded-full border border-amber-200 bg-amber-50 px-4 py-2 text-amber-900 shadow-sm",children:t.jsx("div",{className:"text-xs font-semibold leading-none",children:"Youre offline."})})}):null}const tm=(a,r)=>r.some(i=>a instanceof i);let qh,Hh;function gN(){return qh||(qh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yN(){return Hh||(Hh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sm=new WeakMap,wu=new WeakMap,Zo=new WeakMap;function vN(a){const r=new Promise((i,c)=>{const m=()=>{a.removeEventListener("success",u),a.removeEventListener("error",h)},u=()=>{i(Oa(a.result)),m()},h=()=>{c(a.error),m()};a.addEventListener("success",u),a.addEventListener("error",h)});return Zo.set(r,a),r}function jN(a){if(sm.has(a))return;const r=new Promise((i,c)=>{const m=()=>{a.removeEventListener("complete",u),a.removeEventListener("error",h),a.removeEventListener("abort",h)},u=()=>{i(),m()},h=()=>{c(a.error||new DOMException("AbortError","AbortError")),m()};a.addEventListener("complete",u),a.addEventListener("error",h),a.addEventListener("abort",h)});sm.set(a,r)}let lm={get(a,r,i){if(a instanceof IDBTransaction){if(r==="done")return sm.get(a);if(r==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Oa(a[r])},set(a,r,i){return a[r]=i,!0},has(a,r){return a instanceof IDBTransaction&&(r==="done"||r==="store")?!0:r in a}};function Cb(a){lm=a(lm)}function NN(a){return yN().includes(a)?function(...r){return a.apply(am(this),r),Oa(this.request)}:function(...r){return Oa(a.apply(am(this),r))}}function wN(a){return typeof a=="function"?NN(a):(a instanceof IDBTransaction&&jN(a),tm(a,gN())?new Proxy(a,lm):a)}function Oa(a){if(a instanceof IDBRequest)return vN(a);if(wu.has(a))return wu.get(a);const r=wN(a);return r!==a&&(wu.set(a,r),Zo.set(r,a)),r}const am=a=>Zo.get(a);function Ab(a,r,{blocked:i,upgrade:c,blocking:m,terminated:u}={}){const h=indexedDB.open(a,r),g=Oa(h);return c&&h.addEventListener("upgradeneeded",p=>{c(Oa(h.result),p.oldVersion,p.newVersion,Oa(h.transaction),p)}),i&&h.addEventListener("blocked",p=>i(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),m&&p.addEventListener("versionchange",b=>m(b.oldVersion,b.newVersion,b))}).catch(()=>{}),g}const SN=["get","getKey","getAll","getAllKeys","count"],kN=["put","add","delete","clear"],Su=new Map;function Ph(a,r){if(!(a instanceof IDBDatabase&&!(r in a)&&typeof r=="string"))return;if(Su.get(r))return Su.get(r);const i=r.replace(/FromIndex$/,""),c=r!==i,m=kN.includes(i);if(!(i in(c?IDBIndex:IDBObjectStore).prototype)||!(m||SN.includes(i)))return;const u=async function(h,...g){const p=this.transaction(h,m?"readwrite":"readonly");let b=p.store;return c&&(b=b.index(g.shift())),(await Promise.all([b[i](...g),m&&p.done]))[0]};return Su.set(r,u),u}Cb(a=>({...a,get:(r,i,c)=>Ph(r,i)||a.get(r,i,c),has:(r,i)=>!!Ph(r,i)||a.has(r,i)}));const CN=["continue","continuePrimaryKey","advance"],Yh={},nm=new WeakMap,Eb=new WeakMap,AN={get(a,r){if(!CN.includes(r))return a[r];let i=Yh[r];return i||(i=Yh[r]=function(...c){nm.set(this,Eb.get(this)[r](...c))}),i}};async function*EN(...a){let r=this;if(r instanceof IDBCursor||(r=await r.openCursor(...a)),!r)return;r=r;const i=new Proxy(r,AN);for(Eb.set(i,r),Zo.set(i,am(r));r;)yield i,r=await(nm.get(i)||r.continue()),nm.delete(i)}function Gh(a,r){return r===Symbol.asyncIterator&&tm(a,[IDBIndex,IDBObjectStore,IDBCursor])||r==="iterate"&&tm(a,[IDBIndex,IDBObjectStore])}Cb(a=>({...a,get(r,i,c){return Gh(r,i)?EN:a.get(r,i,c)},has(r,i){return Gh(r,i)||a.has(r,i)}}));const TN="autopay_offline_v2",Go="snapshots",DN=1,Tb=Ab(TN,DN,{upgrade(a){a.objectStoreNames.contains(Go)||a.createObjectStore(Go),a.objectStoreNames.contains("queue")||a.createObjectStore("queue",{keyPath:"id",autoIncrement:!0})}});function Db(a){return typeof a=="string"&&a.trim().length>0}async function Fl(a,r){if(!Db(a))return;await(await Tb).put(Go,{value:r,savedAt:Date.now()},a)}async function La(a){if(!Db(a))return null;const i=await(await Tb).get(Go,a);return i?i.value:null}const Rb="outbox:index:v1";function RN(){return`${Date.now()}_${Math.random().toString(16).slice(2)}`}async function ym(){const a=await La(Rb);return Array.isArray(a)?a:[]}async function Mb(a){await Fl(Rb,a)}async function hl(a){const r=RN(),i={id:r,createdAt:Date.now(),tries:0,...a};await Fl(`outbox:item:${r}`,i);const c=await ym();c.push(r),await Mb(c);try{window.dispatchEvent(new CustomEvent("outbox:queued",{detail:{module:a.module||"",id:r}}))}catch{}return i}async function Ob(){const a=await ym(),r=[];for(const i of a){const c=await La(`outbox:item:${i}`);c&&r.push(c)}return r.sort((i,c)=>(i.createdAt||0)-(c.createdAt||0)),r}async function Jh(a){const i=(await ym()).filter(c=>c!==a);await Mb(i)}function MN(a){if(!a.bodyType||a.bodyType==="raw")return a.body||void 0;if(a.bodyType==="form"){const r=new FormData,i=a.fields||{};for(const[m,u]of Object.entries(i))u!=null&&r.append(m,String(u));const c=Array.isArray(a.files)?a.files:[];for(const m of c)r.append("files",m,m?.name||m?.originalName||"upload");return r}return a.body||void 0}function ON(a){const r={...a.headers||{}};return a.bodyType==="form"&&(delete r["Content-Type"],delete r["content-type"]),r}async function _N({max:a=25}={}){const i=(await Ob()).slice(0,a);let c=0;const m=new Set;for(const u of i){if(!navigator.onLine)break;try{const h=await fetch(u.url,{method:u.method,headers:ON(u),body:MN(u)});if(h.status>=400&&h.status<500){await Jh(u.id),c++,u.module&&m.add(u.module);continue}if(h.ok){await Jh(u.id),c++,u.module&&m.add(u.module);continue}break}catch{break}}if(c>0&&typeof window<"u"){const u=Array.from(m);window.dispatchEvent(new CustomEvent("outbox:flushed",{detail:{flushed:c,modules:u}}));for(const h of u)window.dispatchEvent(new CustomEvent(`outbox:flushed:${h}`,{detail:{flushed:c}}))}return{flushed:c}}const Mn="http://localhost:5000/api/support";function us(){const a=localStorage.getItem("token")||"";return a?{Authorization:`Bearer ${a}`}:{}}async function On(a){const r=await a.json().catch(()=>({}));if(!a.ok)throw new Error(r.message||"Request failed");return r}async function _b(a,r){try{await Fl(a,r)}catch{}}async function Lb(a){try{return await La(a)}catch{return null}}function LN({q:a="",type:r="",status:i=""}={}){return`support_tickets:${a||"-"}:${r||"-"}:${i||"-"}`}async function _n({q:a="",type:r="",status:i=""}={}){const c=new URL(`${Mn}/tickets`);a&&c.searchParams.set("q",a),r&&c.searchParams.set("type",r),i&&c.searchParams.set("status",i);const m=LN({q:a,type:r,status:i});try{const u=await fetch(c.toString(),{headers:us()}),h=await On(u);return await _b(m,h),h}catch(u){const h=await Lb(m);if(h)return h;throw u}}async function rm(a){const r=`support_ticket:${a}`;try{const i=await fetch(`${Mn}/tickets/${a}`,{headers:us()}),c=await On(i);return await _b(r,c),c}catch(i){const c=await Lb(r);if(c)return c;throw i}}async function UN(a,r){const i=await fetch(`${Mn}/tickets/${a}`,{method:"PATCH",headers:{...us(),"Content-Type":"application/json"},body:JSON.stringify(r)});return On(i)}async function Ub(a){const{type:r,title:i,description:c,priority:m,dueDate:u,files:h=[]}=a,g={type:r,title:i,description:c||"",priority:m||"low",dueDate:u||""},p=`${Mn}/tickets`;if(!navigator.onLine)return{queued:!0,queueId:(await hl({module:"support",url:p,method:"POST",headers:us(),bodyType:"form",fields:g,files:h})).id};const b=new FormData;Object.entries(g).forEach(([j,v])=>{v==null||v===""||b.append(j,String(v))});for(const j of h)b.append("files",j);try{const j=await fetch(p,{method:"POST",headers:us(),body:b});return await On(j)}catch{return{queued:!0,queueId:(await hl({module:"support",url:p,method:"POST",headers:us(),bodyType:"form",fields:g,files:h})).id}}}async function zb(a,{text:r="",files:i=[]}){const c=`${Mn}/tickets/${a}/messages`,m={text:r};if(!navigator.onLine)return{queued:!0,queueId:(await hl({module:"support",url:c,method:"POST",headers:us(),bodyType:"form",fields:m,files:i})).id};const u=new FormData;u.append("text",r||"");for(const h of i)u.append("files",h);try{const h=await fetch(c,{method:"POST",headers:us(),body:u});return await On(h)}catch{return{queued:!0,queueId:(await hl({module:"support",url:c,method:"POST",headers:us(),bodyType:"form",fields:m,files:i})).id}}}async function zN(a){const r=`${Mn}/tickets/${a}`;if(!navigator.onLine)return{queued:!0,queueId:(await hl({module:"support",url:r,method:"DELETE",headers:us(),bodyType:"raw",body:null})).id};try{const i=await fetch(r,{method:"DELETE",headers:us()});return await On(i)}catch{return{queued:!0,queueId:(await hl({module:"support",url:r,method:"DELETE",headers:us(),bodyType:"raw",body:null})).id}}}async function Ln(a,r,i){const c=typeof a=="string"?{url:a,headers:r||{},cacheKey:i}:a||{},{url:m,headers:u={},cacheKey:h}=c;if(!m)throw new Error("offlineGetJson: url is required");if(!h)throw new Error("offlineGetJson: cacheKey is required");try{const g=await fetch(m,{headers:u}),p=await g.json().catch(()=>({}));if(!g.ok)throw new Error(p?.message||"Request failed");return await Fl(h,p),p}catch(g){const p=await La(h);if(p)return p;throw g}}const BN="autopay_offline_v2",ml="queue",$N=1,vm=Ab(BN,$N,{upgrade(a){a.objectStoreNames.contains(ml)||a.createObjectStore(ml,{keyPath:"id",autoIncrement:!0}),a.objectStoreNames.contains("snapshots")||a.createObjectStore("snapshots")}});function Vh(){return typeof navigator<"u"?navigator.onLine:!0}function qN(a){if(a==null)return{bodyType:"none",bodyData:null};if(typeof a=="object"&&!(a instanceof FormData)&&!(a instanceof Blob))return{bodyType:"json",bodyData:a};if(a instanceof FormData){const r=[];for(const[i,c]of a.entries())r.push([i,c]);return{bodyType:"formdata",bodyData:r}}return typeof a=="string"?{bodyType:"text",bodyData:a}:{bodyType:"unknown",bodyData:null}}function HN(a){const{bodyType:r,bodyData:i}=a||{};if(r==="none")return null;if(r==="json")return JSON.stringify(i||{});if(r==="text")return String(i??"");if(r==="formdata"){const c=new FormData;for(const[m,u]of i||[])c.append(m,u);return c}return null}function PN(a){const r={...a||{}};for(const i of Object.keys(r))(r[i]==null||r[i]==="")&&delete r[i];return r}function YN(a){return a==="json"||a==="text"||a==="formdata"}async function An({url:a,method:r="POST",headers:i={},body:c=null,tag:m=""}){const u=await vm,{bodyType:h,bodyData:g}=qN(c),p={url:a,method:r,headers:PN(i),bodyType:h,bodyData:g,tag:m,createdAt:Date.now(),attempts:0,lastError:""},b=await u.add(ml,p);try{window.dispatchEvent(new CustomEvent("outbox:queued",{detail:{tag:m,id:b}}))}catch{}return b}async function GN(){return await(await vm).getAll(ml)}async function JN({max:a=50}={}){if(!Vh())return{synced:0,remaining:0};const r=await vm,i=await r.getAll(ml);i.sort((u,h)=>(u.id||0)-(h.id||0));let c=0;for(const u of i.slice(0,a)){if(!Vh())break;try{const h=HN(u),g={...u.headers||{}};u.bodyType==="json"&&(g["Content-Type"]="application/json"),u.bodyType==="formdata"&&"Content-Type"in g&&delete g["Content-Type"];const p=await fetch(u.url,{method:u.method,headers:g,body:YN(u.bodyType)?h:void 0});if(!p.ok){const b=await p.text().catch(()=>"");u.attempts=(u.attempts||0)+1,u.lastError=`HTTP ${p.status} ${b}`.slice(0,500),await r.put(ml,u);continue}await r.delete(ml,u.id),c++}catch(h){u.attempts=(u.attempts||0)+1,u.lastError=String(h?.message||h).slice(0,500),await r.put(ml,u);break}}const m=(await r.getAllKeys(ml)).length;if(c>0){const u=Array.from(new Set(i.slice(0,a).map(h=>String(h.tag||"").split(":")[0]).filter(Boolean)));try{window.dispatchEvent(new CustomEvent("outbox:flushed",{detail:{modules:u}}))}catch{}}return{synced:c,remaining:m}}const Un="http://localhost:5000/api/leave";function ms(a=!0){const r=localStorage.getItem("token")||"",i={};return a&&(i["Content-Type"]="application/json"),r&&(i.Authorization=`Bearer ${r}`),i}async function jm(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok){const c=i?.message||`Request failed (${a.status})`;throw new Error(c)}return i}async function Bb(){return Ln(`${Un}/mine`,ms(!1),"leave:mine")}async function VN(){return Ln(`${Un}/balance`,ms(!1),"leave:balance")}async function XN(a){const r=`${Un}`;if(!navigator.onLine)return{queued:!0,queueId:await An({url:r,method:"POST",headers:ms(!0),body:a,tag:"leave:create"})};try{const i=await fetch(r,{method:"POST",headers:ms(!0),body:JSON.stringify(a)});return await jm(i)}catch{return{queued:!0,queueId:await An({url:r,method:"POST",headers:ms(!0),body:a,tag:"leave:create"})}}}async function QN(a){const r=`${Un}/${a}`;if(!navigator.onLine)return{queued:!0,queueId:await An({url:r,method:"DELETE",headers:ms(!1),body:null,tag:"leave:delete"})};try{const i=await fetch(r,{method:"DELETE",headers:ms(!1)});return await jm(i)}catch{return{queued:!0,queueId:await An({url:r,method:"DELETE",headers:ms(!1),body:null,tag:"leave:delete"})}}}async function Nm({status:a="inprogress"}={}){const r=new URLSearchParams;return a&&r.set("status",a),Ln(`${Un}/approvals?${r.toString()}`,ms(!1),`leave:approvals:${a}`)}async function FN(a,{status:r,note:i=""}){const c=`${Un}/${a}/decision`,m={status:r,note:i};if(!navigator.onLine)return{queued:!0,queueId:await An({url:c,method:"PATCH",headers:ms(!0),body:m,tag:"leave:decision"})};try{const u=await fetch(c,{method:"PATCH",headers:ms(!0),body:JSON.stringify(m)});return await jm(u)}catch{return{queued:!0,queueId:await An({url:c,method:"PATCH",headers:ms(!0),body:m,tag:"leave:decision"})}}}const gl="http://localhost:5000/api/overtime";function yl(a=!0){const r=localStorage.getItem("token")||"",i={};return a&&(i["Content-Type"]="application/json"),r&&(i.Authorization=`Bearer ${r}`),i}async function wm(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok){const c=i?.message||`Request failed (${a.status})`;throw new Error(c)}return i}async function zr(a,r){try{return await La(a)??r}catch{return r}}async function Br(a,r){try{await Fl(a,r)}catch{}}function Io(a){return`overtime:mine:${a||"all"}`}function Sm(a){return`overtime:summary:${a||"all"}`}function KN(){return`local_${Date.now()}_${Math.random().toString(16).slice(2)}`}async function km(a){const r=a?`?month=${encodeURIComponent(a)}`:"",i=`${gl}/mine${r}`,c=Io(a);return Ln(i,yl(!1),c)}async function $b(a){const r=a?`?month=${encodeURIComponent(a)}`:"",i=`${gl}/summary${r}`,c=Sm(a);return Ln(i,yl(!1),c)}async function Xh(a){const r=String(a?.date||"").slice(0,7)||"all",i=Io(r),c=Sm(r),m={id:KN(),date:a.date,startTime:a.startTime||"",endTime:a.endTime||"",hours:Number(a.hours)||0,reason:String(a.reason||""),status:"inprogress",managerNote:"",createdAt:new Date().toISOString(),_pending:!0,_pendingAction:"create"};await hl({module:"overtime",action:"create",url:`${gl}`,method:"POST",headers:yl(!0),body:JSON.stringify(a),meta:{localId:m.id,month:r}});const u=await zr(i,[]),h=Array.isArray(u)?[m,...u]:[m];await Br(i,h);const g=await zr(c,{totalHours:0,pendingCount:0});return await Br(c,{totalHours:Math.round(((Number(g.totalHours)||0)+(Number(m.hours)||0))*100)/100,pendingCount:(Number(g.pendingCount)||0)+1}),{queued:!0,item:m}}async function ZN(a){if(!navigator.onLine)return Xh(a);let r;try{r=await fetch(`${gl}`,{method:"POST",headers:yl(!0),body:JSON.stringify(a)})}catch{return Xh(a)}return wm(r)}async function Qh(a,r){const i=String(r?.date||"").slice(0,7)||"all",c=Io(i);await hl({module:"overtime",action:"update",url:`${gl}/${a}`,method:"PUT",headers:yl(!0),body:JSON.stringify(r),meta:{id:a,month:i}});const m=await zr(c,[]),u=(Array.isArray(m)?m:[]).map(g=>String(g.id)!==String(a)?g:{...g,...r,hours:r.hours!=null?Number(r.hours):g.hours,_pending:!0,_pendingAction:"update"});return await Br(c,u),{queued:!0,item:u.find(g=>String(g.id)===String(a))||{ok:!0,_pending:!0}}}async function IN(a,r){if(!navigator.onLine)return Qh(a,r);let i;try{i=await fetch(`${gl}/${a}`,{method:"PUT",headers:yl(!0),body:JSON.stringify(r)})}catch{return Qh(a,r)}return wm(i)}async function Fh(a,{month:r}={}){const i=Io(r||"all"),c=Sm(r||"all");await hl({module:"overtime",action:"delete",url:`${gl}/${a}`,method:"DELETE",headers:yl(!1),meta:{id:a,month:r||"all"}});const m=await zr(i,[]),u=Array.isArray(m)?m:[],h=u.find(p=>String(p.id)===String(a)),g=u.filter(p=>String(p.id)!==String(a));if(await Br(i,g),h){const p=await zr(c,{totalHours:0,pendingCount:0}),b=Number(h.hours)||0;await Br(c,{totalHours:Math.round(((Number(p.totalHours)||0)-b)*100)/100,pendingCount:Math.max(0,(Number(p.pendingCount)||0)-1)})}return{queued:!0}}async function WN(a,{month:r}={}){if(!navigator.onLine)return Fh(a,{month:r});let i;try{i=await fetch(`${gl}/${a}`,{method:"DELETE",headers:yl(!1)})}catch{return Fh(a,{month:r})}return wm(i)}async function qb({status:a="pending"}={}){const r=new URLSearchParams;a&&r.set("status",a);const i=`${gl}/approvals?${r.toString()}`,c=`overtime:approvals:${a||"all"}`;return Ln(i,yl(!1),c)}function ew(...a){return a.filter(Boolean).join(" ")}function Kh(){try{return JSON.parse(localStorage.getItem("user")||"{}")}catch{return{}}}function Hb({className:a=""}){const[r,i]=x.useState(()=>Kh());if(x.useEffect(()=>{function u(){i(Kh())}return window.addEventListener("storage",u),window.addEventListener("user:updated",u),()=>{window.removeEventListener("storage",u),window.removeEventListener("user:updated",u)}},[]),!!!r?.impersonating)return null;function m(){const u=localStorage.getItem("imp_admin_token"),h=localStorage.getItem("imp_admin_user");u&&h&&(localStorage.setItem("token",u),localStorage.setItem("user",h)),localStorage.removeItem("imp_admin_token"),localStorage.removeItem("imp_admin_user"),window.dispatchEvent(new Event("user:updated"));let g="/dashboard";try{const b=(h?JSON.parse(h):{})?.role;(b==="admin"||b==="payroll_manager")&&(g="/pm/dashboard")}catch{}window.location.href=g}return t.jsxs("div",{className:ew("rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-900 flex items-center justify-between gap-3",a),children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"font-semibold",children:"Impersonation mode is ON"}),t.jsxs("div",{className:"text-xs text-amber-800 truncate",children:["You are viewing as ",t.jsx("span",{className:"font-semibold",children:r?.role}),"  ",r?.email]})]}),t.jsx("button",{type:"button",onClick:m,className:"shrink-0 rounded-xl px-3 py-2 text-sm font-semibold border border-amber-300 bg-white hover:bg-amber-100",children:"Stop"})]})}function Ot(...a){return a.filter(Boolean).join(" ")}function Jo(a){const r=a&&typeof a=="object"?a:{};return{darkMode:r.darkMode!==!1,largeText:r.largeText===!0,notifications:r.notifications!==!1,highContrast:r.highContrast===!0}}function im(){try{return JSON.parse(localStorage.getItem("user")||"{}")||{}}catch{return{}}}function Zh(){try{const a=im();if(a?.accessibilityPrefs)return Jo(a.accessibilityPrefs)}catch{}try{const a=localStorage.getItem("accessibility_prefs");return a?Jo(JSON.parse(a)):null}catch{return null}}function ku(a){return Array.isArray(a)?a:Array.isArray(a?.items)?a.items:Array.isArray(a?.data)?a.data:Array.isArray(a?.tickets)?a.tickets:Array.isArray(a?.results)?a.results:[]}function Cu(a){const r=String(a||"").toLowerCase().trim();return["closed","resolved","completed","done","cancelled","canceled","rejected","declined","accepted","approved","archived"].includes(r)}function Au({count:a,isDark:r}){const i=Number(a||0)||0;if(i<=0)return null;const c=i>99?"99+":String(i);return t.jsx("span",{className:Ot("ml-2 inline-flex min-w-[20px] items-center justify-center rounded-full px-1.5 py-0.5 text-[11px] font-bold",r?"bg-rose-300 text-slate-900":"bg-rose-600 text-white"),"aria-label":`${i} pending`,title:`${i} pending`,children:c})}function Ls({title:a,children:r,noScroll:i=!1,hideWelcome:c=!1}){const m=Ss(),[u,h]=x.useState(()=>im()),[g,p]=x.useState(()=>Zh()||Jo(null)),b=u?.fullName||u?.name||(u?.email?u.email.split("@")[0]:"Employee"),j=u?.email||"employee@test.com",v=u?.profilePhotoUrl||u?.avatarUrl||"",[D,C]=x.useState(!1),[z,_]=x.useState({support:0,leave:0,overtime:0});function k(){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("accessibility_prefs"),m("/login")}x.useEffect(()=>{function T(){h(im());const P=Zh();p(P||Jo(null))}return T(),window.addEventListener("storage",T),window.addEventListener("accessibility:prefs",T),window.addEventListener("user:updated",T),()=>{window.removeEventListener("storage",T),window.removeEventListener("accessibility:prefs",T),window.removeEventListener("user:updated",T)}},[]),x.useEffect(()=>{document.documentElement.style.fontSize=g.largeText?"18px":"16px",document.documentElement.style.filter=g.highContrast?"contrast(1.15)":"",g.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[g.largeText,g.highContrast,g.darkMode]);const L=!!g.darkMode,N=!!g.largeText,U=!!g.highContrast,M=Ot("min-h-screen",L?"bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-white":"bg-gradient-to-br from-slate-50 via-white to-slate-100 text-slate-900",N?"text-[115%]":"",U?"contrast-125":""),J=L?"border border-white/10 bg-white/5":"border border-slate-200 bg-white",te=L?"border border-white/10 bg-white/5":"border border-slate-200 bg-white",q=L?"text-white/80 hover:bg-white/10":"text-slate-700 hover:bg-slate-100",Y=L?"bg-white/15 text-white":"bg-slate-100 text-slate-900";async function I(){try{const[T,P,$]=await Promise.all([_n().catch(()=>[]),Bb().catch(()=>[]),km().catch(()=>[])]),le=ku(T),ie=ku(P),W=ku($),R=le.filter(H=>!Cu(H?.status)).length,ee=ie.filter(H=>!Cu(H?.status)).length,Q=W.filter(H=>!Cu(H?.status)).length;_({support:R,leave:ee,overtime:Q})}catch{}}return x.useEffect(()=>{I();const T=setInterval(I,15e3);function P(){I()}return window.addEventListener("focus",P),()=>{clearInterval(T),window.removeEventListener("focus",P)}},[]),t.jsxs(t.Fragment,{children:[t.jsx(bN,{}),t.jsxs("div",{className:M,children:[t.jsx("div",{className:"mx-auto max-w-7xl px-4 py-4 min-h-screen",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[260px_1fr] gap-4 min-h-[calc(100vh-2rem)]",children:[t.jsxs("aside",{className:Ot("rounded-[28px] p-4 flex flex-col",J),children:[t.jsxs("div",{className:"mb-3 flex items-center gap-3 px-2 min-w-0",children:[t.jsx("div",{className:"h-20 w-20 shrink-0 flex items-center justify-center",children:t.jsx("img",{src:Ko,alt:"AutoPay",className:"max-h-16 max-w-16 object-contain"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:Ot("font-semibold leading-tight truncate",L?"text-white":"text-slate-900"),children:"AutoPay"}),t.jsx("div",{className:Ot("text-xs truncate",L?"text-white/60":"text-slate-500"),children:"Employee Portal"})]})]}),t.jsxs("nav",{className:"space-y-1",children:[t.jsx(st,{to:"/dashboard",className:({isActive:T})=>`block rounded-xl px-4 py-2 text-sm transition ${T?Y:q}`,children:"Home"}),t.jsx(st,{to:"/documents",className:({isActive:T})=>`block rounded-xl px-4 py-2 text-sm transition ${T?Y:q}`,children:"My Documents"}),t.jsx(st,{to:"/leave",className:({isActive:T})=>`block rounded-xl px-4 py-2 text-sm transition ${T?Y:q}`,children:t.jsxs("span",{className:"inline-flex items-center",children:["Leave Module",t.jsx(Au,{count:z.leave,isDark:L})]})}),t.jsx(st,{to:"/overtime",className:({isActive:T})=>`block rounded-xl px-4 py-2 text-sm transition ${T?Y:q}`,children:t.jsxs("span",{className:"inline-flex items-center",children:["Overtime",t.jsx(Au,{count:z.overtime,isDark:L})]})}),t.jsx(st,{to:"/progressions",className:({isActive:T})=>`block rounded-xl px-4 py-2 text-sm transition ${T?Y:q}`,children:"Progressions"}),t.jsx(st,{to:"/support",className:({isActive:T})=>`block rounded-xl px-4 py-2 text-sm transition ${T?Y:q}`,children:t.jsxs("span",{className:"inline-flex items-center",children:["Support Requests",t.jsx(Au,{count:z.support,isDark:L})]})})]}),t.jsx("div",{className:Ot("my-4",L?"border-t border-white/10":"border-t border-slate-200")}),t.jsxs("nav",{className:"space-y-1",children:[t.jsx(st,{to:"/knowledge",className:({isActive:T})=>`block rounded-xl px-4 py-2 text-sm transition ${T?Y:q}`,children:"Knowledge Hub"}),t.jsx(st,{to:"/accessibility",className:({isActive:T})=>`block rounded-xl px-4 py-2 text-sm transition ${T?Y:q}`,children:"Accessibility"})]}),t.jsx("div",{className:"mt-auto pt-4",children:t.jsx("button",{onClick:()=>C(!0),className:Ot("w-full rounded-xl border px-4 py-2 text-sm transition",L?"bg-white/10 hover:bg-white/15 border-white/10 text-white":"bg-slate-50 hover:bg-slate-100 border-slate-200 text-slate-900"),type:"button",children:"Log Out"})})]}),t.jsxs("main",{className:Ot("rounded-[28px] p-5",te,i?"h-[calc(100vh-2rem)] overflow-hidden":""),children:[!c&&t.jsxs("div",{className:"mb-6 flex items-center justify-between gap-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:Ot("text-2xl font-semibold tracking-tight",L?"text-white":"text-slate-900"),children:["Welcome, ",b,"!"]}),t.jsx("div",{className:Ot("text-sm",L?"text-white/60":"text-slate-500"),children:"Quick access to your documents and modules"})]}),t.jsxs("button",{onClick:()=>m("/profile"),className:Ot("flex items-center gap-3 rounded-2xl border px-3 py-2 transition text-left",L?"border-white/10 bg-white/5 hover:bg-white/10":"border-slate-200 bg-white hover:bg-slate-50"),type:"button",title:"Open Profile",children:[v?t.jsx("img",{src:v.startsWith("http")?v:`http://localhost:5000${v}`,alt:"Profile",className:Ot("h-10 w-10 rounded-full object-cover border",L?"border-white/10 bg-white/10":"border-slate-200 bg-slate-100")}):t.jsx("div",{className:Ot("h-10 w-10 rounded-full border",L?"border-white/10 bg-white/10":"border-slate-200 bg-slate-100")}),t.jsxs("div",{className:"leading-tight",children:[t.jsx("div",{className:Ot("text-sm font-semibold",L?"text-white":"text-slate-900"),children:b}),t.jsx("div",{className:Ot("text-xs",L?"text-white/60":"text-slate-500"),children:j})]})]})]}),a?t.jsx("div",{className:Ot("mb-4 text-lg font-semibold tracking-wide",L?"text-white":"text-slate-900"),children:a}):null,t.jsx(Hb,{className:"mb-4"}),t.jsx("div",{className:i?"h-full overflow-hidden":"",children:r})]})]})}),D?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>C(!1)}),t.jsx("div",{className:"absolute left-1/2 top-1/2 w-[94vw] sm:w-[520px] -translate-x-1/2 -translate-y-1/2",children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:T=>T.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Log out?"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Are you sure you want to end your session?"})]}),t.jsx("button",{onClick:()=>C(!1),className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button","aria-label":"Close",children:""})]}),t.jsxs("div",{className:"p-6 flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:()=>C(!1),className:"rounded-xl px-4 py-2 border border-emerald-200 bg-emerald-50 hover:bg-emerald-100 text-emerald-800 font-semibold",type:"button",children:"Stay"}),t.jsx("button",{onClick:k,className:"rounded-xl px-4 py-2 border border-rose-200 bg-rose-50 hover:bg-rose-100 text-rose-800 font-semibold",type:"button",children:"Log out"})]})]})})]}):null]})]})}const Pb="http://localhost:5000";function Yb(){const a=localStorage.getItem("token");return{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}}}async function Ih({limit:a=50,module:r=""}={}){const i=new URLSearchParams;i.set("limit",String(a)),r&&i.set("module",r);const c=await fetch(`${Pb}/api/audit/mine?${i.toString()}`,{headers:Yb()}),m=await c.json().catch(()=>({}));if(!c.ok)throw new Error(m.message||`Failed to load logs (${c.status})`);return m}async function tw({limit:a=80,module:r=""}={}){const i=new URLSearchParams;i.set("limit",String(a)),r&&i.set("module",r);const c=await fetch(`${Pb}/api/audit/my-actions?${i.toString()}`,{headers:Yb()}),m=await c.json().catch(()=>({}));if(!c.ok)throw new Error(m.message||`Failed to load logs (${c.status})`);return m}function sw(){const[a,r]=x.useState(navigator.onLine);return x.useEffect(()=>{const i=()=>r(!0),c=()=>r(!1);return window.addEventListener("online",i),window.addEventListener("offline",c),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",c)}},[]),a}function lw(a){return a.toLocaleDateString(void 0,{month:"long",year:"numeric"})}function Gb(a){const r=a.getFullYear(),i=String(a.getMonth()+1).padStart(2,"0"),c=String(a.getDate()).padStart(2,"0");return`${r}-${i}-${c}`}function Wh(a){const[r,i,c]=(a||"").split("-").map(Number);return!r||!i||!c?null:new Date(r,i-1,c)}function ep(a){return new Date(a.getFullYear(),a.getMonth(),1)}function aw(a){return new Date(a.getFullYear(),a.getMonth()+1,0)}function tp(a,r){return new Date(a.getFullYear(),a.getMonth()+r,1)}function nw(a){const r={};for(const i of a){const c=Wh(i.start),m=Wh(i.end);if(!c||!m)continue;const u=new Date(c);for(;u<=m;){const h=Gb(u);r[h]=r[h]||[],r[h].push({kind:i.status==="accepted"?"accepted":i.status==="cancelled"?"cancelled":"inprogress",text:i.type||"Leave"}),u.setDate(u.getDate()+1)}}return r}function rw(a){return String(a).padStart(2,"0")}function iw(a=new Date){return`${a.getFullYear()}-${rw(a.getMonth()+1)}`}function ow(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?"-":r.toLocaleString()}function Ca({title:a,children:r,className:i=""}){return t.jsxs("div",{className:`rounded-3xl bg-white border border-slate-200 p-5 ${i}`,children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function sp({label:a,sub:r,onClick:i,tone:c=""}){return t.jsxs("button",{onClick:i,className:`rounded-2xl border border-slate-200 p-4 text-left transition hover:brightness-105 ${c}`,type:"button",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),r?t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:r}):null]})}function cw({requests:a,onOpenLeave:r}){const[i,c]=x.useState(()=>ep(new Date)),m=x.useMemo(()=>nw(a),[a]),u=ep(i),h=aw(i),g=u.getDay(),p=h.getDate(),b=[];for(let v=0;v<g;v++)b.push(null);for(let v=1;v<=p;v++)b.push(new Date(i.getFullYear(),i.getMonth(),v));for(;b.length%7!==0;)b.push(null);const j=["S","M","T","W","T","F","S"];return t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Leave Calendar"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:v=>{v.stopPropagation(),c(D=>tp(D,-1))},className:"h-8 w-8 rounded-xl border border-slate-200 bg-white hover:bg-slate-50 text-slate-700 font-bold","aria-label":"Prev month",type:"button",children:""}),t.jsx("div",{className:"text-xs text-slate-600 min-w-[120px] text-center",children:lw(i)}),t.jsx("button",{onClick:v=>{v.stopPropagation(),c(D=>tp(D,1))},className:"h-8 w-8 rounded-xl border border-slate-200 bg-white hover:bg-slate-50 text-slate-700 font-bold","aria-label":"Next month",type:"button",children:""})]})]}),t.jsxs("button",{onClick:r,className:"mt-3 w-full text-left",type:"button",children:[t.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[j.map(v=>t.jsx("div",{className:"text-[10px] text-slate-500 font-semibold text-center py-0.5",children:v},v)),b.map((v,D)=>{if(!v)return t.jsx("div",{className:"h-9 rounded-lg bg-transparent"},D);const C=Gb(v),z=m[C]||[],_=z.some(N=>N.kind==="accepted"),k=z.some(N=>N.kind==="inprogress"),L=z.some(N=>N.kind==="cancelled");return t.jsxs("div",{className:"h-9 rounded-xl border border-slate-200 bg-white px-1 py-1",children:[t.jsx("div",{className:"text-[11px] font-semibold text-slate-800 leading-none",children:v.getDate()}),_||k||L?t.jsxs("div",{className:"mt-1 flex gap-1",children:[_?t.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-300"}):null,k?t.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-sky-300"}):null,L?t.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-rose-300"}):null]}):null]},D)})]}),t.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-slate-600",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"inline-flex items-center gap-1",children:[t.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-300"})," Accepted"]}),t.jsxs("span",{className:"inline-flex items-center gap-1",children:[t.jsx("span",{className:"h-2 w-2 rounded-full bg-sky-300"})," In progress"]}),t.jsxs("span",{className:"inline-flex items-center gap-1",children:[t.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-300"})," Cancelled"]})]}),t.jsx("span",{className:"text-slate-500",children:"Click to open Leave Module"})]})]})]})}function dw(){const a=Ss(),r=sw(),i="dashboard:v1",c=x.useMemo(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}")}catch{return{}}},[]),[m,u]=x.useState(c),h=m?.fullName||m?.name||(m?.email?m.email.split("@")[0]:"Employee"),g=m?.profilePhotoUrl||m?.avatarUrl||m?.photoUrl||"",[p,b]=x.useState(()=>{try{const Q=localStorage.getItem("leave_requests");if(Q)return JSON.parse(Q)}catch{}return[]}),[j,v]=x.useState(!1),[D,C]=x.useState({totalHours:0,pendingCount:0}),[z,_]=x.useState(null),[k,L]=x.useState(!1),[N,U]=x.useState({total:0,open:0,resolved:0}),[M,J]=x.useState([]),[te,q]=x.useState(!1),[Y,I]=x.useState(!1),[T,P]=x.useState(""),[$,le]=x.useState([]);async function ie(){const Q=iw(new Date);v(!0);try{const[H,ue]=await Promise.all([$b(Q),km(Q)]);C({totalHours:H?.totalHours??0,pendingCount:H?.pendingCount??0});const w=Array.isArray(ue)?ue:[];_(w.length>0?w[0]:null)}catch{C({totalHours:0,pendingCount:0}),_(null)}finally{v(!1)}}async function W(){L(!0);try{const Q=await _n(),H=Array.isArray(Q)?Q:[],ue=H.filter(E=>!["resolved","closed"].includes(E.status)).length,w=H.filter(E=>["resolved","closed"].includes(E.status)).length;U({total:H.length,open:ue,resolved:w}),J(H.slice(0,3))}catch{U({total:0,open:0,resolved:0}),J([])}finally{L(!1)}}async function R(){q(!0),I(!0),P("");try{const Q=await Ih({limit:80});le(Array.isArray(Q)?Q:[])}catch(Q){P(Q.message||"Failed to load logs."),le([])}finally{I(!1)}}async function ee(){I(!0),P("");try{const Q=await Ih({limit:80});le(Array.isArray(Q)?Q:[])}catch(Q){P(Q.message||"Failed to load logs."),le([])}finally{I(!1)}}return x.useEffect(()=>{function Q(H){if(H.key==="leave_requests")try{const ue=JSON.parse(H.newValue||"[]");b(Array.isArray(ue)?ue:[])}catch{}if(H.key==="user")try{const ue=JSON.parse(H.newValue||"{}");u(ue||{})}catch{}}return window.addEventListener("storage",Q),()=>window.removeEventListener("storage",Q)},[]),x.useEffect(()=>{const Q=setInterval(()=>{try{const H=localStorage.getItem("leave_requests"),ue=H?JSON.parse(H):[];Array.isArray(ue)&&b(ue)}catch{}try{const H=localStorage.getItem("user"),ue=H?JSON.parse(H):{};u(ue||{})}catch{}},1200);return()=>clearInterval(Q)},[]),x.useEffect(()=>{r||(async()=>{try{const Q=await La(i);if(!Q)return;Q.otSummary&&C(Q.otSummary),"otLatest"in Q&&_(Q.otLatest),Q.srStats&&U(Q.srStats),Array.isArray(Q.srLatest)&&J(Q.srLatest)}catch{}})()},[r]),x.useEffect(()=>{if(!r)return;(async()=>(await Promise.all([ie(),W()]),setTimeout(async()=>{try{await Fl(i,{otSummary:D,otLatest:z,srStats:N,srLatest:M,savedAt:Date.now()})}catch{}},250)))();function Q(){ie(),W()}return window.addEventListener("focus",Q),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(ie(),W())}),()=>{window.removeEventListener("focus",Q)}},[r]),x.useEffect(()=>{if(!r)return;const Q=setTimeout(async()=>{try{await Fl(i,{otSummary:D,otLatest:z,srStats:N,srLatest:M,savedAt:Date.now()})}catch{}},350);return()=>clearTimeout(Q)},[r,D,z,N,M]),t.jsxs(Ls,{title:"",children:[t.jsx("div",{className:"rounded-[28px] bg-slate-100/90 p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-end",children:t.jsx("button",{onClick:R,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",type:"button",children:" Activity Log"})}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[t.jsx(Ca,{title:"My Documents",className:"border-indigo-500/20",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsx(sp,{label:"Payslips",sub:"View, preview & download",tone:"bg-gradient-to-br from-indigo-500/15 to-sky-500/10",onClick:()=>a("/documents")}),t.jsx(sp,{label:"Documents",sub:"Documents one click away",tone:"bg-gradient-to-br from-emerald-500/15 to-lime-500/10",onClick:()=>a("/documents")})]})}),t.jsxs(Ca,{title:"Support Requests",className:"border-sky-500/20",children:[t.jsxs("button",{onClick:()=>a("/support"),className:"w-full rounded-2xl bg-slate-50 hover:bg-slate-100 border border-slate-200 p-4 text-left transition",type:"button",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Overview"}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Track your tickets, messages, and status updates"})]}),k?t.jsx("div",{className:"text-xs text-slate-500",children:"Loading"}):t.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[t.jsxs("span",{className:"text-xs rounded-full border border-slate-200 bg-white px-3 py-1 font-semibold text-slate-700",children:["Total: ",N.total]}),t.jsxs("span",{className:"text-xs rounded-full border border-sky-100 bg-sky-50 px-3 py-1 font-semibold text-sky-700",children:["Open: ",N.open]}),t.jsxs("span",{className:"text-xs rounded-full border border-emerald-100 bg-emerald-50 px-3 py-1 font-semibold text-emerald-700",children:["Resolved: ",N.resolved]})]})]}),M.length?t.jsx("div",{className:"mt-3 space-y-2",children:M.map(Q=>t.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white px-3 py-2",children:[t.jsx("div",{className:"text-xs font-semibold text-slate-900 truncate",children:Q.title}),t.jsxs("div",{className:"text-[11px] text-slate-600 mt-0.5",children:[(Q.type||"").toUpperCase(),"  ",(Q.status||"").replaceAll("_"," ")," "," ",Q.lastActionAt?new Date(Q.lastActionAt).toLocaleString():""]})]},Q._id))}):k?null:t.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"No support tickets yet."})]}),t.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>a("/support?type=payroll"),className:"rounded-2xl border border-slate-200 bg-white hover:bg-slate-50 p-4 text-left transition",type:"button",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Payroll Support"}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Go with payroll filter"})]}),t.jsxs("button",{onClick:()=>a("/support?type=technical"),className:"rounded-2xl border border-slate-200 bg-white hover:bg-slate-50 p-4 text-left transition",type:"button",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Technical Support"}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Go with technical filter"})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[1fr_360px] gap-6",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs(Ca,{title:"My Profile",className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[g?t.jsx("img",{src:g.startsWith("http")?g:`http://localhost:5000${g}`,alt:"Profile",className:"h-12 w-12 rounded-full object-cover border border-slate-200"}):t.jsx("div",{className:"h-12 w-12 rounded-full bg-slate-100 border border-slate-200"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:h}),t.jsx("div",{className:"text-xs text-slate-600",children:m?.email||"employee@test.com"}),t.jsxs("div",{className:"text-[11px] text-slate-500 mt-0.5",children:["Employee No: ",t.jsx("span",{className:"font-semibold text-slate-700",children:m?.employeeId||""})]})]})]}),t.jsx("button",{onClick:()=>a("/profile"),className:"rounded-xl px-4 py-2 bg-slate-900 text-white hover:bg-slate-800 border border-slate-900 text-sm",type:"button",children:"Edit"})]}),t.jsx(Ca,{title:"Leave Module",children:t.jsx(cw,{requests:p,onOpenLeave:()=>a("/leave")})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[t.jsx(Ca,{children:t.jsxs("button",{onClick:()=>a("/knowledge"),className:"w-full rounded-2xl bg-blue-500/15 hover:bg-blue-500/20 border border-slate-200 p-6 text-left",type:"button",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Knowledge Hub"}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Guides, policies, FAQs"})]})}),t.jsx(Ca,{children:t.jsxs("button",{onClick:()=>a("/progressions"),className:"w-full rounded-2xl bg-yellow-500/15 hover:bg-yellow-500/20 border border-slate-200 p-6 text-left",type:"button",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"My Progressions"}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Training & milestones"})]})})]})]}),t.jsxs(Ca,{title:"Overtime",children:[j?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"rounded-2xl bg-violet-50 border border-violet-100 p-3",children:[t.jsx("div",{className:"text-[11px] text-slate-600",children:"Total hours (this month)"}),t.jsx("div",{className:"text-xl font-semibold text-slate-900 mt-0.5",children:D.totalHours??0})]}),t.jsxs("div",{className:"rounded-2xl bg-sky-50 border border-sky-100 p-3",children:[t.jsx("div",{className:"text-[11px] text-slate-600",children:"In progress"}),t.jsx("div",{className:"text-xl font-semibold text-slate-900 mt-0.5",children:D.pendingCount??0})]})]}),z?t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3",children:[t.jsx("div",{className:"text-xs text-slate-600",children:"Latest log"}),t.jsxs("div",{className:"text-sm font-semibold text-slate-900 mt-1",children:[z.date,"  ",z.hours," hour(s)"]}),t.jsx("div",{className:"text-xs text-slate-600 mt-1 line-clamp-2",children:z.reason})]}):t.jsx("div",{className:"text-sm text-slate-700",children:"No overtime logged for this month."})]}),t.jsx("button",{onClick:()=>a("/overtime"),className:"mt-4 rounded-xl px-4 py-2 bg-slate-900 text-white hover:bg-slate-800 border border-slate-900 text-sm",type:"button",children:"Log Overtime"})]})]})]})}),te?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>q(!1)}),t.jsx("div",{className:"absolute left-1/2 top-1/2 w-[94vw] sm:w-[980px] -translate-x-1/2 -translate-y-1/2",children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:"Activity Log"}),t.jsx("button",{onClick:()=>q(!1),className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button",children:""})]}),t.jsxs("div",{className:"p-6",children:[T?t.jsx("div",{className:"mb-4 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:T}):null,t.jsx("button",{onClick:ee,className:"mb-3 rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",type:"button",disabled:Y,children:Y?"Refreshing...":"Refresh"}),t.jsx("div",{className:"max-h-[520px] overflow-auto space-y-2 pr-2",children:Y?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):$.length===0?t.jsxs("div",{className:"text-sm text-slate-700",children:["No logs yet. (If you *just* created a request and still see nothing, the backend filter is wrong  it must use ",t.jsx("b",{children:"subjectId"}),".)"]}):$.map(Q=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[String(Q.module||"").toUpperCase(),"  ",Q.action]}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:Q.message||"-"}),t.jsxs("div",{className:"text-[11px] text-slate-500 mt-1",children:["By: ",Q.actorRole||"user"]})]}),t.jsx("div",{className:"text-xs text-slate-500 shrink-0",children:ow(Q.createdAt)})]})},Q._id))})]})]})})]}):null]})}function uw(a){return new Intl.NumberFormat(void 0,{style:"currency",currency:"MUR"}).format(a||0)}function mw(){const a=Ss(),[r,i]=x.useState([]),[c,m]=x.useState(""),[u,h]=x.useState(!0);x.useEffect(()=>{const p=localStorage.getItem("token");if(!p){a("/login");return}h(!0),m(""),fetch("http://localhost:5000/api/payslips/mine",{headers:{Authorization:`Bearer ${p}`}}).then(async b=>{const j=await b.json().catch(()=>[]);if(b.status===401||b.status===403)return localStorage.removeItem("token"),localStorage.removeItem("user"),a("/login"),null;if(!b.ok)throw new Error(j.message||"Failed to load payslips");return j}).then(b=>i(Array.isArray(b)?b:[])).catch(b=>m(b.message)).finally(()=>h(!1))},[a]);const g=x.useMemo(()=>{const b=[...Array.isArray(r)?r:[]].sort((v,D)=>{const C=v?.createdAt?new Date(v.createdAt).getTime():0,z=D?.createdAt?new Date(D.createdAt).getTime():0;if(z!==C)return z-C;const _=v?.payPeriod?.payDate?new Date(v.payPeriod.payDate).getTime():0;return(D?.payPeriod?.payDate?new Date(D.payPeriod.payDate).getTime():0)-_}),j={};return b.map(v=>{const D=v?.payPeriod?.period||"UNKNOWN",C=j[D]||0;return j[D]=C+1,{p:v,label:C===0?"Payslip":"Payslip Adjustment"}})},[r]);return t.jsxs(Ls,{title:"My Documents",showWelcome:!1,children:[t.jsx("div",{className:"flex items-start justify-between gap-4 mb-6",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold",children:"My Payslips"}),t.jsx("p",{className:"text-white/60 text-sm",children:"View and download your payslips"})]})}),u?t.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 text-white/70",children:"Loading"}):c?t.jsx("div",{className:"rounded-2xl border border-red-500/20 bg-red-500/10 p-6 text-red-200",children:c}):g.length===0?t.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 text-white/70",children:"No payslips yet."}):t.jsx("div",{className:"grid gap-3",children:g.map(({p,label:b})=>t.jsx(Fo,{to:`/payslips/${p._id}`,className:"block rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 transition p-4",children:t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-semibold",children:[p.payPeriod?.period," ",t.jsxs("span",{className:"text-white/60 font-normal text-sm",children:[" ",b]})]}),t.jsxs("div",{className:"text-xs text-white/60",children:["Pay Date: ",p.payPeriod?.payDate?new Date(p.payPeriod.payDate).toLocaleDateString():"-",p.status?`  Status: ${p.status}`:""]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-xs text-white/60",children:"Net Pay"}),t.jsx("div",{className:"text-lg font-bold",children:uw(p.totals?.netPay)})]})]})},p._id))})]})}function Eu({title:a,children:r}){const i=Ss();function c(){localStorage.removeItem("token"),localStorage.removeItem("user"),i("/login")}return t.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[t.jsx("header",{className:"sticky top-0 z-10 border-b border-white/10 bg-slate-950/70 backdrop-blur",children:t.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between",children:[t.jsxs(Fo,{to:"/payslips",className:"flex items-center gap-3",children:[t.jsx("img",{src:Ko,alt:"Smart Payroll",className:"h-9 w-9 rounded-lg object-cover"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold leading-tight",children:"Smart Payroll"}),t.jsx("div",{className:"text-xs text-white/60 -mt-0.5",children:"Zero-touch payroll"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[a?t.jsx("div",{className:"text-sm text-white/70 hidden sm:block",children:a}):null,t.jsx("button",{onClick:c,className:"rounded-xl bg-white/10 hover:bg-white/15 border border-white/10 px-4 py-2 text-sm",children:"Logout"})]})]})}),t.jsx("main",{className:"mx-auto max-w-6xl px-4 py-6",children:r})]})}function Bo(a){return new Intl.NumberFormat(void 0,{style:"currency",currency:"MUR"}).format(a||0)}function xw(a){return(a||"Payslip").toString().trim().replace(/[^\w-]+/g,"-")}function fw(){const{id:a}=gb(),r=Ss(),[i,c]=x.useState(null),[m,u]=x.useState(""),[h,g]=x.useState(!1);x.useEffect(()=>{const D=localStorage.getItem("token");if(!D){r("/login");return}fetch(`http://localhost:5000/api/payslips/${a}/view`,{headers:{Authorization:`Bearer ${D}`}}).then(async C=>{const z=await C.json();if(C.status===401||C.status===403)return localStorage.removeItem("token"),localStorage.removeItem("user"),r("/login"),null;if(!C.ok)throw new Error(z.message||"Failed to load payslip");return z}).then(C=>{C&&c(C)}).catch(C=>u(C.message))},[a,r]);async function p(){const D=localStorage.getItem("token");g(!0);try{const C=await fetch(`http://localhost:5000/api/payslips/${a}/pdf`,{headers:{Authorization:`Bearer ${D}`}});if(C.status===401||C.status===403){localStorage.removeItem("token"),localStorage.removeItem("user"),r("/login");return}if(!C.ok){let U="Failed to download PDF";try{U=(await C.json()).message||U}catch{}throw new Error(U)}const z=i?.payslip?.payPeriod?.period||"Payslip",_=`Payslip-${xw(z)}.pdf`,k=await C.blob(),L=window.URL.createObjectURL(k),N=document.createElement("a");N.href=L,N.download=_,document.body.appendChild(N),N.click(),N.remove(),window.URL.revokeObjectURL(L)}catch(C){alert(C.message)}finally{g(!1)}}if(m)return t.jsx(Eu,{title:"Payslip Preview",children:t.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 text-red-200",children:["Error: ",m]})});if(!i)return t.jsx(Eu,{title:"Payslip Preview",children:t.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 text-white/70",children:"Loading"})});const{company:b,payslip:j}=i;return t.jsxs(Eu,{title:"Payslip Preview",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[t.jsx("button",{onClick:()=>r("/documents"),className:"rounded-xl bg-white/10 hover:bg-white/15 border border-white/10 px-4 py-2 text-sm",children:" Back"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>window.print(),className:"rounded-xl bg-white/10 hover:bg-white/15 border border-white/10 px-4 py-2 text-sm",children:"Print"}),t.jsx("button",{onClick:p,disabled:h,className:"rounded-xl bg-indigo-500 hover:bg-indigo-600 px-4 py-2 text-sm font-semibold disabled:opacity-60",children:h?"Downloading...":"Download PDF"})]})]}),t.jsxs("div",{className:"rounded-2xl bg-white text-slate-900 p-6 shadow-xl",children:[t.jsxs("div",{className:"flex items-start justify-between gap-6",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[b?.logoUrl?t.jsx("img",{src:b.logoUrl,alt:"Company Logo",className:"h-28 w-28 object-contain"}):t.jsx("div",{className:"h-28 w-28 border border-dashed border-slate-300 flex items-center justify-center text-slate-500",children:"Logo"}),t.jsxs("div",{className:"text-sm text-slate-700 leading-5",children:[t.jsx("div",{className:"whitespace-pre-line",children:b?.companyAddress||""}),t.jsxs("div",{className:"mt-2",children:[b?.companyPhone?`Tel: ${b.companyPhone}`:"Tel: -","  ","casagrande@gmail.com"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-lg font-bold tracking-wide",children:"PAYSLIP"}),t.jsxs("div",{className:"text-sm text-slate-700",children:["Payslip No: ",j.payslipNumber||"-"]}),t.jsxs("div",{className:"text-sm text-slate-700",children:["Period: ",j.payPeriod?.period||"-"]}),t.jsxs("div",{className:"text-sm text-slate-700",children:["Pay Date:"," ",j.payPeriod?.payDate?new Date(j.payPeriod.payDate).toLocaleDateString():"-"]})]})]}),t.jsx("hr",{className:"my-5 border-slate-200"}),t.jsxs("div",{className:"flex items-start justify-between gap-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold",children:"Employee"}),t.jsx("div",{children:j.employeeSnapshot?.fullName}),t.jsx("div",{className:"text-sm text-slate-600",children:j.employeeSnapshot?.email}),j.employeeSnapshot?.address?t.jsx("div",{className:"mt-1 whitespace-pre-line text-sm text-slate-600",children:j.employeeSnapshot.address}):null]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"font-semibold",children:"Employee ID"}),t.jsx("div",{children:j.employeeSnapshot?.employeeId||"-"})]})]}),t.jsx("hr",{className:"my-5 border-slate-200"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(lp,{title:"Earnings",items:j.earnings}),t.jsx(lp,{title:"Deductions",items:j.deductions})]}),t.jsx("hr",{className:"my-5 border-slate-200"}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("div",{className:"w-full max-w-sm space-y-2",children:[t.jsx($o,{label:"Gross Pay",value:Bo(j.totals?.grossPay),bold:!0}),t.jsx($o,{label:"Total Deductions",value:Bo(j.totals?.totalDeductions)}),t.jsx($o,{label:"Net Pay",value:Bo(j.totals?.netPay),bold:!0})]})}),t.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"This document is system-generated and does not require a signature."})]})]})}function lp({title:a,items:r}){return t.jsxs("div",{className:"rounded-xl border border-slate-200 p-4",children:[t.jsx("div",{className:"font-bold mb-3",children:a}),t.jsxs("div",{className:"space-y-2",children:[(r||[]).map((i,c)=>t.jsx($o,{label:i.label,value:Bo(i.amount)},c)),(r||[]).length===0?t.jsx("div",{className:"text-sm text-slate-500",children:"No items"}):null]})]})}function $o({label:a,value:r,bold:i}){return t.jsxs("div",{className:`flex justify-between ${i?"font-bold":""}`,children:[t.jsx("div",{children:a}),t.jsx("div",{children:r})]})}const Wo="http://localhost:5000/api/employee-documents";function hw(){return{Authorization:`Bearer ${localStorage.getItem("token")}`}}function Cm(){return{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}async function ec(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok)throw new Error(i?.message||`Request failed (${a.status})`);return i}async function pw(){const a=await fetch(`${Wo}/mine`,{headers:Cm()});return ec(a)}async function bw(a){const r=await fetch(`${Wo}/by-employee/${a}`,{headers:Cm()});return ec(r)}async function gw({file:a,employeeIds:r,category:i,title:c,period:m}){const u=new FormData;u.append("file",a),u.append("employeeIds",JSON.stringify(r||[])),i&&u.append("category",i),c&&u.append("title",c),m&&u.append("period",m);const h=await fetch(`${Wo}`,{method:"POST",headers:hw(),body:u});return ec(h)}async function yw(a){const r=await fetch(`${Wo}/${a}`,{method:"DELETE",headers:Cm()});return ec(r)}function vw(a){try{return new Date(a).toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})}catch{return"-"}}function Tu(a){try{return new Date(a).toLocaleString(void 0,{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"-"}}function Am(a){return a==="released"||a==="completed"}function jw(a){return(a||"Payslip").toString().trim().replace(/[^\w-]+/g,"-")}function Nw({status:a}){const r=Am(a);return t.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium border ${r?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-sky-50 text-sky-700 border-sky-100"}`,children:r?"Completed":"In progress"})}function ww({status:a}){const r=Am(a);return t.jsx("span",{className:`inline-block h-3 w-3 rounded-full ${r?"bg-emerald-300":"bg-slate-300"}`})}function ap({children:a,onClick:r,disabled:i,tone:c,title:m}){return t.jsx("button",{title:i?m:void 0,onClick:i?void 0:r,disabled:i,className:`text-sm font-medium ${i?"text-slate-400 cursor-not-allowed":`${c} hover:underline`}`,children:a})}function Sw({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-red-200 bg-red-50 text-red-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:`mb-4 rounded-2xl border px-4 py-3 shadow-sm ${c}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold","aria-label":"Close message",children:""})]})})}function kw(a){const r=String(a||"").trim(),i=/^(\d{4})-(0[1-9]|1[0-2])$/.exec(r);if(i){const m=Number(i[1]),u=Number(i[2]);return m*12+(u-1)}const c=new Date(`1 ${r}`);return Number.isNaN(c.getTime())?-1:c.getFullYear()*12+c.getMonth()}function Cw(a){const r=String(a||"").trim(),i=/^(\d{4})-(0[1-9]|1[0-2])$/.exec(r);if(i){const m=Number(i[1]),u=Number(i[2]);return new Date(m,u-1,1).toLocaleDateString(void 0,{month:"short",year:"numeric"})}const c=new Date(`1 ${r}`);return Number.isNaN(c.getTime())?r||"Unknown period":c.toLocaleDateString(void 0,{month:"short",year:"numeric"})}function Aw(a){const r=String(a||"").trim();return r?r==="tax_year_end"?"Tax Year End":r==="hr"?"HR":r.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase()):"Other"}function Ew(){const a=Ss(),[r,i]=x.useState([]),[c,m]=x.useState(!0),[u,h]=x.useState(""),[g,p]=x.useState({kind:"info",text:""}),[b,j]=x.useState({}),[v,D]=x.useState([]),[C,z]=x.useState(!0);async function _(N,U,M){const J=localStorage.getItem("token"),te=await fetch(`http://localhost:5000/api/payslips/${N}/pdf`,{headers:{Authorization:`Bearer ${J}`}});if(te.status===401||te.status===403){localStorage.removeItem("token"),localStorage.removeItem("user"),a("/login");return}if(!te.ok){let P="Failed to download PDF";try{P=(await te.json()).message||P}catch{}throw new Error(P)}const q=await te.blob(),Y=window.URL.createObjectURL(q),I=document.createElement("a");I.href=Y;const T=M==="Payslip Adjustment"?"Payslip-Adjustment":"Payslip";I.download=`${T}-${jw(U)}.pdf`,document.body.appendChild(I),I.click(),I.remove(),window.URL.revokeObjectURL(Y)}x.useEffect(()=>{const N=localStorage.getItem("token");if(!N){a("/login");return}m(!0),h(""),fetch("http://localhost:5000/api/payslips/mine",{headers:{Authorization:`Bearer ${N}`}}).then(async U=>{const M=await U.json().catch(()=>[]);if(U.status===401||U.status===403)return localStorage.removeItem("token"),localStorage.removeItem("user"),a("/login"),null;if(!U.ok)throw new Error(M.message||"Failed to load payslips");return M}).then(U=>{U&&i(Array.isArray(U)?U:[])}).catch(U=>h(U.message)).finally(()=>m(!1))},[a]),x.useEffect(()=>{z(!0),pw().then(N=>D(Array.isArray(N)?N:[])).catch(N=>p({kind:"error",text:N.message||"Failed to load documents."})).finally(()=>z(!1))},[]);const k=x.useMemo(()=>{const N=r.map(J=>{const te=J._id||J.id,q=J.status||"processing",Y=J.payPeriod?.period||J.period||"UNKNOWN",I=J.payPeriod?.payDate||J.payDate||null,T=I?new Date(I).getTime():0,P=J.createdAt||J.generatedAt||J.updatedAt||null,$=P?new Date(P).getTime():0;return{id:te,status:q,period:Y,periodKey:kw(Y),periodLabel:Cw(Y),payDate:I,payDateLabel:I?vw(I):"-",payTime:T,createdAt:P,createdTime:$,payslipKind:J.payslipKind||"regular",adjustmentSequence:Number(J.adjustmentSequence||0)}}),U=new Map;for(const J of N)U.has(J.period)||U.set(J.period,[]),U.get(J.period).push(J);const M=Array.from(U.entries()).map(([J,te])=>(te.sort((q,Y)=>{const I=Y.createdTime||Y.payTime||0,T=q.createdTime||q.payTime||0;return I-T}),{period:J,periodKey:te[0]?.periodKey??-1,periodLabel:te[0]?.periodLabel||J,items:te}));return M.sort((J,te)=>(te.periodKey||0)-(J.periodKey||0)),M},[r]);x.useEffect(()=>{if(k.length>0){const N=k[0].period;j(U=>U[N]?U:{...U,[N]:!0})}},[k.length]);function L(N){j(U=>({...U,[N]:!U[N]}))}return t.jsx(Ls,{title:"My Documents",hideWelcome:!0,children:t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(Sw,{kind:g.kind,message:g.text,onClose:()=>p({kind:"info",text:""})}),t.jsxs("div",{className:"rounded-3xl bg-white border border-slate-200 p-6 shadow-sm",children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Payslips"}),t.jsx("div",{className:"mt-4 space-y-3",children:c?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):u?t.jsxs("div",{className:"text-sm text-red-600",children:["Error: ",u]}):k.length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"No payslips found."}):k.map(N=>{const U=!!b[N.period],M=N.items.length;return t.jsxs("div",{className:"rounded-3xl border border-slate-200 overflow-hidden",children:[t.jsxs("button",{type:"button",onClick:()=>L(N.period),className:"w-full text-left flex items-center justify-between gap-3 px-4 py-3 bg-white hover:bg-slate-50",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-sm font-medium text-slate-900 truncate",children:[N.periodLabel," ",t.jsxs("span",{className:"text-xs text-slate-500 font-normal",children:[" ",M," file",M>1?"s":""]})]}),t.jsxs("div",{className:"text-xs text-slate-600 mt-0.5",children:["Latest: ",N.items[0]?.createdAt?Tu(N.items[0].createdAt):N.items[0]?.payDateLabel||"-"]})]}),t.jsx("div",{className:"text-slate-700 font-semibold",children:U?"":"+"})]}),U?t.jsx("div",{className:"px-4 pb-4 space-y-3 bg-white",children:N.items.map(J=>{const te=Am(J.status),q=J.payslipKind==="adjustment"?"Payslip Adjustment":"Payslip";return t.jsxs("div",{className:"w-full text-left grid grid-cols-[24px_1fr_auto_auto] items-center gap-4 rounded-2xl border border-slate-200 px-4 py-3",children:[t.jsx(ww,{status:J.status}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-medium text-slate-900 truncate",children:q}),t.jsxs("div",{className:"text-xs text-slate-600 mt-0.5",children:["Pay date: ",J.payDateLabel,J.createdAt?t.jsxs("span",{className:"text-slate-500",children:["  Generated: ",Tu(J.createdAt)]}):null]})]}),t.jsx(Nw,{status:J.status}),t.jsxs("div",{className:"flex items-center gap-6 justify-end",children:[t.jsx(ap,{disabled:!te,title:"Not available yet",tone:"text-pink-600",onClick:async()=>{try{await _(J.id,J.period,q),p({kind:"success",text:"Download started."})}catch(Y){p({kind:"error",text:Y.message})}},children:"Download"}),t.jsx(ap,{disabled:!te,title:"Not available yet",tone:"text-orange-600",onClick:()=>a(`/payslips/${J.id}`),children:"View"})]})]},J.id)})}):null]},N.period)})})]}),t.jsxs("div",{className:"mt-6 rounded-3xl bg-white border border-slate-200 p-6 shadow-sm",children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Documents"}),t.jsx("div",{className:"mt-4 space-y-3",children:C?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):v.length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"No documents yet."}):v.map(N=>t.jsxs("div",{className:"w-full text-left grid grid-cols-[1fr_auto] items-center gap-4 rounded-2xl border border-slate-200 px-4 py-3",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-medium text-slate-900 truncate",children:N.title||N.originalName||"Document"}),t.jsxs("div",{className:"text-xs text-slate-600 mt-0.5",children:[Aw(N.category),N.uploadedAt?t.jsxs("span",{className:"text-slate-500",children:["  Sent: ",Tu(N.uploadedAt)]}):null]})]}),t.jsxs("div",{className:"flex items-center gap-6 justify-end",children:[t.jsx("a",{className:"text-sm font-medium text-pink-600 hover:underline",href:`http://localhost:5000${N.url}`,download:!0,children:"Download"}),t.jsx("a",{className:"text-sm font-medium text-orange-600 hover:underline",href:`http://localhost:5000${N.url}`,target:"_blank",rel:"noreferrer",children:"View"})]})]},N.id))})]})]})})}const vl="http://localhost:5000";function Kl(a=!0){const r=localStorage.getItem("token")||"",i={};return a&&(i["Content-Type"]="application/json"),r&&(i.Authorization=`Bearer ${r}`),i}async function jl(a){const r=await a.json().catch(()=>({}));if(!a.ok)throw new Error(r.message||`Request failed (${a.status})`);return r}async function Em(a,r){try{await Fl(a,r)}catch{}}async function Jb(a){try{return await La(a)}catch{return null}}async function Vb(){try{const a=await fetch(`${vl}/api/users/me`,{headers:Kl(!0)}),r=await jl(a);return await Em("profile",r),r}catch(a){const r=await Jb("profile");if(r)return r;throw a}}async function Xb(a){const r=localStorage.getItem("token")||"",i=new FormData;i.append("avatar",a);const c=await fetch(`${vl}/api/users/me/avatar`,{method:"POST",headers:r?{Authorization:`Bearer ${r}`}:{},body:i});return jl(c)}async function Qb(){const a=await fetch(`${vl}/api/users/me/avatar`,{method:"DELETE",headers:Kl(!0)});return jl(a)}async function Tw(a){const r=await fetch(`${vl}/api/users/me`,{method:"PATCH",headers:Kl(!0),body:JSON.stringify(a||{})}),i=await jl(r);return await Em("profile",i),i}async function Dw({category:a,payload:r,note:i}){const c=a==="bank"?{category:a,bankDetails:r,note:i}:{category:a,...r,note:i},m=await fetch(`${vl}/api/profile-change-requests`,{method:"POST",headers:Kl(!0),body:JSON.stringify(c)});return jl(m)}async function Rw(){const a="profile_requests";try{const r=await fetch(`${vl}/api/profile-change-requests/mine`,{headers:Kl(!0)}),i=await jl(r);return await Em(a,i),i}catch(r){const i=await Jb(a);if(i)return i;throw r}}async function Tm({status:a="pending"}={}){const r=new URLSearchParams;a&&r.set("status",a);const i=await fetch(`${vl}/api/profile-change-requests/approvals?${r.toString()}`,{headers:Kl(!0)});return jl(i)}async function Fb({currentPassword:a,newPassword:r}){const i=await fetch(`${vl}/api/users/me/password`,{method:"PATCH",headers:Kl(!0),body:JSON.stringify({currentPassword:a,newPassword:r})});return jl(i)}async function Mw(a,{status:r,reviewNote:i=""}){const c=await fetch(`${vl}/api/profile-change-requests/${a}/decision`,{method:"PATCH",headers:Kl(!0),body:JSON.stringify({status:r,reviewNote:i})});return jl(c)}function ds(...a){return a.filter(Boolean).join(" ")}function Ow({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:ds("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold",type:"button",children:""})]})})}function np({title:a,children:r,className:i=""}){return t.jsxs("div",{className:ds("rounded-3xl bg-white border border-slate-200 p-5 shadow-sm",i),children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function rp(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?"-":r.toLocaleString()}function _w(a){return/[^A-Za-z0-9]/.test(String(a||""))}function Lw(){const[a,r]=x.useState(!0),[i,c]=x.useState(!1),[m,u]=x.useState({kind:"info",text:""}),[h,g]=x.useState("personal"),[p,b]=x.useState(null),[j,v]=x.useState(!1),[D,C]=x.useState("personal"),[z,_]=x.useState(""),[k,L]=x.useState({fullName:"",department:"",email:""}),[N,U]=x.useState({bankName:"",accountName:"",accountNumber:"",sortCode:"",iban:""}),[M,J]=x.useState([]),[te,q]=x.useState(!1),[Y,I]=x.useState({current:"",next:"",confirm:""}),[T,P]=x.useState(!1),$=x.useMemo(()=>{const E=p?.profilePhotoUrl||"";return E?E.startsWith("http")?E:`http://localhost:5000${E}`:""},[p]),le=x.useMemo(()=>{const E=Y.next||"",ne=E.length>=8,he=_w(E),ge=E.length>0&&E===(Y.confirm||"");return{okLen:ne,okSpecial:he,okMatch:ge}},[Y.next,Y.confirm]),ie=x.useMemo(()=>!!Y.current&&le.okLen&&le.okSpecial&&le.okMatch&&!T&&!i,[Y.current,le.okLen,le.okSpecial,le.okMatch,T,i]);async function W(){r(!0),u({kind:"info",text:""});try{const E=await Vb();b(E);const ne=(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}")}catch{return{}}})();localStorage.setItem("user",JSON.stringify({...ne,fullName:E.fullName,email:E.email,employeeId:E.employeeId,profilePhotoUrl:E.profilePhotoUrl||""})),L({fullName:E.fullName||"",department:E.department||"",email:E.email||""}),U({bankName:E.bankDetails?.bankName||"",accountName:E.bankDetails?.accountName||"",accountNumber:E.bankDetails?.accountNumber||"",sortCode:E.bankDetails?.sortCode||"",iban:E.bankDetails?.iban||""})}catch(E){u({kind:"error",text:E.message||"Failed to load profile."})}finally{r(!1)}}async function R(){q(!0);try{const E=await Rw();J(Array.isArray(E)?E:[])}catch(E){J([]),u({kind:"error",text:E.message||"Failed to load change requests."})}finally{q(!1)}}async function ee(E){if(!(!E||i)){c(!0),u({kind:"info",text:""});try{const ne=await Xb(E),he={...p,profilePhotoUrl:ne.profilePhotoUrl};b(he);const ge=(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}")}catch{return{}}})();localStorage.setItem("user",JSON.stringify({...ge,profilePhotoUrl:ne.profilePhotoUrl||""})),u({kind:"success",text:"Profile picture updated."})}catch(ne){u({kind:"error",text:ne.message||"Failed to upload profile picture."})}finally{c(!1)}}}async function Q(){if(!i){c(!0),u({kind:"info",text:""});try{const E=await Qb(),ne={...p,profilePhotoUrl:E.profilePhotoUrl||""};b(ne);const he=(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}")}catch{return{}}})();localStorage.setItem("user",JSON.stringify({...he,profilePhotoUrl:""})),u({kind:"success",text:"Profile picture removed."})}catch(E){u({kind:"error",text:E.message||"Failed to remove profile picture."})}finally{c(!1)}}}function H(E){C(E),_(""),v(!0),L({fullName:p?.fullName||"",department:p?.department||"",email:p?.email||""}),U({bankName:p?.bankDetails?.bankName||"",accountName:p?.bankDetails?.accountName||"",accountNumber:p?.bankDetails?.accountNumber||"",sortCode:p?.bankDetails?.sortCode||"",iban:p?.bankDetails?.iban||""})}async function ue(){if(!i){c(!0),u({kind:"info",text:""});try{const E=D==="bank"?{...N}:{...k};if(Object.keys(E).forEach(ne=>{String(E[ne]??"").trim()===""&&delete E[ne]}),!Object.keys(E).length)throw new Error("Please fill at least one field to request a change.");await Dw({category:D,payload:E,note:z}),v(!1),u({kind:"success",text:"Change request submitted. Awaiting Payroll Manager review."}),await R()}catch(E){u({kind:"error",text:E.message||"Failed to submit request."})}finally{c(!1)}}}async function w(){if(!ie){u({kind:"error",text:"Please ensure password meets requirements and confirmation matches."});return}P(!0),u({kind:"info",text:""});try{await Fb({currentPassword:Y.current,newPassword:Y.next}),I({current:"",next:"",confirm:""}),u({kind:"success",text:"Password updated successfully."})}catch(E){u({kind:"error",text:E.message||"Failed to update password."})}finally{P(!1)}}return x.useEffect(()=>{W()},[]),x.useEffect(()=>{h==="requests"&&R()},[h]),t.jsx(Ls,{title:"My Profile",hideWelcome:!0,children:t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(Ow,{kind:m.kind,message:m.text,onClose:()=>u({kind:"info",text:""})}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"Profile"}),t.jsx("div",{className:"text-sm text-slate-600",children:"Your information is managed by Payroll. If something is wrong, submit a change request."})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>H("personal"),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",type:"button",disabled:a||i,children:"Request Personal Change"}),t.jsx("button",{onClick:()=>H("bank"),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",type:"button",disabled:a||i,children:"Request Bank Change"})]})]}),a?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):p?t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[1fr_360px] gap-6",children:[t.jsxs(np,{title:"My Details",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[t.jsx("button",{onClick:()=>g("personal"),className:ds("rounded-2xl px-4 py-2 text-sm font-semibold border",h==="personal"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-700 hover:bg-slate-50"),type:"button",children:"Personal"}),t.jsx("button",{onClick:()=>g("bank"),className:ds("rounded-2xl px-4 py-2 text-sm font-semibold border",h==="bank"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-700 hover:bg-slate-50"),type:"button",children:"Bank Details"}),t.jsx("button",{onClick:()=>g("requests"),className:ds("rounded-2xl px-4 py-2 text-sm font-semibold border",h==="requests"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-700 hover:bg-slate-50"),type:"button",children:"My Requests"}),t.jsx("button",{onClick:()=>g("security"),className:ds("rounded-2xl px-4 py-2 text-sm font-semibold border",h==="security"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-700 hover:bg-slate-50"),type:"button",children:"Security"})]}),h==="personal"?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Employee Number"}),t.jsx("input",{value:p.employeeId||"",disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-900 cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Email"}),t.jsx("input",{value:p.email||"",disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-900 cursor-not-allowed"})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Full Name"}),t.jsx("input",{value:p.fullName||"",disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-900 cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Department"}),t.jsx("input",{value:p.department||"",disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-900 cursor-not-allowed"})]}),t.jsx("div",{className:"pt-2 flex justify-end",children:t.jsx("button",{onClick:()=>H("personal"),className:"rounded-2xl px-5 py-2 text-sm font-semibold border bg-white border-slate-200 hover:bg-slate-50 text-slate-900",type:"button",children:"Request change"})})]}):h==="bank"?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Bank Name"}),t.jsx("input",{value:p.bankDetails?.bankName||"",disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-900 cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Account Name"}),t.jsx("input",{value:p.bankDetails?.accountName||"",disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-900 cursor-not-allowed"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Account Number"}),t.jsx("input",{value:p.bankDetails?.accountNumber||"",disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-900 cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Sort Code"}),t.jsx("input",{value:p.bankDetails?.sortCode||"",disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-900 cursor-not-allowed"})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"IBAN"}),t.jsx("input",{value:p.bankDetails?.iban||"",disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-900 cursor-not-allowed"})]}),t.jsx("div",{className:"pt-2 flex justify-end",children:t.jsx("button",{onClick:()=>H("bank"),className:"rounded-2xl px-5 py-2 text-sm font-semibold border bg-white border-slate-200 hover:bg-slate-50 text-slate-900",type:"button",children:"Request change"})})]}):h==="security"?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3 text-sm text-slate-700",children:["Password rules: ",t.jsx("span",{className:"font-semibold",children:"minimum 8 characters"})," and include ",t.jsx("span",{className:"font-semibold",children:"at least 1 special character"}),"."]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Current password"}),t.jsx("input",{type:"password",value:Y.current,onChange:E=>I(ne=>({...ne,current:E.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",placeholder:"Enter current password"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"New password"}),t.jsx("input",{type:"password",value:Y.next,onChange:E=>I(ne=>({...ne,next:E.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",placeholder:"Enter new password"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Confirm new password"}),t.jsx("input",{type:"password",value:Y.confirm,onChange:E=>I(ne=>({...ne,confirm:E.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",placeholder:"Re-enter new password"})]}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-xs text-slate-700",children:[t.jsxs("div",{className:ds("flex items-center gap-2",le.okLen?"text-emerald-700":"text-slate-600"),children:[t.jsx("span",{children:le.okLen?"":""})," At least 8 characters"]}),t.jsxs("div",{className:ds("flex items-center gap-2 mt-1",le.okSpecial?"text-emerald-700":"text-slate-600"),children:[t.jsx("span",{children:le.okSpecial?"":""})," Contains a special character"]}),t.jsxs("div",{className:ds("flex items-center gap-2 mt-1",le.okMatch?"text-emerald-700":"text-slate-600"),children:[t.jsx("span",{children:le.okMatch?"":""})," Passwords match"]})]})]}),t.jsxs("div",{className:"pt-2 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>I({current:"",next:"",confirm:""}),className:"rounded-2xl px-5 py-2 text-sm font-semibold border bg-white border-slate-200 hover:bg-slate-50 text-slate-900",type:"button",disabled:T||i,children:"Clear"}),t.jsx("button",{onClick:w,className:ds("rounded-2xl px-5 py-2 text-sm font-semibold border",ie?"bg-slate-900 text-white border-slate-900 hover:bg-slate-800":"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed"),type:"button",disabled:!ie,children:T?"Saving...":"Save password"})]})]}):t.jsx("div",{className:"space-y-3",children:te?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):M.length===0?t.jsx("div",{className:"text-sm text-slate-700",children:"No change requests yet."}):M.map(E=>t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"flex items-start justify-between gap-3",children:t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[String(E.category||"").toUpperCase(),"  ",String(E.status||"").toUpperCase()]}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Submitted: ",rp(E.createdAt),E.reviewedAt?`  Reviewed: ${rp(E.reviewedAt)}`:""]})]})}),t.jsxs("div",{className:"mt-2 text-xs text-slate-700",children:[t.jsx("span",{className:"font-semibold",children:"Requested:"})," ",Object.keys(E.payload||{}).join(", ")||"-"]}),E.reviewNote?t.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:[t.jsx("span",{className:"font-semibold",children:"Note:"})," ",E.reviewNote]}):null]},E._id))})]}),t.jsxs(np,{title:"Profile Photo",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[$?t.jsx("img",{src:$,alt:"Profile",className:"h-16 w-16 rounded-full object-cover border border-slate-200 bg-white"}):t.jsx("div",{className:"h-16 w-16 rounded-full border border-slate-200 bg-slate-100"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:p.fullName}),t.jsx("div",{className:"text-xs text-slate-600 truncate",children:p.email})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Upload new picture (PNG/JPG/WEBP, max 5MB)"}),t.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/webp",onChange:E=>ee(E.target.files?.[0]),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]}),t.jsx("div",{className:"mt-3 flex items-center justify-end gap-3",children:t.jsx("button",{onClick:Q,className:ds("rounded-2xl px-4 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-rose-50 text-rose-700 border-rose-200 hover:opacity-90"),type:"button",disabled:i,children:"Remove photo"})}),t.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"Employee number is system-assigned and never editable."})]})]}):t.jsx("div",{className:"text-sm text-slate-700",children:"No profile data."}),j?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>!i&&v(!1)}),t.jsx("div",{className:"absolute left-1/2 top-1/2 w-[94vw] sm:w-[860px] -translate-x-1/2 -translate-y-1/2",children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"text-xl font-semibold text-slate-900",children:["Request ",D==="bank"?"Bank":"Personal"," Change"]}),t.jsx("button",{onClick:()=>!i&&v(!1),className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button",children:""})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3 text-sm text-slate-700 mb-4",children:"Your request will be reviewed by the Payroll Manager. You cannot directly edit records."}),D==="personal"?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Full Name"}),t.jsx("input",{value:k.fullName,onChange:E=>L(ne=>({...ne,fullName:E.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Department"}),t.jsx("input",{value:k.department,onChange:E=>L(ne=>({...ne,department:E.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Email"}),t.jsx("input",{value:k.email,onChange:E=>L(ne=>({...ne,email:E.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Bank Name"}),t.jsx("input",{value:N.bankName,onChange:E=>U(ne=>({...ne,bankName:E.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Account Name"}),t.jsx("input",{value:N.accountName,onChange:E=>U(ne=>({...ne,accountName:E.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Account Number"}),t.jsx("input",{value:N.accountNumber,onChange:E=>U(ne=>({...ne,accountNumber:E.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Sort Code"}),t.jsx("input",{value:N.sortCode,onChange:E=>U(ne=>({...ne,sortCode:E.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"IBAN"}),t.jsx("input",{value:N.iban,onChange:E=>U(ne=>({...ne,iban:E.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Extra note (optional)"}),t.jsx("textarea",{value:z,onChange:E=>_(E.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[90px] bg-white text-slate-900",placeholder:"Explain why you want this change"})]}),t.jsxs("div",{className:"pt-4 flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:()=>v(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",type:"button",disabled:i,children:"Cancel"}),t.jsx("button",{onClick:ue,className:ds("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),type:"button",disabled:i,children:i?"Submitting...":"Submit request"})]})]})]})})]}):null]})})}function _s(...a){return a.filter(Boolean).join(" ")}function om(a){return String(a).padStart(2,"0")}function Du(a=new Date){return`${a.getFullYear()}-${om(a.getMonth()+1)}`}function Ru(){const a=new Date;return`${a.getFullYear()}-${om(a.getMonth()+1)}-${om(a.getDate())}`}function Uw(a){const[r,i]=a.split("-").map(Number);return new Date(r,i-1,1).toLocaleDateString(void 0,{month:"long",year:"numeric"})}function zw(a,r){if(!a||!r)return 0;const[i,c]=a.split(":").map(Number),[m,u]=r.split(":").map(Number);if([i,c,m,u].some(b=>Number.isNaN(b)))return 0;const h=i*60+c,p=m*60+u-h;return p<=0?0:Math.round(p/60*100)/100}function ip(a){return a==="inprogress"||a==="pending"}function jo({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:_s("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold","aria-label":"Close message",type:"button",children:""})]})})}function Mu({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[760px]",zClass:u="z-50"}){return a?t.jsxs("div",{className:_s("fixed inset-0",u),children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:c}),t.jsx("div",{className:_s("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden relative",onClick:h=>h.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700","aria-label":"Close",type:"button",children:""})]}),t.jsx("div",{className:"p-6 text-slate-900 [&_select]:text-slate-900 [&_input]:text-slate-900 [&_textarea]:text-slate-900 [&_option]:text-slate-900",children:i})]})})]}):null}function op({status:a,pending:r}){if(r)return t.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border bg-amber-50 text-amber-700 border-amber-100",children:"Pending sync"});const i={inprogress:"bg-sky-50 text-sky-700 border-sky-100",accepted:"bg-emerald-50 text-emerald-700 border-emerald-100",cancelled:"bg-rose-50 text-rose-700 border-rose-100",rejected:"bg-rose-50 text-rose-700 border-rose-100"},c={inprogress:"In progress",accepted:"Accepted",cancelled:"Cancelled",rejected:"Rejected"};return t.jsx("span",{className:_s("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",i[a]||i.inprogress),children:c[a]||"In progress"})}function cp({title:a,children:r,className:i=""}){return t.jsxs("div",{className:_s("rounded-3xl bg-white border border-slate-200 p-5 shadow-sm",i),children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function Bw(){const[a,r]=x.useState(()=>Du(new Date)),[i,c]=x.useState([]),[m,u]=x.useState({totalHours:0,pendingCount:0}),[h,g]=x.useState(!0),[p,b]=x.useState(!1),[j,v]=x.useState({kind:"info",text:""}),[D,C]=x.useState(!1),[z,_]=x.useState(null),[k,L]=x.useState(null),N=D||!!z||!!k,[U,M]=x.useState({date:Ru(),startTime:"",endTime:"",hours:"",reason:""}),J=x.useMemo(()=>{const W=Number(U.hours);return!Number.isNaN(W)&&W>0?W:zw(U.startTime,U.endTime)},[U.hours,U.startTime,U.endTime]);function te(){const[W,R]=a.split("-").map(Number),ee=new Date(W,R-2,1);r(Du(ee))}function q(){const[W,R]=a.split("-").map(Number),ee=new Date(W,R,1);r(Du(ee))}function Y(){M({date:Ru(),startTime:"",endTime:"",hours:"",reason:""})}async function I(W=a){g(!0);try{const[R,ee]=await Promise.all([km(W),$b(W)]);c(Array.isArray(R)?R:[]),u(ee||{totalHours:0,pendingCount:0})}catch(R){v({kind:"error",text:R.message||"Failed to load overtime."})}finally{g(!1)}}x.useEffect(()=>{I(a)},[a]),x.useEffect(()=>{function W(R){(R?.detail?.modules||[]).includes("overtime")&&(I(a),v({kind:"success",text:"Synced changes."}))}return window.addEventListener("outbox:flushed",W),()=>window.removeEventListener("outbox:flushed",W)},[a]);function T(){v({kind:"info",text:""}),Y(),C(!0)}function P(W){v({kind:"info",text:""}),_(W),M({date:W.date||Ru(),startTime:W.startTime||"",endTime:W.endTime||"",hours:W.hours!=null?String(W.hours):"",reason:W.reason||""})}async function $(){if(!p){b(!0),v({kind:"info",text:""});try{if(!U.date)throw new Error("Date is required.");if(!String(U.reason).trim())throw new Error("Reason is required.");if(!J||J<=0)throw new Error("Hours must be > 0.");const W=await ZN({date:U.date,startTime:U.startTime,endTime:U.endTime,hours:J,reason:U.reason}),R=String(U.date).slice(0,7);if(C(!1),W?.queued){r(R),await I(R),v({kind:"success",text:"You are offline. Overtime queued and will send when online."});return}r(R),await I(R),v({kind:"success",text:"Overtime submitted."})}catch(W){v({kind:"error",text:W.message||"Failed to submit overtime."})}finally{b(!1)}}}async function le(){if(!p){b(!0),v({kind:"info",text:""});try{if(!z?.id)throw new Error("Missing record id.");if(!String(U.reason).trim())throw new Error("Reason is required.");if(!J||J<=0)throw new Error("Hours must be > 0.");const W=await IN(z.id,{date:U.date,startTime:U.startTime,endTime:U.endTime,hours:J,reason:U.reason}),R=String(U.date).slice(0,7);if(_(null),r(R),await I(R),W?.queued){v({kind:"success",text:"You are offline. Update queued and will sync when online."});return}v({kind:"success",text:"Overtime updated."})}catch(W){v({kind:"error",text:W.message||"Failed to update overtime."})}finally{b(!1)}}}async function ie(W){if(!p){b(!0),v({kind:"info",text:""});try{const R=await WN(W);if(await I(a),R?.queued){v({kind:"success",text:"You are offline. Delete queued and will apply when online."});return}v({kind:"success",text:"Overtime deleted."})}catch(R){v({kind:"error",text:R.message||"Failed to delete overtime."})}finally{b(!1)}}}return t.jsx(Ls,{title:"Overtime",hideWelcome:!0,children:t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[N?null:t.jsx(jo,{kind:j.kind,message:j.text,onClose:()=>v({kind:"info",text:""})}),t.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"Overtime"}),t.jsx("div",{className:"text-sm text-slate-600",children:"Log overtime and track status."})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",onClick:te,className:"h-10 w-10 rounded-2xl border border-slate-200 hover:bg-slate-100 text-slate-700 font-bold",disabled:h,children:""}),t.jsx("div",{className:"text-sm font-semibold text-slate-800 min-w-[160px] text-center",children:Uw(a)}),t.jsx("button",{type:"button",onClick:q,className:"h-10 w-10 rounded-2xl border border-slate-200 hover:bg-slate-100 text-slate-700 font-bold",disabled:h,children:""}),t.jsx("button",{type:"button",onClick:T,className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",disabled:h,children:"Log Overtime"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[1fr_360px] gap-6",children:[t.jsx(cp,{title:"My Overtime Logs",children:h?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):i.length===0?t.jsx("div",{className:"text-sm text-slate-700",children:"No overtime logged for this month."}):t.jsx("div",{className:"space-y-3",children:i.map(W=>{const R=ip(W.status),ee=ip(W.status);return t.jsx("div",{className:"rounded-2xl border border-slate-200 px-4 py-3 bg-white",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[W.date,"  ",W.hours," hour(s)"]}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:W.startTime&&W.endTime?`${W.startTime}  ${W.endTime}`:"Manual hours"}),t.jsx("div",{className:"text-xs text-slate-700 mt-2 break-words",children:W.reason}),W.managerNote?t.jsxs("div",{className:"mt-2 rounded-xl bg-slate-50 border border-slate-200 px-3 py-2 text-xs text-slate-700",children:[t.jsx("span",{className:"font-semibold",children:"Manager note:"})," ",W.managerNote]}):null]}),t.jsxs("div",{className:"flex flex-col items-end gap-2 shrink-0",children:[t.jsx(op,{status:W.status,pending:!!W._pending}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{type:"button",disabled:!R||p,onClick:()=>P(W),className:_s("text-sm font-semibold",R&&!p?"text-slate-700 hover:underline":"text-slate-300 cursor-not-allowed"),title:R?"Edit":"Only In progress requests can be edited",children:"Edit"}),t.jsx("button",{type:"button",disabled:!ee||p,onClick:()=>{v({kind:"info",text:""}),L(W)},className:_s("text-sm font-semibold",ee&&!p?"text-slate-400 hover:text-slate-600":"text-slate-300 cursor-not-allowed"),title:ee?"Delete":"Only In progress requests can be deleted",children:"Delete"})]})]})]})},W.id)})})}),t.jsxs(cp,{title:"This Month Summary",className:"border-indigo-500/20",children:[t.jsxs("div",{className:"rounded-3xl bg-violet-50 border border-violet-100 p-5",children:[t.jsx("div",{className:"text-xs text-slate-600",children:"Total Hours"}),t.jsx("div",{className:"text-3xl font-semibold text-slate-900 mt-1",children:m.totalHours??0})]}),t.jsxs("div",{className:"mt-4 rounded-3xl bg-sky-50 border border-sky-100 p-5",children:[t.jsx("div",{className:"text-xs text-slate-600",children:"In progress"}),t.jsx("div",{className:"text-3xl font-semibold text-slate-900 mt-1",children:m.pendingCount??0})]}),t.jsx("button",{type:"button",onClick:()=>I(a),className:"mt-4 w-full rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50",disabled:p,children:"Refresh"})]})]}),t.jsx(Mu,{open:D,title:"Log Overtime",onClose:()=>!p&&C(!1),widthClass:"sm:w-[760px]",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(jo,{kind:j.kind,message:j.text,onClose:()=>v({kind:"info",text:""})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Date"}),t.jsx("input",{type:"date",value:U.date,onChange:W=>M(R=>({...R,date:W.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Hours *"}),t.jsx("input",{type:"number",step:"0.25",min:"0",value:U.hours,onChange:W=>M(R=>({...R,hours:W.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",placeholder:"e.g. 2"}),t.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"If empty, hours are calculated from start/end time."})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Start Time"}),t.jsx("input",{type:"time",value:U.startTime,onChange:W=>M(R=>({...R,startTime:W.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"End Time"}),t.jsx("input",{type:"time",value:U.endTime,onChange:W=>M(R=>({...R,endTime:W.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]})]}),t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3 text-sm",children:["Calculated Hours: ",t.jsx("span",{className:"font-semibold text-slate-900",children:J||0})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Reason *"}),t.jsx("textarea",{value:U.reason,onChange:W=>M(R=>({...R,reason:W.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[120px] bg-white",placeholder:"Short reason for overtime"})]}),t.jsxs("div",{className:"pt-2 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>C(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-rose-50 text-rose-600 hover:opacity-90",disabled:p,children:"Cancel"}),t.jsx("button",{type:"button",onClick:$,className:_s("rounded-2xl px-5 py-2 text-sm font-semibold border",p?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:p,children:p?"Submitting...":"Submit"})]})]})}),t.jsx(Mu,{open:!!z,title:"Edit Overtime",onClose:()=>!p&&_(null),widthClass:"sm:w-[760px]",children:z?t.jsxs("div",{className:"space-y-4",children:[t.jsx(jo,{kind:j.kind,message:j.text,onClose:()=>v({kind:"info",text:""})}),t.jsxs("div",{className:"text-sm text-slate-600",children:["Only ",t.jsx("span",{className:"font-semibold",children:"In progress"})," requests can be edited."]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Date"}),t.jsx("input",{type:"date",value:U.date,onChange:W=>M(R=>({...R,date:W.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Hours *"}),t.jsx("input",{type:"number",step:"0.25",min:"0",value:U.hours,onChange:W=>M(R=>({...R,hours:W.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",placeholder:"e.g. 2"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Start Time"}),t.jsx("input",{type:"time",value:U.startTime,onChange:W=>M(R=>({...R,startTime:W.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"End Time"}),t.jsx("input",{type:"time",value:U.endTime,onChange:W=>M(R=>({...R,endTime:W.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]})]}),t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3 text-sm",children:["Calculated Hours: ",t.jsx("span",{className:"font-semibold text-slate-900",children:J||0})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Reason *"}),t.jsx("textarea",{value:U.reason,onChange:W=>M(R=>({...R,reason:W.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[120px] bg-white"})]}),t.jsxs("div",{className:"pt-2 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>_(null),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-rose-50 text-rose-600 hover:opacity-90",disabled:p,children:"Cancel"}),t.jsx("button",{type:"button",onClick:le,className:_s("rounded-2xl px-5 py-2 text-sm font-semibold border",p?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:p,children:p?"Saving...":"Save"})]})]}):null}),t.jsx(Mu,{open:!!k,title:"Delete overtime?",onClose:()=>!p&&L(null),widthClass:"sm:w-[520px]",zClass:"z-[9999]",children:k?t.jsxs("div",{className:"space-y-4",children:[t.jsx(jo,{kind:j.kind,message:j.text,onClose:()=>v({kind:"info",text:""})}),t.jsx("div",{className:"text-sm text-slate-700",children:"Are you sure you want to delete this overtime request?"}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[k.date,"  ",k.hours," hour(s)"]}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:k.startTime&&k.endTime?`${k.startTime}  ${k.endTime}`:"Manual hours"}),t.jsx("div",{className:"mt-2",children:t.jsx(op,{status:k.status,pending:!!k._pending})})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-1",children:[t.jsx("button",{type:"button",onClick:()=>L(null),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white text-slate-700 hover:bg-slate-50",disabled:p,children:"Cancel"}),t.jsx("button",{type:"button",onClick:async()=>{const W=k.id;L(null),await ie(W)},className:_s("rounded-2xl px-5 py-2 text-sm font-semibold border",p?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-rose-50 text-rose-700 border-rose-200 hover:opacity-90"),disabled:p,children:p?"Deleting...":"Delete"})]})]}):null})]})})}const Zl="http://localhost:5000/api/employees";function Il(){return{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}async function Wl(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok)throw new Error(i?.message||`Request failed (${a.status})`);return i}async function Lr(){const a=await fetch(`${Zl}`,{headers:Il()});return Wl(a)}async function $w(){const a=await fetch(`${Zl}/delegates`,{headers:Il()});return Wl(a)}async function qw(a){const r=await fetch(`${Zl}`,{method:"POST",headers:Il(),body:JSON.stringify(a)});return Wl(r)}async function Hw(a,r){const i=await fetch(`${Zl}/${a}`,{method:"PUT",headers:Il(),body:JSON.stringify(r)});return Wl(i)}async function Pw(a){const r=await fetch(`${Zl}/${a}`,{method:"DELETE",headers:Il()});return Wl(r)}async function Yw(a){const r=localStorage.getItem("token"),i=await fetch(`http://localhost:5000/api/employees/${a}/activate`,{method:"POST",headers:{Authorization:`Bearer ${r}`}}),c=await i.json().catch(()=>({}));if(!i.ok)throw new Error(c.message||"Failed to activate employee");return c}async function Gw(a,r){const i=await fetch(`${Zl}/${a}/terminate`,{method:"POST",headers:Il(),body:JSON.stringify({terminationDate:r})});return Wl(i)}async function Jw(a,r){const i=await fetch(`${Zl}/${a}/rehire`,{method:"POST",headers:Il(),body:JSON.stringify({rehireDate:r})});return Wl(i)}async function Vw(a){const r=await fetch(`${Zl}/bulk`,{method:"POST",headers:Il(),body:JSON.stringify({csvText:a})});return Wl(r)}const Xw="http://localhost:5000";function js(...a){return a.filter(Boolean).join(" ")}function dp(a){return a.toLocaleDateString(void 0,{month:"long",year:"numeric"})}function Dm(a){const r=a.getFullYear(),i=String(a.getMonth()+1).padStart(2,"0"),c=String(a.getDate()).padStart(2,"0");return`${r}-${i}-${c}`}function Vo(a){const[r,i,c]=(a||"").split("-").map(Number);return!r||!i||!c?null:new Date(r,i-1,c)}function Kb(a){return new Date(a.getFullYear(),a.getMonth(),1)}function Qw(a){return new Date(a.getFullYear(),a.getMonth()+1,0)}function No(a,r){return new Date(a.getFullYear(),a.getMonth()+r,1)}function up(a){return a==="inprogress"||a==="pending"}function wo(a){const r=(a||"").toLowerCase();return r.includes("sick")?"Sick Leave":r.includes("annual")?"Annual Leave":r.includes("wedding")?"Wedding Leave":r.includes("unpaid")?"Unpaid Leave":r.includes("work")?"Work From Home":a||"Annual Leave"}function mp(a,r){const i=Vo(a),c=Vo(r);if(!i||!c)return"-";const m={day:"2-digit",month:"short",year:"numeric"};return`${i.toLocaleDateString(void 0,m)}  ${c.toLocaleDateString(void 0,m)}`}function xp(a){const r=new Date(a);return Number.isNaN(r.getTime())?null:Dm(r)}function fp(a){try{const r=new Date(a);return Number.isNaN(r.getTime())?"":r.toISOString().slice(0,10)}catch{return""}}function Fw(a){const r={};return[{md:"01-01",label:"New Years Day"},{md:"01-02",label:"New Year Holiday"},{md:"02-01",label:"Abolition of Slavery"},{md:"03-12",label:"Independence Day"},{md:"05-01",label:"Labour Day"},{md:"11-02",label:"Arrival of Indentured Labourers"},{md:"12-25",label:"Christmas Day"}].forEach(c=>{r[`${a}-${c.md}`]=c.label}),r}function Kw({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:js("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold","aria-label":"Close message",type:"button",children:""})]})})}function hp({status:a}){const r={inprogress:"bg-sky-50 text-sky-700 border-sky-100",accepted:"bg-emerald-50 text-emerald-700 border-emerald-100",cancelled:"bg-rose-50 text-rose-700 border-rose-100",pending:"bg-amber-50 text-amber-700 border-amber-100",rejected:"bg-rose-50 text-rose-700 border-rose-100"},i={inprogress:"In progress",accepted:"Accepted",cancelled:"Cancelled",pending:"Pending sync",rejected:"Rejected"};return t.jsx("span",{className:js("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.inprogress),children:i[a]||"In progress"})}function So({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[900px]",zClass:u="z-50"}){return a?t.jsxs("div",{className:js("fixed inset-0",u),children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:c}),t.jsx("div",{className:js("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden relative",onClick:h=>h.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700","aria-label":"Close",type:"button",children:""})]}),t.jsx("div",{className:"p-6 text-slate-900 [&_select]:text-slate-900 [&_input]:text-slate-900 [&_textarea]:text-slate-900 [&_option]:text-slate-900",children:i})]})})]}):null}function cl({label:a,value:r}){return t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3",children:[t.jsx("div",{className:"text-slate-500 text-xs",children:a}),t.jsx("div",{className:"font-semibold text-slate-900",children:r})]})}function pp({valueMonth:a,selectedDates:r=[],onToggleDate:i,dayBadges:c={},holidaysMap:m={},readOnly:u=!1}){const h=Kb(a),g=Qw(a),p=h.getDay(),b=g.getDate(),j=[];for(let C=0;C<p;C++)j.push(null);for(let C=1;C<=b;C++)j.push(new Date(a.getFullYear(),a.getMonth(),C));for(;j.length%7!==0;)j.push(null);const v=x.useMemo(()=>new Set(r),[r]),D=["SUN","MON","TUE","WED","THU","FRI","SAT"];return t.jsx("div",{className:"rounded-3xl bg-white border border-slate-200 p-5",children:t.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[D.map(C=>t.jsx("div",{className:"text-[11px] text-slate-500 font-semibold text-center py-1",children:C},C)),j.map((C,z)=>{if(!C)return t.jsx("div",{className:"h-16 rounded-xl bg-transparent"},z);const _=Dm(C),k=v.has(_),L=c[_]||[],N=m[_];return t.jsxs("button",{type:"button",disabled:u,onClick:()=>i?.(_),className:js("h-16 rounded-2xl border text-left px-2 py-2 transition",k?"border-slate-900 bg-slate-900/5":"border-slate-100 bg-white hover:bg-slate-50",u?"cursor-default hover:bg-white":""),children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:C.getDate()}),N?t.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-amber-50 border border-amber-100 text-amber-700 truncate max-w-[72px]",children:"Holiday"}):null]}),N?t.jsx("div",{className:"mt-1 text-[10px] text-amber-700 truncate",children:N}):null,L.length>0?t.jsxs("div",{className:js("mt-1 space-y-1",N?"mt-0.5":""),children:[L.slice(0,2).map((U,M)=>t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:js("inline-block h-2 w-2 rounded-full",U.kind==="accepted"?"bg-emerald-300":U.kind==="cancelled"?"bg-rose-300":U.kind==="pending"?"bg-amber-300":"bg-sky-300")}),t.jsx("span",{className:"text-[10px] text-slate-600 truncate",children:U.text})]},M)),L.length>2?t.jsxs("div",{className:"text-[10px] text-slate-500",children:["+ ",L.length-2," more"]}):null]}):null]},z)})]})})}function Zw(){const a=Ss(),[r,i]=x.useState(()=>Kb(new Date)),[c,m]=x.useState([]),[u,h]=x.useState({annualTotal:0,sickTotal:0,weddingTotal:0,annualUsed:0,sickUsed:0,weddingUsed:0,annualRemaining:0,sickRemaining:0,weddingRemaining:0}),[g,p]=x.useState(!0),[b,j]=x.useState(!1),[v,D]=x.useState({kind:"info",text:""}),[C,z]=x.useState([]),[_,k]=x.useState(!1),[L,N]=x.useState({ok:!0,text:""}),U=x.useRef(0),[M,J]=x.useState(!1),[te,q]=x.useState(!1),[Y,I]=x.useState(!1),[T,P]=x.useState(null),[$,le]=x.useState([]),[ie,W]=x.useState("Annual Leave"),[R,ee]=x.useState(""),[Q,H]=x.useState(""),ue=x.useMemo(()=>Fw(r.getFullYear()),[r]),w=x.useMemo(()=>{const S={};for(const xe of c){const fe=Vo(xe.start),He=Vo(xe.end);if(!fe||!He)continue;const We=new Date(fe);for(;We<=He;){const me=Dm(We);S[me]=S[me]||[],S[me].push({kind:xe.status==="accepted"?"accepted":xe.status==="cancelled"?"cancelled":xe.status==="pending"?"pending":"inprogress",text:wo(xe.type)}),We.setDate(We.getDate()+1)}}return S},[c]);function E(S){const xe=xp(S.start)||S.start,fe=xp(S.end)||S.end;return{id:S.id||S._id,type:wo(S.type),start:xe,end:fe,status:S.status||"inprogress",delegate:S.delegate||"",comments:S.comments||"",decisionNote:S.decisionNote||"",decidedByRole:S.decidedByRole||"",decidedAt:S.decidedAt||"",createdAt:S.createdAt||""}}async function ne(){p(!0),D({kind:"info",text:""});try{const[S,xe]=await Promise.all([Bb(),VN()]);m(Array.isArray(S)?S.map(E):[]),h({annualTotal:xe?.annualTotal??0,sickTotal:xe?.sickTotal??0,weddingTotal:xe?.weddingTotal??0,annualUsed:xe?.annualUsed??0,sickUsed:xe?.sickUsed??0,weddingUsed:xe?.weddingUsed??0,annualRemaining:xe?.annualRemaining??0,sickRemaining:xe?.sickRemaining??0,weddingRemaining:xe?.weddingRemaining??0})}catch(S){D({kind:"error",text:S.message||"Failed to load leave data."})}finally{p(!1)}}async function he(){k(!0);try{const S=await $w(),xe=(Array.isArray(S)?S:[]).map(fe=>{const He=String(fe?.id||fe?._id||"").trim();if(!He)return null;const We=String(fe?.fullName||fe?.name||fe?.email||"Employee").trim(),me=String(fe?.employeeNumber||fe?.employeeId||"").trim(),Pt=String(fe?.email||"").trim(),Oe=`${We}${me?`  ${me}`:""}${Pt?`  ${Pt}`:""}`;return{id:He,label:Oe}}).filter(Boolean);xe.sort((fe,He)=>fe.label.localeCompare(He.label)),z(xe)}catch{z([])}finally{k(!1)}}x.useEffect(()=>{if(!localStorage.getItem("token")){a("/login");return}ne(),he()},[]),x.useEffect(()=>{async function S(xe){(xe?.detail?.modules||[]).includes("leave")&&(await ne(),D({kind:"success",text:"Synced leave changes."}))}return window.addEventListener("outbox:flushed",S),()=>window.removeEventListener("outbox:flushed",S)},[]);function ge(S){le(xe=>{const fe=new Set(xe);return fe.has(S)?fe.delete(S):fe.add(S),Array.from(fe).sort()})}function Ne(){le([]),W("Annual Leave"),ee(""),H(""),N({ok:!0,text:""}),J(!0)}const ke=$.length,ce=ie==="Sick Leave"?u.sickRemaining:ie==="Wedding Leave"?u.weddingRemaining:u.annualRemaining,ve=ie==="Annual Leave"||ie==="Sick Leave"||ie==="Wedding Leave",Me=ke>0&&(!ve||ke<=ce)&&(!R||L.ok);async function se(S){const xe=localStorage.getItem("token");if(!xe)throw new Error("Not authenticated");const fe=await fetch(`${Xw}${S}`,{headers:{Authorization:`Bearer ${xe}`}});if(fe.status===401)throw localStorage.removeItem("token"),a("/login"),new Error("Session expired. Please login again.");const He=await fe.json().catch(()=>({}));if(!fe.ok)throw new Error(He?.message||"Request failed");return He}async function K({delegateId:S,startDate:xe,endDate:fe,setWarning:He}){const We=++U.current;try{const me=new URLSearchParams;me.set("employeeId",S),me.set("startDate",xe),me.set("endDate",fe);const Pt=await se(`/api/leave/delegate-availability?${me.toString()}`);if(We!==U.current)return;if(Pt?.available)He({ok:!0,text:""});else{const Oe=Pt?.conflict||null,xs=Oe?.start?fp(Oe.start):"",ta=Oe?.end?fp(Oe.end):"",Ua=Oe?.type||"leave";He({ok:!1,text:`Delegate is not available (already has ${Ua}${xs&&ta?`: ${xs} to ${ta}`:""}). Please choose someone else.`})}}catch{if(We!==U.current)return;He({ok:!0,text:""})}}x.useEffect(()=>{const S=$[0],xe=$[$.length-1];if(M){if(!R||!S||!xe){N({ok:!0,text:""});return}K({delegateId:R,startDate:S,endDate:xe,setWarning:N})}},[M,R,$.join("|")]);function be(S){const xe=String(S||"").trim();return xe?C.find(He=>He.id===xe)?.label||"Selected delegate":""}async function Z(){if(!Me||b)return;const S=$[0],xe=$[$.length-1];j(!0),D({kind:"info",text:""});try{const fe=await XN({type:ie,startDate:S,endDate:xe,delegate:R,comments:Q});if(J(!1),fe?.queued){const We={id:`local_${fe.queueId}`,type:ie,start:S,end:xe,status:"pending",delegate:R,comments:Q,createdAt:new Date().toISOString()};m(me=>[We,...me||[]]),D({kind:"success",text:"You are offline. Leave request queued and will send when online."});return}D({kind:"success",text:"Leave request submitted."}),await ne()}catch(fe){D({kind:"error",text:fe.message})}finally{j(!1)}}async function $e(S){if(!b){j(!0),D({kind:"info",text:""});try{if(String(S).startsWith("local_")){m(fe=>fe.filter(He=>String(He.id)!==String(S))),D({kind:"success",text:"Pending request removed locally."});return}if((await QN(S))?.queued){m(fe=>fe.filter(He=>String(He.id)!==String(S))),D({kind:"success",text:"You are offline. Delete queued and will apply when online."});return}D({kind:"success",text:"Request deleted."}),await ne()}catch(xe){D({kind:"error",text:xe.message})}finally{j(!1)}}}return t.jsx(Ls,{title:"Leave Module",hideWelcome:!0,children:t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(Kw,{kind:v.kind,message:v.text,onClose:()=>D({kind:"info",text:""})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[t.jsxs("button",{type:"button",onClick:Ne,className:"rounded-3xl bg-violet-50 border border-violet-100 p-5 text-left hover:opacity-95 transition",disabled:g||b,children:[t.jsx("div",{className:"inline-flex rounded-2xl bg-violet-600 text-white px-4 py-3 font-semibold",children:"Request Absence"}),t.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:["Remaining: AL ",u.annualRemaining,"  SL ",u.sickRemaining,"  WL ",u.weddingRemaining]})]}),t.jsxs("button",{type:"button",onClick:()=>q(!0),className:"rounded-3xl bg-rose-50 border border-rose-100 p-5 text-left hover:opacity-95 transition",disabled:g,children:[t.jsx("div",{className:"inline-flex rounded-2xl bg-rose-600 text-white px-4 py-3 font-semibold",children:"Absence Status"}),t.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:["In progress: ",c.filter(S=>up(S.status)).length]})]}),t.jsxs("button",{type:"button",onClick:()=>I(!0),className:"rounded-3xl bg-sky-50 border border-sky-100 p-5 text-left hover:opacity-95 transition",disabled:g,children:[t.jsx("div",{className:"inline-flex rounded-2xl bg-sky-700 text-white px-4 py-3 font-semibold",children:"Leave Balance"}),t.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:["Used: AL ",u.annualUsed,"  SL ",u.sickUsed,"  WL ",u.weddingUsed]})]})]}),t.jsxs("div",{className:"rounded-3xl bg-white border border-slate-200 p-5 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-center gap-6 mb-4",children:[t.jsx("button",{type:"button",onClick:()=>i(S=>No(S,-1)),className:"h-10 w-10 rounded-2xl border border-slate-200 hover:bg-slate-50 text-slate-700 font-bold",disabled:g,children:""}),t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:dp(r)}),t.jsx("button",{type:"button",onClick:()=>i(S=>No(S,1)),className:"h-10 w-10 rounded-2xl border border-slate-200 hover:bg-slate-50 text-slate-700 font-bold",disabled:g,children:""})]}),g?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):t.jsx(pp,{valueMonth:r,dayBadges:w,holidaysMap:ue,readOnly:!0})]}),t.jsx(So,{open:M,title:"Request Absence",onClose:()=>!b&&J(!1),widthClass:"sm:w-[980px]",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"text-sm text-slate-600",children:"Select your date(s)"}),t.jsxs("div",{className:"text-xs text-slate-500",children:["Selected: ",t.jsx("span",{className:"font-semibold",children:$.length})]})]}),t.jsxs("div",{className:"flex items-center justify-center gap-6 mb-4",children:[t.jsx("button",{type:"button",onClick:()=>i(S=>No(S,-1)),className:"h-10 w-10 rounded-2xl border border-slate-200 hover:bg-slate-50 text-slate-700 font-bold",children:""}),t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:dp(r)}),t.jsx("button",{type:"button",onClick:()=>i(S=>No(S,1)),className:"h-10 w-10 rounded-2xl border border-slate-200 hover:bg-slate-50 text-slate-700 font-bold",children:""})]}),t.jsx(pp,{valueMonth:r,selectedDates:$,onToggleDate:ge,dayBadges:w,holidaysMap:ue})]}),t.jsxs("div",{className:"rounded-3xl border border-slate-200 p-5 bg-white",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Request details"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3 text-sm",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Annual remaining"}),t.jsx("span",{className:"font-semibold text-slate-900",children:u.annualRemaining})]}),t.jsxs("div",{className:"flex items-center justify-between mt-1",children:[t.jsx("span",{className:"text-slate-600",children:"Sick remaining"}),t.jsx("span",{className:"font-semibold text-slate-900",children:u.sickRemaining})]}),t.jsxs("div",{className:"flex items-center justify-between mt-1",children:[t.jsx("span",{className:"text-slate-600",children:"Wedding remaining"}),t.jsx("span",{className:"font-semibold text-slate-900",children:u.weddingRemaining})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Type of leave"}),t.jsxs("select",{value:ie,onChange:S=>W(S.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",children:[t.jsx("option",{value:"Annual Leave",children:"Annual Leave"}),t.jsx("option",{value:"Sick Leave",children:"Sick Leave"}),t.jsx("option",{value:"Wedding Leave",children:"Wedding Leave"}),t.jsx("option",{value:"Unpaid Leave",children:"Unpaid Leave"}),t.jsx("option",{value:"Work From Home",children:"Work From Home"})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Delegate (optional)"}),t.jsxs("select",{value:R,onChange:S=>ee(S.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",disabled:_||b,children:[t.jsx("option",{value:"",children:"No delegate"}),C.map(S=>t.jsx("option",{value:S.id,children:S.label},S.id))]}),!L.ok&&R?t.jsx("div",{className:"mt-2 text-xs font-semibold text-rose-600",children:L.text}):null,L.ok&&R?t.jsxs("div",{className:"mt-2 text-[11px] text-slate-500",children:["Selected: ",t.jsx("span",{className:"font-semibold text-slate-700",children:be(R)})]}):null]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Comments"}),t.jsx("textarea",{value:Q,onChange:S=>H(S.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[120px] bg-white text-slate-900 placeholder:text-slate-400",placeholder:"Optional"})]}),ve&&ke>ce?t.jsxs("div",{className:"text-xs text-rose-600 font-semibold",children:["Not enough balance for ",ie,"."]}):null,t.jsxs("div",{className:"pt-2 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>J(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-rose-50 text-rose-600 hover:opacity-90",disabled:b,children:"Cancel"}),t.jsx("button",{type:"button",disabled:!Me||b,onClick:Z,className:js("rounded-2xl px-5 py-2 text-sm font-semibold border",!Me||b?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),title:L.ok?"":"Delegate is not available for selected dates",children:b?"Submitting...":"Submit"})]})]})]})]})}),t.jsx(So,{open:te,title:"Absence Status",onClose:()=>q(!1),widthClass:"sm:w-[900px]",children:t.jsx("div",{className:"space-y-3",children:c.length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"No requests yet."}):c.map(S=>{const xe=up(S.status);return t.jsxs("div",{className:"grid grid-cols-[24px_1fr_auto_auto] items-center gap-4 rounded-2xl border border-slate-200 px-4 py-3",children:[t.jsx("span",{className:js("inline-block h-3 w-3 rounded-full",S.status==="accepted"?"bg-emerald-300":S.status==="cancelled"?"bg-rose-300":S.status==="pending"?"bg-amber-300":"bg-sky-300")}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:mp(S.start,S.end)}),t.jsx("div",{className:"text-xs text-slate-600 mt-0.5",children:wo(S.type)}),S.delegate?t.jsxs("div",{className:"mt-1 text-xs text-slate-600 truncate",children:[t.jsx("span",{className:"font-semibold",children:"Delegate:"})," ",be(S.delegate)]}):null]}),t.jsx(hp,{status:S.status}),t.jsx("div",{className:"flex items-center gap-4 justify-end",children:t.jsx("button",{type:"button",onClick:()=>{!xe||b||(q(!1),P(S))},className:js("text-sm font-semibold",xe&&!b?"text-slate-400 hover:text-slate-600":"text-slate-300 cursor-not-allowed"),title:xe?"Delete":"Only In progress / pending can be deleted",disabled:!xe||b,children:"Delete"})})]},S.id)})})}),t.jsx(So,{open:Y,title:"Leave Balance",onClose:()=>I(!1),widthClass:"sm:w-[760px]",children:t.jsxs("div",{className:"space-y-5",children:[t.jsx("div",{className:"text-sm text-slate-600",children:"Your current balance"}),t.jsxs("div",{className:"rounded-3xl border border-slate-200 p-5",children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Annual Leave"}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[t.jsx(cl,{label:"Total",value:u.annualTotal}),t.jsx(cl,{label:"Used (Accepted)",value:u.annualUsed}),t.jsx(cl,{label:"Remaining",value:u.annualRemaining})]})]}),t.jsxs("div",{className:"rounded-3xl border border-slate-200 p-5",children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Sick Leave"}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[t.jsx(cl,{label:"Total",value:u.sickTotal}),t.jsx(cl,{label:"Used (Accepted)",value:u.sickUsed}),t.jsx(cl,{label:"Remaining",value:u.sickRemaining})]})]}),t.jsxs("div",{className:"rounded-3xl border border-slate-200 p-5",children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Wedding Leave"}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[t.jsx(cl,{label:"Total",value:u.weddingTotal}),t.jsx(cl,{label:"Used (Accepted)",value:u.weddingUsed}),t.jsx(cl,{label:"Remaining",value:u.weddingRemaining})]})]})]})}),t.jsx(So,{open:!!T,title:"Delete request?",onClose:()=>!b&&P(null),widthClass:"sm:w-[520px]",zClass:"z-[9999]",children:T?t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"text-sm text-slate-700",children:"Are you sure you want to delete this leave request?"}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:mp(T.start,T.end)}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:wo(T.type)}),t.jsx("div",{className:"mt-2",children:t.jsx(hp,{status:T.status})})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-1",children:[t.jsx("button",{type:"button",onClick:()=>P(null),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white text-slate-700 hover:bg-slate-50",disabled:b,children:"Cancel"}),t.jsx("button",{type:"button",onClick:async()=>{const S=T.id;P(null),await $e(S)},className:js("rounded-2xl px-5 py-2 text-sm font-semibold border",b?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-rose-50 text-rose-700 border-rose-200 hover:opacity-90"),disabled:b,children:b?"Deleting...":"Delete"})]})]}):null})]})})}function pl(...a){return a.filter(Boolean).join(" ")}function Iw(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?"-":r.toLocaleDateString()}function Ou(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?"-":r.toLocaleString()}function bp({title:a,children:r,className:i=""}){return t.jsxs("div",{className:pl("rounded-3xl bg-white border border-slate-200 p-5 shadow-sm",i),children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function _u({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:pl("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold","aria-label":"Close message",type:"button",children:""})]})})}function gp({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[860px]",zClass:u="z-50"}){return a?t.jsxs("div",{className:pl("fixed inset-0",u),children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:c}),t.jsx("div",{className:pl("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden relative",onClick:h=>h.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700","aria-label":"Close",type:"button",children:""})]}),t.jsx("div",{className:"p-6 text-slate-900 max-h-[78vh] overflow-y-auto [&_select]:text-slate-900 [&_input]:text-slate-900 [&_textarea]:text-slate-900",children:i})]})})]}):null}function yp({status:a}){const r={not_started:"bg-slate-50 text-slate-700 border-slate-200",in_progress:"bg-sky-50 text-sky-700 border-sky-100",resolved:"bg-emerald-50 text-emerald-700 border-emerald-100",closed:"bg-slate-100 text-slate-700 border-slate-200"},i={not_started:"Not started",in_progress:"In progress",resolved:"Resolved",closed:"Closed"};return t.jsx("span",{className:pl("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.not_started),children:i[a]||"Not started"})}function vp({priority:a}){const r={low:"bg-emerald-50 text-emerald-700 border-emerald-100",medium:"bg-amber-50 text-amber-700 border-amber-100",high:"bg-rose-50 text-rose-700 border-rose-100"},i={low:"Low",medium:"Medium",high:"High"};return t.jsx("span",{className:pl("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.low),children:i[a]||"Low"})}function jp({type:a}){const r={technical:"bg-violet-50 text-violet-700 border-violet-100",payroll:"bg-indigo-50 text-indigo-700 border-indigo-100"},i={technical:"Technical",payroll:"Payroll"};return t.jsx("span",{className:pl("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.technical),children:i[a]||"Technical"})}function Np(){return t.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border bg-amber-50 text-amber-700 border-amber-100",children:"Pending sync"})}function Ww(){const[a,r]=x.useState(!0),[i,c]=x.useState(!1),[m,u]=x.useState({kind:"info",text:""}),[h,g]=x.useState({kind:"info",text:""}),[p,b]=x.useState(""),[j,v]=x.useState([]),[D,C]=x.useState("all"),[z,_]=x.useState("all"),[k,L]=x.useState(!1),[N,U]=x.useState("technical"),[M,J]=x.useState({title:"",priority:"low",dueDate:"",description:""}),[te,q]=x.useState([]),[Y,I]=x.useState(!1),[T,P]=x.useState(null),[$,le]=x.useState(""),[ie,W]=x.useState([]),R="Allowed: PDF, PNG, JPG, DOC, DOCX, TXT  Max 5MB (up to 5 files)",ee=k||Y,Q=x.useMemo(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}")}catch{return{}}},[]),H=String(Q.employeeId||Q.employeeNumber||"").trim(),ue=String(Q.email||"").trim();async function w(){r(!0),u({kind:"info",text:""});try{const ce=await _n({q:p,type:D==="all"?"":D,status:z==="all"?"":z});v(Array.isArray(ce)?ce:[])}catch(ce){u({kind:"error",text:ce.message||"Failed to load support tickets."})}finally{r(!1)}}x.useEffect(()=>{w()},[]),x.useEffect(()=>{w()},[D,z]),x.useEffect(()=>{async function ce(ve){if((ve?.detail?.modules||[]).includes("support")){if(await w(),T?._id&&!String(T._id).startsWith("local_"))try{const Me=await rm(T._id);P(Me)}catch{}u({kind:"success",text:"Synced support changes."})}}return window.addEventListener("outbox:flushed",ce),()=>window.removeEventListener("outbox:flushed",ce)},[T?._id,D,z,p]);function E(ce){U(ce),g({kind:"info",text:""}),J({title:ce==="technical"?"Login / Access issue":"Payroll question",priority:ce==="technical"?"medium":"low",dueDate:"",description:""}),q([]),L(!0)}async function ne(){if(!i){c(!0),g({kind:"info",text:""});try{if(!String(M.title).trim())throw new Error("Title is required.");if(!H)throw new Error("Employee number is missing. Please update your profile.");if(!ue)throw new Error("Email is missing. Please log in again or update your profile.");const ce=await Ub({type:N,title:M.title,description:M.description,priority:M.priority,dueDate:M.dueDate||null,employeeNumber:H,employeeEmail:ue,files:te});if(L(!1),ce?.queued){const Je={_id:`local_${ce.queueId}`,_pending:!0,type:N,title:M.title,description:M.description||"",priority:M.priority||"low",dueDate:M.dueDate||null,status:"not_started",assignedToRole:N==="technical"?"admin":"payroll_manager",attachments:[],messages:[],employeeNumber:H,employeeEmail:ue,createdAt:new Date().toISOString(),lastActionAt:new Date().toISOString()};v(Me=>[Je,...Me||[]]),u({kind:"success",text:"You are offline. Ticket queued and will send automatically when online."});return}u({kind:"success",text:"Ticket created."}),await w()}catch(ce){g({kind:"error",text:ce.message||"Failed to create ticket."})}finally{c(!1)}}}async function he(ce){c(!0),u({kind:"info",text:""});try{if(String(ce).startsWith("local_")){const Je=j.find(Me=>String(Me._id)===String(ce));P(Je||null),le(""),W([]),g({kind:"success",text:"This ticket is pending sync. It will appear fully once online."}),I(!0);return}const ve=await rm(ce);P(ve),le(""),W([]),g({kind:"info",text:""}),I(!0)}catch(ve){u({kind:"error",text:ve.message||"Failed to open ticket."})}finally{c(!1)}}async function ge(){if(!(!T?._id||i)){if(String(T._id).startsWith("local_")){g({kind:"error",text:"This ticket is pending sync. Go online to send messages."});return}c(!0),g({kind:"info",text:""});try{const ce=await zb(T._id,{text:$,files:ie});if(ce?.queued){const ve={_id:`local_${ce.queueId}`,_pending:!0,senderRole:"employee",text:$,attachments:[],createdAt:new Date().toISOString()};P(Je=>Je&&{...Je,messages:[...Je.messages||[],ve],lastActionAt:new Date().toISOString(),status:Je.status==="not_started"?"in_progress":Je.status}),g({kind:"success",text:"You are offline. Message queued and will send when online."}),le(""),W([]);return}P(ce),le(""),W([])}catch(ce){g({kind:"error",text:ce.message||"Failed to send message."})}finally{c(!1)}}}async function Ne(ce){if(!i){c(!0),u({kind:"info",text:""});try{if((await zN(ce))?.queued){v(Je=>Je.filter(Me=>Me._id!==ce)),T?._id===ce&&(I(!1),P(null)),u({kind:"success",text:"You are offline. Delete queued and will apply when online."});return}u({kind:"success",text:"Ticket deleted."}),await w()}catch(ve){u({kind:"error",text:ve.message||"Failed to delete ticket."})}finally{c(!1)}}}const ke=x.useMemo(()=>{const ce=p.trim().toLowerCase();return ce?j.filter(ve=>String(ve.title||"").toLowerCase().includes(ce)):j},[j,p]);return t.jsx(Ls,{title:"Support Requests",hideWelcome:!0,children:t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[ee?null:t.jsx(_u,{kind:m.kind,message:m.text,onClose:()=>u({kind:"info",text:""})}),t.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"Support Requests"}),t.jsx("div",{className:"text-sm text-slate-600",children:"Create a ticket and discuss with the assigned team."})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsx("button",{type:"button",onClick:()=>E("payroll"),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",disabled:a,children:"Payroll Support"}),t.jsx("button",{type:"button",onClick:()=>E("technical"),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-indigo-950",disabled:a,children:"Technical Support"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[1fr_360px] gap-6",children:[t.jsxs(bp,{title:"Support Request List",children:[t.jsx("div",{className:"flex flex-col gap-3 mb-4",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsx("input",{value:p,onChange:ce=>b(ce.target.value),placeholder:"Search tickets...",className:"w-full rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white"}),t.jsxs("select",{value:D,onChange:ce=>C(ce.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white text-slate-900",disabled:i,children:[t.jsx("option",{value:"all",children:"All types"}),t.jsx("option",{value:"payroll",children:"Payroll"}),t.jsx("option",{value:"technical",children:"Technical"})]}),t.jsxs("select",{value:z,onChange:ce=>_(ce.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white text-slate-900",disabled:i,children:[t.jsx("option",{value:"all",children:"All status"}),t.jsx("option",{value:"not_started",children:"Not started"}),t.jsx("option",{value:"in_progress",children:"In progress"}),t.jsx("option",{value:"resolved",children:"Resolved"}),t.jsx("option",{value:"closed",children:"Closed"})]})]})}),a?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):ke.length===0?t.jsx("div",{className:"text-sm text-slate-700",children:"No tickets yet."}):t.jsx("div",{className:"space-y-3",children:ke.map(ce=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:ce.title}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Last action: ",Ou(ce.lastActionAt),"  Created: ",Iw(ce.createdAt)]}),t.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[ce._pending?t.jsx(Np,{}):null,t.jsx(jp,{type:ce.type}),t.jsx(yp,{status:ce.status}),t.jsx(vp,{priority:ce.priority})]})]}),t.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[t.jsx("button",{type:"button",onClick:()=>he(ce._id),className:"text-sm font-semibold text-slate-700 hover:underline",disabled:i,children:"View"}),t.jsx("button",{type:"button",onClick:()=>Ne(ce._id),className:"text-sm font-semibold text-slate-400 hover:text-slate-600",disabled:i,title:"You can delete only if not resolved/closed (employee).",children:"Delete"})]})]})},ce._id))})]}),t.jsxs(bp,{title:"Quick Tips",className:"border-indigo-500/20",children:[t.jsxs("div",{className:"text-sm text-slate-700",children:["Choose ",t.jsx("span",{className:"font-semibold",children:"Payroll Support"})," for payslips/tax/salary questions (routes to Payroll Manager). Choose ",t.jsx("span",{className:"font-semibold",children:"Technical Support"})," for login/access/system issues (routes to Admin)."]}),t.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 border border-slate-200 p-3 text-xs text-slate-700",children:[t.jsx("span",{className:"font-semibold",children:"Uploads:"})," ",R]})]})]}),t.jsxs(gp,{open:k,title:N==="technical"?"New Technical Ticket":"New Payroll Ticket",onClose:()=>!i&&L(!1),widthClass:"sm:w-[860px]",children:[t.jsx(_u,{kind:h.kind,message:h.text,onClose:()=>g({kind:"info",text:""})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3 text-sm text-slate-700",children:[t.jsx("span",{className:"font-semibold",children:"Assigned to:"})," ",N==="technical"?"Admin (Technical Support)":"Payroll Manager (Payroll Support)",t.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:R})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Employee Number"}),t.jsx("input",{value:H,disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-700 cursor-not-allowed",placeholder:"(missing)"}),H?null:t.jsx("div",{className:"text-[11px] text-rose-600 mt-1",children:"Missing employee number (update profile)."})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Email"}),t.jsx("input",{value:ue,disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-700 cursor-not-allowed",placeholder:"(missing)"}),ue?null:t.jsx("div",{className:"text-[11px] text-rose-600 mt-1",children:"Missing email (log in again / update profile)."})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Title *"}),t.jsx("input",{value:M.title,onChange:ce=>J(ve=>({...ve,title:ce.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",placeholder:"Short title..."})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Priority"}),t.jsxs("select",{value:M.priority,onChange:ce=>J(ve=>({...ve,priority:ce.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",children:[t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"})]})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Due date (optional)"}),t.jsx("input",{type:"date",value:M.dueDate,onChange:ce=>J(ve=>({...ve,dueDate:ce.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Description"}),t.jsx("textarea",{value:M.description,onChange:ce=>J(ve=>({...ve,description:ce.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[140px] bg-white",placeholder:"Describe the issue..."})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Upload documents (optional)"}),t.jsx("input",{type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg,.doc,.docx,.txt",onChange:ce=>q(Array.from(ce.target.files||[])),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{className:"pt-2 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>L(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-rose-50 text-rose-600 hover:opacity-90",disabled:i,children:"Cancel"}),t.jsx("button",{type:"button",onClick:ne,className:pl("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:i,children:i?"Submitting...":"Submit"})]})]})]}),t.jsxs(gp,{open:Y,title:T?`Ticket: ${T.title}`:"Ticket",onClose:()=>!i&&I(!1),widthClass:"sm:w-[980px]",children:[t.jsx(_u,{kind:h.kind,message:h.text,onClose:()=>g({kind:"info",text:""})}),T?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[T._pending?t.jsx(Np,{}):null,t.jsx(jp,{type:T.type}),t.jsx(yp,{status:T.status}),t.jsx(vp,{priority:T.priority}),t.jsxs("span",{className:"text-xs text-slate-600 ml-auto",children:["Created ",Ou(T.createdAt)]})]}),T.employeeNumber||T.employeeEmail?t.jsxs("div",{className:"text-xs text-slate-600 mt-2",children:[T.employeeNumber?t.jsxs(t.Fragment,{children:["Employee: ",t.jsx("span",{className:"font-semibold",children:T.employeeNumber})]}):null,T.employeeNumber&&T.employeeEmail?t.jsx("span",{children:"  "}):null,T.employeeEmail?t.jsxs(t.Fragment,{children:["Email: ",t.jsx("span",{className:"font-semibold",children:T.employeeEmail})]}):null]}):null,T.description?t.jsx("div",{className:"text-sm text-slate-800 mt-3 whitespace-pre-wrap",children:T.description}):null,T.attachments?.length?t.jsxs("div",{className:"mt-3",children:[t.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-1",children:"Attachments"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:T.attachments.map((ce,ve)=>t.jsx("a",{href:`http://localhost:5000${ce.url}`,target:"_blank",rel:"noreferrer",className:"text-xs rounded-xl border border-slate-200 bg-white px-3 py-2 hover:bg-slate-50 text-indigo-950",children:ce.originalName},ve))})]}):null]}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Discussion"}),t.jsx("div",{className:"space-y-3 max-h-[320px] overflow-auto pr-2",children:T.messages?.length?T.messages.map(ce=>t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs("div",{className:"text-xs font-semibold text-slate-700",children:[ce.senderRole,ce._pending?t.jsx("span",{className:"ml-2 text-[11px] text-amber-700",children:"(pending)"}):null]}),t.jsx("div",{className:"text-[11px] text-slate-500",children:Ou(ce.createdAt)})]}),ce.text?t.jsx("div",{className:"text-sm text-slate-800 mt-2 whitespace-pre-wrap",children:ce.text}):null,ce.attachments?.length?t.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:ce.attachments.map((ve,Je)=>t.jsx("a",{href:`http://localhost:5000${ve.url}`,target:"_blank",rel:"noreferrer",className:"text-xs rounded-xl border border-slate-200 bg-white px-3 py-2 hover:bg-slate-50 text-indigo-950",children:ve.originalName},Je))}):null]},ce._id)):t.jsx("div",{className:"text-sm text-slate-600",children:"No messages yet."})}),t.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 p-3 bg-white",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Reply"}),t.jsx("textarea",{value:$,onChange:ce=>le(ce.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[100px] bg-white",placeholder:"Write a message..."}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:R}),t.jsx("input",{type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg,.doc,.docx,.txt",onChange:ce=>W(Array.from(ce.target.files||[])),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{className:"pt-3 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>I(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-indigo-950",disabled:i,children:"Close"}),t.jsx("button",{type:"button",onClick:ge,className:pl("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:i||String(T?._id||"").startsWith("local_"),title:String(T?._id||"").startsWith("local_")?"Pending sync - go online to reply":"Send",children:i?"Sending...":"Send"})]})]})]})]}):null]})]})})}const Us="http://localhost:5000/api/progressions";function zs(){return{Authorization:`Bearer ${localStorage.getItem("token")}`}}async function Bs(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok)throw new Error(i?.message||`Request failed (${a.status})`);return i}async function e2(){const a=await fetch(`${Us}/projects/mine`,{headers:zs()});return Bs(a)}async function t2(a){const r=await fetch(`${Us}/projects`,{method:"POST",headers:{...zs(),"Content-Type":"application/json"},body:JSON.stringify(a)});return Bs(r)}async function s2(a,r){const i=await fetch(`${Us}/projects/${a}`,{method:"PUT",headers:{...zs(),"Content-Type":"application/json"},body:JSON.stringify(r)});return Bs(i)}async function l2(a){const r=await fetch(`${Us}/projects/${a}`,{method:"DELETE",headers:zs()});return Bs(r)}async function a2(){const a=await fetch(`${Us}/cv`,{headers:zs()});return Bs(a)}async function n2(a){const r=new FormData;r.append("file",a);const i=await fetch(`${Us}/cv`,{method:"POST",headers:zs(),body:r});return Bs(i)}async function r2(){const a=await fetch(`${Us}/certificates/mine`,{headers:zs()});return Bs(a)}async function i2({file:a,title:r}){const i=new FormData;i.append("file",a),r&&i.append("title",r);const c=await fetch(`${Us}/certificates`,{method:"POST",headers:zs(),body:i});return Bs(c)}async function o2(a){const r=await fetch(`${Us}/certificates/${a}`,{method:"DELETE",headers:zs()});return Bs(r)}async function c2(){const a=await fetch(`${Us}/summary`,{headers:zs()});return Bs(a)}function vs(...a){return a.filter(Boolean).join(" ")}function Lu(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?"-":r.toLocaleDateString()}function wp(a){return Math.round(a/(1024*1024)*10)/10}function Dr({title:a,children:r,className:i=""}){return t.jsxs("div",{className:vs("rounded-3xl bg-white border border-slate-200 p-5 shadow-sm",i),children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function ko({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:vs("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold","aria-label":"Close message",type:"button",children:""})]})})}function Aa({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[900px]",zClass:u="z-50"}){return a?t.jsxs("div",{className:vs("fixed inset-0",u),children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:c}),t.jsx("div",{className:vs("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden relative",onClick:h=>h.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700","aria-label":"Close",type:"button",children:""})]}),t.jsx("div",{className:"p-6 text-slate-900 [&_select]:text-slate-900 [&_input]:text-slate-900 [&_textarea]:text-slate-900 [&_option]:text-slate-900",children:i})]})})]}):null}function Uu({status:a}){const r={not_started:"bg-slate-50 text-slate-700 border-slate-200",in_progress:"bg-sky-50 text-sky-700 border-sky-100",completed:"bg-emerald-50 text-emerald-700 border-emerald-100"},i={not_started:"Not started",in_progress:"In progress",completed:"Completed"};return t.jsx("span",{className:vs("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.not_started),children:i[a]||"Not started"})}function zu({priority:a}){const r={low:"bg-emerald-50 text-emerald-700 border-emerald-100",medium:"bg-amber-50 text-amber-700 border-amber-100",high:"bg-rose-50 text-rose-700 border-rose-100"},i={low:"Low",medium:"Medium",high:"High"};return t.jsx("span",{className:vs("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.low),children:i[a]||"Low"})}function d2(){const[a,r]=x.useState(!0),[i,c]=x.useState(!1),[m,u]=x.useState({projectsTotal:0,hasCv:!1,certificatesTotal:0}),[h,g]=x.useState([]),[p,b]=x.useState(null),[j,v]=x.useState([]),[D,C]=x.useState({kind:"info",text:""}),[z,_]=x.useState(!1),[k,L]=x.useState(!1),[N,U]=x.useState(null),[M,J]=x.useState(!1),[te,q]=x.useState(!1),[Y,I]=x.useState(!1),[T,P]=x.useState(!1),[$,le]=x.useState(null),[ie,W]=x.useState(null),[R,ee]=x.useState({kind:"info",text:""}),[Q,H]=x.useState({name:"",status:"not_started",priority:"low",dueDate:"",description:""}),[ue,w]=x.useState(null),[E,ne]=x.useState(null),[he,ge]=x.useState(""),Ne="Allowed: PDF, DOC, DOCX  Max 5MB",ke="Allowed: PDF, PNG, JPG  Max 5MB";async function ce(){r(!0),C({kind:"info",text:""});try{const[S,xe,fe,He]=await Promise.all([c2(),e2(),a2(),r2()]);u(S||{projectsTotal:0,hasCv:!1,certificatesTotal:0}),g(Array.isArray(xe)?xe:[]),b(fe||null),v(Array.isArray(He)?He:[])}catch(S){C({kind:"error",text:S.message||"Failed to load progressions."})}finally{r(!1)}}x.useEffect(()=>{ce()},[]);function ve(){ee({kind:"info",text:""}),U(null),H({name:"",status:"not_started",priority:"low",dueDate:"",description:""}),L(!0)}function Je(S){ee({kind:"info",text:""}),U(S),H({name:S.name||"",status:S.status||"not_started",priority:S.priority||"low",dueDate:S.dueDate?String(S.dueDate).slice(0,10):"",description:S.description||""}),L(!0)}async function Me(){if(!i){c(!0),ee({kind:"info",text:""});try{if(!String(Q.name).trim())throw new Error("Project name is required.");N?.id?(await s2(N.id,{...Q,dueDate:Q.dueDate||null}),C({kind:"success",text:"Project updated."})):(await t2({...Q,dueDate:Q.dueDate||null}),C({kind:"success",text:"Project created."})),L(!1),await ce()}catch(S){ee({kind:"error",text:S.message||"Failed to save project."})}finally{c(!1)}}}async function se(S){if(!i){c(!0);try{await l2(S),C({kind:"success",text:"Project deleted."}),await ce()}catch(xe){C({kind:"error",text:xe.message||"Failed to delete project."})}finally{c(!1)}}}async function K(){if(!i){c(!0),ee({kind:"info",text:""});try{if(!ue)throw new Error("Please select a file.");await n2(ue),q(!1),w(null),C({kind:"success",text:"CV uploaded."}),await ce()}catch(S){ee({kind:"error",text:S.message||"Failed to upload CV."})}finally{c(!1)}}}async function be(){if(!i){c(!0),ee({kind:"info",text:""});try{if(!E)throw new Error("Please select a file.");await i2({file:E,title:he}),P(!1),ne(null),ge(""),C({kind:"success",text:"Certificate uploaded."}),await ce()}catch(S){ee({kind:"error",text:S.message||"Failed to upload certificate."})}finally{c(!1)}}}async function Z(S){if(!i){c(!0);try{await o2(S),C({kind:"success",text:"Certificate deleted."}),await ce()}catch(xe){C({kind:"error",text:xe.message||"Failed to delete certificate."})}finally{c(!1)}}}const $e=x.useMemo(()=>h.length?h[0]:null,[h]);return t.jsx(Ls,{title:"Progressions",hideWelcome:!0,children:t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(ko,{kind:D.kind,message:D.text,onClose:()=>C({kind:"info",text:""})}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[t.jsxs(Dr,{title:"Projects",className:"border-indigo-500/20",children:[t.jsx("div",{className:"text-3xl font-semibold text-slate-900",children:m.projectsTotal??0}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Total projects"}),t.jsxs("div",{className:"mt-4 flex gap-3",children:[t.jsx("button",{type:"button",onClick:()=>_(!0),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",disabled:a,children:"View Projects"}),t.jsx("button",{type:"button",onClick:ve,className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",disabled:a,children:"Add Project"})]}),$e?t.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:$e.name}),t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx(Uu,{status:$e.status}),t.jsx(zu,{priority:$e.priority})]})]}):null]}),t.jsx(Dr,{title:"My CV",className:"border-emerald-500/20",children:p?t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:p.originalName}),t.jsxs("div",{className:"text-xs text-slate-600",children:[wp(p.size)," MB  Uploaded ",Lu(p.uploadedAt)]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("a",{href:`http://localhost:5000${p.url}`,target:"_blank",rel:"noreferrer",className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"View"}),t.jsx("button",{type:"button",onClick:()=>{ee({kind:"info",text:""}),q(!0)},className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",children:"Update CV"})]})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"text-sm text-slate-700",children:"No CV uploaded yet."}),t.jsx("button",{type:"button",onClick:()=>{ee({kind:"info",text:""}),q(!0)},className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",children:"Upload CV"})]})}),t.jsxs(Dr,{title:"Certificates",className:"border-sky-500/20",children:[t.jsx("div",{className:"text-3xl font-semibold text-slate-900",children:m.certificatesTotal??0}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Total certificates"}),t.jsxs("div",{className:"mt-4 flex gap-3",children:[t.jsx("button",{type:"button",onClick:()=>I(!0),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",disabled:a,children:"View"}),t.jsx("button",{type:"button",onClick:()=>{ee({kind:"info",text:""}),P(!0)},className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",disabled:a,children:"Add"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 mt-6",children:[t.jsx(Dr,{title:"Quick Tips",children:t.jsx("div",{className:"text-sm text-slate-700",children:"Keep your CV and certificates updated. Projects help you track growth and milestones over time."})}),t.jsxs(Dr,{title:"Refresh",children:[t.jsx("button",{type:"button",onClick:ce,className:"w-full rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",disabled:i,children:"Refresh"}),t.jsx("div",{className:"mt-2 text-[11px] text-slate-600",children:"Pull latest data from the server."})]})]}),t.jsx(Aa,{open:z,title:"View Projects",onClose:()=>_(!1),widthClass:"sm:w-[980px]",children:t.jsxs("div",{className:"space-y-4",children:[h.length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"No projects yet."}):h.map(S=>t.jsx("div",{className:"rounded-2xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:S.name}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Due: ",S.dueDate?Lu(S.dueDate):"-"]}),S.description?t.jsx("div",{className:"text-xs text-slate-700 mt-2 break-words",children:S.description}):null,t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx(Uu,{status:S.status}),t.jsx(zu,{priority:S.priority})]})]}),t.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[t.jsx("button",{type:"button",onClick:()=>Je(S),className:"text-sm font-semibold text-slate-700 hover:underline",disabled:i,children:"Edit"}),t.jsx("button",{type:"button",onClick:()=>le(S),className:"text-sm font-semibold text-slate-400 hover:text-slate-600",disabled:i,children:"Delete"})]})]})},S.id)),t.jsxs("div",{className:"pt-2 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>_(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"Close"}),t.jsx("button",{type:"button",onClick:ve,className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",children:"Add Project"})]})]})}),t.jsxs(Aa,{open:k,title:N?"Edit Project":"New Project",onClose:()=>!i&&L(!1),widthClass:"sm:w-[860px]",children:[t.jsx(ko,{kind:R.kind,message:R.text,onClose:()=>ee({kind:"info",text:""})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Project Name *"}),t.jsx("input",{value:Q.name,onChange:S=>H(xe=>({...xe,name:S.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",placeholder:"e.g. Smart Payroll"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Due Date"}),t.jsx("input",{type:"date",value:Q.dueDate,onChange:S=>H(xe=>({...xe,dueDate:S.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Status"}),t.jsxs("select",{value:Q.status,onChange:S=>H(xe=>({...xe,status:S.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",children:[t.jsx("option",{value:"not_started",children:"Not started"}),t.jsx("option",{value:"in_progress",children:"In progress"}),t.jsx("option",{value:"completed",children:"Completed"})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Priority"}),t.jsxs("select",{value:Q.priority,onChange:S=>H(xe=>({...xe,priority:S.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",children:[t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"})]})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Description"}),t.jsx("textarea",{value:Q.description,onChange:S=>H(xe=>({...xe,description:S.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[120px] bg-white",placeholder:"Optional notes..."})]}),t.jsxs("div",{className:"pt-2 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>L(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-rose-50 text-rose-600 hover:opacity-90",disabled:i,children:"Cancel"}),t.jsx("button",{type:"button",onClick:Me,className:vs("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:i,children:i?"Saving...":"Submit"})]})]})]}),t.jsxs(Aa,{open:te,title:"Upload / Update CV",onClose:()=>!i&&q(!1),widthClass:"sm:w-[720px]",children:[t.jsx(ko,{kind:R.kind,message:R.text,onClose:()=>ee({kind:"info",text:""})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3 text-sm text-slate-700",children:[t.jsx("span",{className:"font-semibold",children:"Note:"})," ",Ne]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Select file *"}),t.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:S=>w(S.target.files?.[0]||null),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{className:"pt-2 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>q(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-rose-50 text-rose-600 hover:opacity-90",disabled:i,children:"Cancel"}),t.jsx("button",{type:"button",onClick:K,className:vs("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:i,children:i?"Uploading...":"Upload"})]})]})]}),t.jsx(Aa,{open:Y,title:"View Certificates",onClose:()=>I(!1),widthClass:"sm:w-[980px]",children:t.jsxs("div",{className:"space-y-4",children:[j.length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"No certificates yet."}):j.map(S=>t.jsx("div",{className:"rounded-2xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:S.title?S.title:S.originalName}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[wp(S.size)," MB  Uploaded ",Lu(S.uploadedAt)]})]}),t.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[t.jsx("a",{href:`http://localhost:5000${S.url}`,target:"_blank",rel:"noreferrer",className:"text-sm font-semibold text-slate-700 hover:underline",children:"View"}),t.jsx("button",{type:"button",onClick:()=>W(S),className:"text-sm font-semibold text-slate-400 hover:text-slate-600",disabled:i,children:"Delete"})]})]})},S.id)),t.jsxs("div",{className:"pt-2 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>I(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"Close"}),t.jsx("button",{type:"button",onClick:()=>{ee({kind:"info",text:""}),P(!0)},className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",children:"Add Certificate"})]})]})}),t.jsxs(Aa,{open:T,title:"Add Certificate",onClose:()=>!i&&P(!1),widthClass:"sm:w-[720px]",children:[t.jsx(ko,{kind:R.kind,message:R.text,onClose:()=>ee({kind:"info",text:""})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3 text-sm text-slate-700",children:[t.jsx("span",{className:"font-semibold",children:"Note:"})," ",ke]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Title (optional)"}),t.jsx("input",{value:he,onChange:S=>ge(S.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",placeholder:"e.g. AWS Cloud Practitioner"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Select file *"}),t.jsx("input",{type:"file",accept:".pdf,.png,.jpg,.jpeg",onChange:S=>ne(S.target.files?.[0]||null),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{className:"pt-2 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>P(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-rose-50 text-rose-600 hover:opacity-90",disabled:i,children:"Cancel"}),t.jsx("button",{type:"button",onClick:be,className:vs("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:i,children:i?"Uploading...":"Upload"})]})]})]}),t.jsx(Aa,{open:!!$,title:"Delete project?",onClose:()=>!i&&le(null),widthClass:"sm:w-[520px]",zClass:"z-[9999]",children:$?t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"text-sm text-slate-700",children:"Are you sure you want to delete this project?"}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:$.name}),t.jsxs("div",{className:"mt-2 flex gap-2",children:[t.jsx(Uu,{status:$.status}),t.jsx(zu,{priority:$.priority})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-1",children:[t.jsx("button",{type:"button",onClick:()=>le(null),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white text-slate-700 hover:bg-slate-50",disabled:i,children:"Cancel"}),t.jsx("button",{type:"button",onClick:async()=>{const S=$.id;le(null),await se(S)},className:vs("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-rose-50 text-rose-700 border-rose-200 hover:opacity-90"),disabled:i,children:i?"Deleting...":"Delete"})]})]}):null}),t.jsx(Aa,{open:!!ie,title:"Delete certificate?",onClose:()=>!i&&W(null),widthClass:"sm:w-[520px]",zClass:"z-[9999]",children:ie?t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"text-sm text-slate-700",children:"Are you sure you want to delete this certificate?"}),t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:ie.title?ie.title:ie.originalName})}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-1",children:[t.jsx("button",{type:"button",onClick:()=>W(null),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white text-slate-700 hover:bg-slate-50",disabled:i,children:"Cancel"}),t.jsx("button",{type:"button",onClick:async()=>{const S=ie.id;W(null),await Z(S)},className:vs("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-rose-50 text-rose-700 border-rose-200 hover:opacity-90"),disabled:i,children:i?"Deleting...":"Delete"})]})]}):null})]})})}const ea="http://localhost:5000";function zn(a=!0){const r=localStorage.getItem("token")||"",i={};return a&&(i["Content-Type"]="application/json"),r&&(i.Authorization=`Bearer ${r}`),i}async function u2(){const a=await fetch(`${ea}/api/knowledge/docs`,{headers:zn(!1)});if(!a.ok)throw new Error(await a.text());return a.json()}async function m2({file:a,title:r,category:i,tags:c}){const m=localStorage.getItem("token")||"",u=new FormData;u.append("file",a),u.append("title",r||""),u.append("category",i||""),u.append("tags",c||"");const h=await fetch(`${ea}/api/knowledge/docs`,{method:"POST",headers:m?{Authorization:`Bearer ${m}`}:{},body:u});if(!h.ok)throw new Error(await h.text());return h.json()}async function x2(a,r){const i=await fetch(`${ea}/api/knowledge/docs/${a}`,{method:"PATCH",headers:zn(!0),body:JSON.stringify(r)});if(!i.ok)throw new Error(await i.text());return i.json()}async function f2(a){const r=await fetch(`${ea}/api/knowledge/docs/${a}/reprocess`,{method:"POST",headers:zn(!1)});if(!r.ok)throw new Error(await r.text());return r.json()}async function h2(a){const r=localStorage.getItem("token")||"",i=await fetch(`${ea}/api/knowledge/docs/${a}`,{method:"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}});if(!i.ok)throw new Error(await i.text());return i.json()}async function p2(){const a=await fetch(`${ea}/api/knowledge/settings`,{headers:zn(!1)});if(!a.ok)throw new Error(await a.text());return a.json()}async function b2(a){const r=await fetch(`${ea}/api/knowledge/settings`,{method:"PUT",headers:zn(!0),body:JSON.stringify(a)});if(!r.ok)throw new Error(await r.text());return r.json()}async function g2({question:a}){const r=await fetch(`${ea}/api/knowledge/chat`,{method:"POST",headers:zn(!0),body:JSON.stringify({question:a})});if(!r.ok)throw new Error(await r.text());return r.json()}function _r(...a){return a.filter(Boolean).join(" ")}function y2(){try{return JSON.parse(localStorage.getItem("user")||"{}")||{}}catch{return{}}}function v2({tone:a="info",text:r,onClose:i}){if(!r)return null;const c=a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-900":a==="error"?"border-rose-200 bg-rose-50 text-rose-800":"border-slate-200 bg-white text-slate-800";return t.jsxs("div",{className:_r("mb-4 rounded-2xl border px-4 py-3 text-sm flex items-start justify-between gap-4",c),children:[t.jsx("div",{children:r}),i?t.jsx("button",{type:"button",onClick:i,className:"rounded-lg px-2 py-1 text-xs font-semibold border border-black/10 hover:bg-black/5",children:""}):null]})}function j2(){const[a,r]=x.useState(""),[i,c]=x.useState(!1),[m,u]=x.useState(null),[h,g]=x.useState(()=>{try{const N=localStorage.getItem("knowledge_chat_history");return N?JSON.parse(N):[]}catch{return[]}}),[p,b]=x.useState(null),[j,v]=x.useState(!1),D=x.useMemo(()=>y2(),[]),C=D?.employeeId||D?.employeeNumber||"",z=D?.email||"";x.useEffect(()=>{try{localStorage.setItem("knowledge_chat_history",JSON.stringify(h.slice(-30)))}catch{}},[h]);async function _(){const N=String(a||"").trim();if(!N||i)return;u(null),c(!0),b(null);const U={role:"user",text:N,ts:Date.now()};g(M=>[...M,U]),r("");try{const M=await g2({question:N}),J={role:"assistant",text:M?.answer||"No answer returned.",ts:Date.now(),confidence:M?.confidence??null,inScope:M?.inScope??!0,suggestTicket:!!M?.suggestTicket,routeTeam:M?.routeTeam||""};if(g(te=>[...te,J]),J.suggestTicket){const te=J.routeTeam==="technical"?"technical":"payroll",q=`Knowledge Hub: ${N}`.slice(0,120),I=(Array.isArray(M?.sources)?M.sources:[]).slice(0,5).map((P,$)=>{const le=typeof P.score=="number"?P.score.toFixed(3):"";return`#${$+1} ${P.docTitle||"Source"} (${P.category||"-"}${le?`, score ${le}`:""})`}),T=`Employee question:
${N}

Bot answer (low confidence):
${J.text}

Confidence: ${J.confidence??"n/a"}
Routed team: ${te}

Top sources:
${I.join(`
`)}
`;b({type:te,title:q,description:T})}}catch(M){u({tone:"error",text:M?.message||"Chat failed."})}finally{c(!1)}}async function k(){if(!(!p||j)){v(!0),u(null);try{await Ub({type:p.type,title:p.title,description:p.description,priority:"low",employeeNumber:C,employeeEmail:z,files:[]}),u({tone:"success",text:"Support ticket created. You can track it in Support Requests."}),b(null)}catch(N){u({tone:"error",text:N?.message||"Failed to create ticket."})}finally{v(!1)}}}function L(N){N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),_())}return t.jsx(Ls,{title:"Knowledge Hub",noScroll:!1,children:t.jsxs("div",{className:"rounded-[28px] bg-white border border-slate-200 p-6",children:[t.jsx(v2,{tone:m?.tone,text:m?.text,onClose:()=>u(null)}),t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Ask about AutoPay"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"This bot answers only from your companys policies, payroll, leave, and IT documents."})]}),t.jsx("button",{type:"button",className:"rounded-2xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-2 text-sm font-semibold text-slate-900",onClick:()=>{g([]),b(null);try{localStorage.removeItem("knowledge_chat_history")}catch{}},children:"Clear"})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-4",children:[t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white overflow-hidden",children:[t.jsxs("div",{className:"px-5 py-4 border-b border-slate-200",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Chat"}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"If the answer is not in your docs, it will suggest creating a support ticket."})]}),t.jsx("div",{className:"p-5 space-y-4 max-h-[52vh] overflow-auto",children:h.length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"Try: How do I apply for leave? or I cant log in, what should I do?"}):h.map((N,U)=>{const M=N.role==="user";return t.jsxs("div",{className:_r("rounded-2xl border px-4 py-3",M?"border-slate-200 bg-slate-50":"border-slate-200 bg-white"),children:[t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsx("div",{className:_r("text-xs font-bold",M?"text-slate-700":"text-slate-900"),children:M?"You":"AutoPay Bot"}),M?null:t.jsxs("div",{className:"text-[11px] text-slate-600",children:[N.inScope===!1?"Out of scope":"",typeof N.confidence=="number"?`  conf ${N.confidence.toFixed(2)}`:""]})]}),t.jsx("div",{className:"mt-2 text-sm text-slate-800 whitespace-pre-wrap",children:N.text})]},`${N.ts||U}-${U}`)})}),t.jsx("div",{className:"p-5 border-t border-slate-200",children:t.jsxs("div",{className:"flex items-end gap-3",children:[t.jsx("textarea",{value:a,onChange:N=>r(N.target.value),onKeyDown:L,rows:2,placeholder:"Type your question",className:"flex-1 min-h-[44px] rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:outline-none"}),t.jsx("button",{type:"button",onClick:_,disabled:i,className:_r("rounded-2xl px-4 py-2 text-sm font-semibold border",i?"border-slate-200 bg-slate-50 text-slate-400":"border-slate-900 bg-slate-900 hover:bg-slate-800 text-white"),children:i?"Sending":"Send"})]})})]}),t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white overflow-hidden",children:[t.jsxs("div",{className:"px-5 py-4 border-b border-slate-200",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Escalation"}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"If the answers do not help, you can create a ticket to Payroll or Technical."})]}),t.jsx("div",{className:"p-5",children:p?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-xs font-semibold text-slate-700",children:"Ticket Type"}),t.jsx("div",{className:"text-sm font-bold text-slate-900 mt-1",children:p.type==="technical"?"Technical":"Payroll"}),t.jsx("div",{className:"text-xs font-semibold text-slate-700 mt-4",children:"Title"}),t.jsx("div",{className:"text-sm text-slate-900 mt-1",children:p.title}),t.jsx("div",{className:"text-xs font-semibold text-slate-700 mt-4",children:"Description (prefilled)"}),t.jsx("pre",{className:"mt-2 whitespace-pre-wrap text-xs text-slate-700 rounded-xl border border-slate-200 bg-white p-3 max-h-[220px] overflow-auto",children:p.description})]}),t.jsx("button",{type:"button",onClick:k,disabled:j,className:_r("w-full rounded-2xl px-4 py-2 text-sm font-semibold border",j?"border-slate-200 bg-slate-50 text-slate-400":"border-emerald-200 bg-emerald-50 hover:bg-emerald-100 text-emerald-900"),children:j?"Creating":"Create Support Ticket"}),t.jsx("button",{type:"button",onClick:()=>b(null),className:"w-full rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"Dismiss"})]}):t.jsx("div",{className:"text-sm text-slate-600",children:"No escalation suggested right now."})})]})]})]})})}const N2="http://localhost:5000";async function Zb(a,{method:r="GET",body:i}={}){const c=localStorage.getItem("token"),m=await fetch(`${N2}${a}`,{method:r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:i?JSON.stringify(i):void 0}),u=await m.json().catch(()=>({}));if(!m.ok)throw new Error(u.message||`Request failed (${m.status})`);return u}function Ib(){return Zb("/api/users/me/accessibility")}function Wb(a){return Zb("/api/users/me/accessibility",{method:"PUT",body:a})}const w2={darkMode:!0,largeText:!1,notifications:!0,highContrast:!1};function Ra(a){const r=a&&typeof a=="object"?a:{};return{darkMode:r.darkMode!==!1,largeText:r.largeText===!0,notifications:r.notifications!==!1,highContrast:r.highContrast===!0}}function S2(){try{const a=localStorage.getItem("accessibility_prefs");return a?Ra(JSON.parse(a)):null}catch{return null}}function Bu(a){const r=Ra(a);localStorage.setItem("accessibility_prefs",JSON.stringify(r));try{const i=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify({...i||{},accessibilityPrefs:r}))}catch{}window.dispatchEvent(new Event("user:updated"))}function k2(){const a=x.useMemo(()=>{try{const p=JSON.parse(localStorage.getItem("user")||"{}");if(p?.accessibilityPrefs)return Ra(p.accessibilityPrefs)}catch{}return S2()||w2},[]),[r,i]=x.useState(Ra(a)),[c,m]=x.useState(!1),[u,h]=x.useState("");x.useEffect(()=>{document.documentElement.style.fontSize=r.largeText?"18px":"16px",document.documentElement.style.filter=r.highContrast?"contrast(1.15)":"",r.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r.largeText,r.highContrast,r.darkMode]),x.useEffect(()=>{let p=!0;return(async()=>{try{const b=await Ib();if(!p)return;const j=Ra(b);i(j),Bu(j)}catch{}})(),()=>{p=!1}},[]);async function g(p){const b=Ra({...r,[p]:!r[p]});i(b),Bu(b),m(!0),h("");try{const j=await Wb(b),v=Ra(j);i(v),Bu(v)}catch(j){h(j?.message||"Failed to update accessibility")}finally{m(!1)}}return t.jsx(Ls,{title:"Accessibility",children:t.jsxs("div",{className:"rounded-[28px] bg-white border border-slate-200 p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"Preferences"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"These settings are saved to your account and will appear in your Activity Log."})]}),u?t.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-800",children:u}):null,t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsx(Co,{title:"Dark Mode",desc:"Turn off to use Light Mode.",value:r.darkMode,onClick:()=>g("darkMode"),disabled:c}),t.jsx(Co,{title:"Large Text",desc:"Increase text size for readability.",value:r.largeText,onClick:()=>g("largeText"),disabled:c}),t.jsx(Co,{title:"Notifications",desc:"Enable payslip and support updates.",value:r.notifications,onClick:()=>g("notifications"),disabled:c}),t.jsx(Co,{title:"High Contrast",desc:"Improve contrast for better visibility.",value:r.highContrast,onClick:()=>g("highContrast"),disabled:c})]})]})})}function Co({title:a,desc:r,value:i,onClick:c,disabled:m}){return t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 flex items-start justify-between gap-4 shadow-sm",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-slate-900",children:a}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:r})]}),t.jsx("button",{onClick:c,disabled:m,className:["shrink-0 rounded-full w-12 h-7 border relative transition",i?"bg-slate-900 border-slate-900":"bg-slate-200 border-slate-200",m?"opacity-60 cursor-not-allowed":"hover:opacity-95"].join(" "),type:"button","aria-pressed":i,children:t.jsx("span",{className:["absolute top-1 h-5 w-5 rounded-full transition bg-white shadow",i?"left-6":"left-1"].join(" ")})})]})}const C2="http://localhost:5000";function A2(a=!0){const r=localStorage.getItem("token")||"",i={};return a&&(i["Content-Type"]="application/json"),r&&(i.Authorization=`Bearer ${r}`),i}async function E2(a){const r=await a.json().catch(()=>({}));if(!a.ok)throw new Error(r.message||`Request failed (${a.status})`);return r}async function eg({status:a="open"}={}){const r=new URLSearchParams;a&&r.set("status",a);const i=await fetch(`${C2}/api/pm/anomalies?${r.toString()}`,{headers:A2(!0)});return E2(i)}function jt(...a){return a.filter(Boolean).join(" ")}function Sp(){try{return JSON.parse(localStorage.getItem("user")||"{}")||{}}catch{return{}}}function kp(){try{const a=localStorage.getItem("accessibility_prefs");return{darkMode:(a?JSON.parse(a):{})?.darkMode!==!1}}catch{return{darkMode:!0}}}function T2(a){return a==="admin"?"Admin":a==="payroll_manager"?"Payroll Manager":"User"}function Rr({count:a,dark:r}){const i=Number(a||0);return!i||i<=0?null:t.jsx("span",{className:jt("ml-2 inline-flex min-w-[18px] h-[18px] items-center justify-center rounded-full px-1 text-[11px] font-extrabold leading-none",r?"bg-rose-300 text-slate-900":"bg-rose-600 text-white"),"aria-label":`${i} pending`,title:`${i} pending`,children:i>99?"99+":i})}function Mr(a){return Array.isArray(a)?a:a&&Array.isArray(a.items)?a.items:[]}function Nt({title:a,children:r,noScroll:i=!1}){const c=Ss(),m=bl(),[u,h]=x.useState(()=>Sp()),[g,p]=x.useState(()=>kp()),[b,j]=x.useState(!1),[v,D]=x.useState({support:0,profileReq:0,leave:0,overtime:0,payrollControl:0}),C=u?.fullName||u?.name||(u?.email?u.email.split("@")[0]:"Back Office"),z=u?.email||"",_=u?.profilePhotoUrl||u?.avatarUrl||"",k=u?.role||"",L=k==="admin",N=m.pathname==="/pm/dashboard";function U(){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("accessibility_prefs"),c("/login")}x.useEffect(()=>{function $(){h(Sp()),p(kp())}return $(),window.addEventListener("storage",$),window.addEventListener("user:updated",$),()=>{window.removeEventListener("storage",$),window.removeEventListener("user:updated",$)}},[]);const M=g?.darkMode!==!1,J=M?"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-white":"min-h-screen text-slate-900",te=x.useMemo(()=>M?void 0:{background:"linear-gradient(to bottom right, #f8fafc, #eef2ff, #f1f5f9)"},[M]),q=M?"border border-white/10 bg-white/5":"border border-slate-200 bg-white",Y=M?"border border-white/10 bg-white/5":"border border-slate-200 bg-white",I=M?"text-white/80 hover:bg-white/10":"text-slate-700 hover:bg-slate-100",T=M?"bg-white/15 text-white":"bg-slate-900 text-white";async function P(){try{const[$,le,ie,W,R]=await Promise.all([_n({status:""}).catch(()=>[]),Tm({status:"pending"}).catch(()=>[]),Nm({status:"inprogress"}).catch(()=>[]),qb({status:"pending"}).catch(()=>[]),eg({status:"open"}).catch(()=>[])]),ee=Mr($),Q=Mr(le),H=Mr(ie),ue=Mr(W),w=Mr(R),E=ee.filter(ne=>{const he=String(ne.status||"").toLowerCase();return he==="open"||he==="in_progress"||he==="inprogress"||he==="pending"});D({support:E.length,profileReq:Q.length,leave:H.length,overtime:ue.length,payrollControl:w.length})}catch{}}return x.useEffect(()=>{P();const $=setInterval(P,15e3);function le(){P()}return window.addEventListener("focus",le),()=>{clearInterval($),window.removeEventListener("focus",le)}},[]),t.jsxs("div",{className:J,style:te,children:[t.jsx(Hb,{}),t.jsx("div",{className:"mx-auto max-w-7xl px-4 pt-16 pb-4 min-h-screen",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[260px_1fr] gap-4 min-h-[calc(100vh-2rem)]",children:[t.jsxs("aside",{className:jt("rounded-[28px] p-4 flex flex-col",q),children:[t.jsxs("div",{className:"mb-3 flex items-center gap-3 px-2 min-w-0",children:[t.jsx("div",{className:"h-20 w-20 shrink-0 flex items-center justify-center",children:t.jsx("img",{src:Ko,alt:"AutoPay",className:"max-h-16 max-w-16 object-contain"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:jt("font-semibold leading-tight truncate",M?"text-white":"text-slate-900"),children:"AutoPay"}),t.jsx("div",{className:jt("text-xs truncate",M?"text-white/60":"text-slate-500"),children:"Back Office"})]})]}),t.jsxs("nav",{className:"space-y-1",children:[t.jsx(st,{to:"/pm/dashboard",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:"Dashboard"}),t.jsx(st,{to:"/pm/support",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:t.jsxs("span",{className:"inline-flex items-center",children:["Support Tickets",t.jsx(Rr,{count:v.support,dark:M})]})}),t.jsx(st,{to:"/pm/profile-requests",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:t.jsxs("span",{className:"inline-flex items-center",children:["Profile Change Requests",t.jsx(Rr,{count:v.profileReq,dark:M})]})}),t.jsx(st,{to:"/pm/leave-approvals",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:t.jsxs("span",{className:"inline-flex items-center",children:["Leave Approvals",t.jsx(Rr,{count:v.leave,dark:M})]})}),t.jsx(st,{to:"/pm/overtime-approvals",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:t.jsxs("span",{className:"inline-flex items-center",children:["Overtime Approvals",t.jsx(Rr,{count:v.overtime,dark:M})]})}),t.jsx(st,{to:"/pm/progressions",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:"Progressions"}),t.jsx(st,{to:"/pm/employees",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:"Employee Setup"}),t.jsx(st,{to:"/pm/access-rights",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:"Access Rights"}),t.jsx(st,{to:"/pm/employee-documents",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:"Employee Documents"}),t.jsx(st,{to:"/pm/paycodes",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:"Paycodes"}),t.jsx(st,{to:"/pm/adjustments",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:t.jsxs("span",{className:"inline-flex items-center",children:["Payroll Control Center",t.jsx(Rr,{count:v.payrollControl,dark:M})]})}),t.jsx(st,{to:"/pm/reports",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:"Reports"}),t.jsx(st,{to:"/pm/accessibility",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:"Accessibility"}),t.jsx("div",{className:jt("my-4 border-t",M?"border-white/10":"border-slate-200")}),t.jsxs("nav",{className:"space-y-1",children:[t.jsx("div",{className:jt("px-4 pt-2 text-xs font-semibold uppercase tracking-wider",M?"text-white/50":"text-slate-500"),children:"Knowledge Hub"}),t.jsx(st,{to:"/pm/knowledge/documents",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:"Documents"}),L?t.jsx(st,{to:"/admin/knowledge/settings",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:"Knowledge Hub Settings"}):null]})]}),L?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:jt("my-4 border-t",M?"border-white/10":"border-slate-200")}),t.jsx("nav",{className:"space-y-1",children:t.jsx(st,{to:"/admin/impersonate",className:({isActive:$})=>`block rounded-xl px-4 py-2 text-sm transition ${$?T:I}`,children:"Impersonation"})})]}):null,t.jsx("div",{className:"mt-auto pt-4",children:t.jsx("button",{onClick:()=>j(!0),className:jt("w-full rounded-xl border px-4 py-2 text-sm transition",M?"bg-white/10 hover:bg-white/15 border-white/10 text-white":"bg-slate-900 hover:bg-slate-800 border-slate-900 text-white"),type:"button",children:"Log Out"})})]}),t.jsxs("main",{className:jt("rounded-[28px] p-5",Y,i?"h-[calc(100vh-2rem)] overflow-hidden":""),children:[N?t.jsxs("div",{className:"mb-6 flex items-center justify-between gap-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:jt("text-2xl font-semibold tracking-tight",M?"text-white":"text-slate-900"),children:["Welcome, ",C,"!"]}),t.jsx("div",{className:jt("text-sm",M?"text-white/60":"text-slate-600"),children:k?`${T2(k)} access`:"Back office access"})]}),t.jsxs("button",{onClick:()=>c("/pm/profile"),className:jt("flex items-center gap-3 rounded-2xl border px-3 py-2 transition text-left",M?"border-white/10 bg-white/5 hover:bg-white/10":"border-slate-200 bg-white hover:bg-slate-50"),type:"button",title:"Edit profile",children:[_?t.jsx("img",{src:_.startsWith("http")?_:`http://localhost:5000${_}`,alt:"Profile",className:jt("h-10 w-10 rounded-full object-cover border",M?"border-white/10 bg-white/10":"border-slate-200 bg-slate-100")}):t.jsx("div",{className:jt("h-10 w-10 rounded-full border",M?"border-white/10 bg-white/10":"border-slate-200 bg-slate-100")}),t.jsxs("div",{className:"leading-tight",children:[t.jsx("div",{className:jt("text-sm font-semibold",M?"text-white":"text-slate-900"),children:C}),t.jsx("div",{className:jt("text-xs",M?"text-white/60":"text-slate-600"),children:z})]})]})]}):a?t.jsx("div",{className:jt("mb-4 text-xl font-semibold tracking-tight",M?"text-white":"text-slate-900"),children:a}):null,N&&a?t.jsx("div",{className:jt("mb-4 text-lg font-semibold tracking-wide",M?"text-white":"text-slate-900"),children:a}):null,t.jsx("div",{className:i?"h-full overflow-hidden":"",children:r})]})]})}),b?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>j(!1)}),t.jsx("div",{className:"absolute left-1/2 top-1/2 w-[94vw] sm:w-[520px] -translate-x-1/2 -translate-y-1/2",children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:$=>$.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Log out?"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Are you sure you want to end your session?"})]}),t.jsx("button",{onClick:()=>j(!1),className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button","aria-label":"Close",children:""})]}),t.jsxs("div",{className:"p-6 flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:()=>j(!1),className:"rounded-xl px-4 py-2 border border-emerald-200 bg-emerald-50 hover:bg-emerald-100 text-emerald-800 font-semibold",type:"button",children:"Stay"}),t.jsx("button",{onClick:U,className:"rounded-xl px-4 py-2 border border-rose-200 bg-rose-50 hover:bg-rose-100 text-rose-800 font-semibold",type:"button",children:"Log out"})]})]})})]}):null]})}function tc(...a){return a.filter(Boolean).join(" ")}function Cp(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?"-":r.toLocaleString()}function D2(){try{return JSON.parse(localStorage.getItem("user")||"{}")||{}}catch{return{}}}function $u({title:a,children:r,className:i=""}){return t.jsxs("div",{className:tc("rounded-3xl bg-white border border-slate-200 p-5 shadow-sm",i),children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function Ao({title:a,value:r,subtitle:i,variant:c="slate"}){const m={slate:"bg-white border-slate-200",green:"bg-emerald-50 border-emerald-100",blue:"bg-sky-50 border-sky-100",amber:"bg-amber-50 border-amber-100",violet:"bg-violet-50 border-violet-100"}[c];return t.jsxs("div",{className:tc("rounded-3xl border p-5 shadow-sm",m),children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),t.jsx("div",{className:"text-4xl font-semibold text-slate-900 mt-3",children:r}),i?t.jsx("div",{className:"text-sm text-slate-700/80 mt-2",children:i}):null]})}function R2({tickets:a=[],days:r=14}){const i=x.useMemo(()=>{const j=new Date;j.setHours(23,59,59,999);const v=new Date(j);v.setDate(v.getDate()-(r-1)),v.setHours(0,0,0,0);const D=Array.from({length:r},(C,z)=>{const _=new Date(v);return _.setDate(v.getDate()+z),{day:_,count:0}});for(const C of a){const z=new Date(C.createdAt||C.lastActionAt||0);if(Number.isNaN(z.getTime())||z<v||z>j)continue;const _=Math.floor((z-v)/(1440*60*1e3));_>=0&&_<D.length&&(D[_].count+=1)}return D},[a,r]),c=Math.max(1,...i.map(j=>j.count)),m=520,u=160,h=18,g=(j,v)=>{const D=h+j*(m-h*2)/Math.max(1,i.length-1),C=u-h-v*(u-h*2)/c;return[D,C]},p=i.map((j,v)=>{const[D,C]=g(v,j.count);return`${v===0?"M":"L"} ${D} ${C}`}).join(" "),b=i[i.length-1]?.count??0;return t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"flex items-start justify-between gap-3",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Support tickets trend"}),t.jsxs("div",{className:"text-xs text-slate-600 mt-0.5",children:["Last ",r," days  Today: ",t.jsx("b",{children:b})]})]})}),t.jsx("div",{className:"mt-3 overflow-x-auto",children:t.jsxs("svg",{width:m,height:u,viewBox:`0 0 ${m} ${u}`,className:"block",children:[t.jsx("path",{d:p,fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-slate-900"}),i.map((j,v)=>{const[D,C]=g(v,j.count);return t.jsx("circle",{cx:D,cy:C,r:"2.6",className:"fill-slate-900"},v)})]})})]})}function Eo({children:a,kind:r="default"}){const i={default:"bg-slate-50 text-slate-700 border-slate-200",info:"bg-sky-50 text-sky-700 border-sky-100",ok:"bg-emerald-50 text-emerald-700 border-emerald-100",warn:"bg-amber-50 text-amber-700 border-amber-100",danger:"bg-rose-50 text-rose-700 border-rose-100",violet:"bg-violet-50 text-violet-700 border-violet-100",indigo:"bg-indigo-50 text-indigo-700 border-indigo-100"};return t.jsx("span",{className:tc("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",i[r]||i.default),children:a})}function M2({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[980px]"}){return a?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:c}),t.jsx("div",{className:tc("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700","aria-label":"Close",type:"button",children:""})]}),t.jsx("div",{className:"p-6 text-slate-900 max-h-[78vh] overflow-y-auto",children:i})]})})]}):null}function O2(){const i=(x.useMemo(()=>D2(),[])?.role||"")==="admin",[c,m]=x.useState(!0),[u,h]=x.useState([]),[g,p]=x.useState(0),[b,j]=x.useState(0),[v,D]=x.useState(0),[C,z]=x.useState(0),[_,k]=x.useState(0),[L,N]=x.useState(0),[U,M]=x.useState(0),[J,te]=x.useState(!1),[q,Y]=x.useState(!1),[I,T]=x.useState([]),[P,$]=x.useState("");async function le(){m(!0);try{const[ee,Q,H,ue,w]=await Promise.all([_n().catch(()=>[]),eg({status:"open"}).catch(()=>[]),Nm({status:"pending"}).catch(()=>[]),qb({status:"pending"}).catch(()=>[]),Tm({status:"pending"}).catch(()=>[])]),ne=(Array.isArray(ee)?ee:[]).filter(Ne=>i?Ne.type==="technical":Ne.type==="payroll"),he=ne.filter(Ne=>Ne.status==="not_started"||Ne.status==="in_progress").length,ge=ne.filter(Ne=>Ne.status==="resolved"||Ne.status==="closed").length;h(ne),p(ne.length),j(he),D(ge),z(Array.isArray(Q)?Q.length:0),k(Array.isArray(H)?H.length:0),N(Array.isArray(ue)?ue.length:0),M(Array.isArray(w)?w.length:0)}catch{h([]),p(0),j(0),D(0),z(0),k(0),N(0),M(0)}finally{m(!1)}}async function ie(){Y(!0),$("");try{const ee=await tw({limit:80});T(Array.isArray(ee)?ee:[])}catch(ee){T([]),$(ee.message||"Failed to load logs.")}finally{Y(!1)}}x.useEffect(()=>{le();const ee=setInterval(le,15e3);function Q(){le()}return window.addEventListener("focus",Q),()=>{clearInterval(ee),window.removeEventListener("focus",Q)}},[]);const W=x.useMemo(()=>u.length&&[...u].sort((Q,H)=>{const ue=new Date(Q.lastActionAt||Q.createdAt||0).getTime();return new Date(H.lastActionAt||H.createdAt||0).getTime()-ue})[0]||null,[u]);function R(){te(!0),ie()}return t.jsx(Nt,{title:"Dashboard",children:t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-6",children:[t.jsx("div",{children:t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"Dashboard"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{type:"button",onClick:R,className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-indigo-950 inline-flex items-center gap-2",children:[t.jsx("span",{"aria-hidden":!0,children:""})," Activity Log"]}),t.jsx("button",{type:"button",onClick:le,className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-indigo-950",disabled:c,children:c?"Refreshing...":"Refresh"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-5",children:[t.jsx(Ao,{variant:"violet",title:i?"Support tickets (Admin)":"Support tickets (PM)",value:g,subtitle:"Assigned to your queue"}),t.jsx(Ao,{variant:"amber",title:"Open tickets",value:b,subtitle:"Not started + In progress"}),t.jsx(Ao,{variant:"green",title:"Resolved tickets",value:v,subtitle:"Resolved + Closed"}),t.jsx(Ao,{variant:"blue",title:"Open anomalies",value:C,subtitle:"Needs review in payroll control"})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[1fr_420px] gap-6 mt-6",children:[t.jsxs($u,{title:"Approvals overview",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Leave approvals"}),t.jsx("div",{className:"text-3xl font-semibold text-slate-900 mt-2",children:_}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Pending"})]}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Overtime approvals"}),t.jsx("div",{className:"text-3xl font-semibold text-slate-900 mt-2",children:L}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Pending"})]}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Profile requests"}),t.jsx("div",{className:"text-3xl font-semibold text-slate-900 mt-2",children:U}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Pending"})]})]}),t.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Anomaly queue"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:C?t.jsxs("span",{children:[t.jsx(Eo,{kind:"warn",children:"Needs review"})," ",t.jsxs("span",{className:"ml-2",children:["You have ",C," open anomaly(ies)."]})]}):"No anomalies right now."})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx($u,{title:"Latest Support Activity",children:W?t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:W.title}),t.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[t.jsx(Eo,{kind:W.type==="technical"?"violet":"indigo",children:String(W.type||"").toUpperCase()}),t.jsx(Eo,{kind:"info",children:String(W.status||"").replaceAll("_"," ")}),t.jsx(Eo,{kind:"warn",children:W.priority})]}),t.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:["Last action: ",Cp(W.lastActionAt||W.createdAt)]})]}):t.jsx("div",{className:"text-sm text-slate-600",children:"No tickets yet."})}),t.jsx($u,{title:"Monitoring",children:t.jsx(R2,{tickets:u,days:14})})]})]}),t.jsxs(M2,{open:J,title:"Activity Log",onClose:()=>te(!1),widthClass:"sm:w-[980px]",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3 mb-4",children:[t.jsx("button",{type:"button",onClick:ie,className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",disabled:q,children:q?"Refreshing...":"Refresh"}),P?t.jsx("div",{className:"text-sm text-rose-600",children:P}):null]}),t.jsx("div",{className:"space-y-3",children:q?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):I.length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"No activity yet."}):I.map(ee=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[(ee.module||"").toUpperCase(),"  ",(ee.action||"").toUpperCase()]}),ee.message?t.jsx("div",{className:"text-sm text-slate-700 mt-1 whitespace-pre-wrap",children:ee.message}):null,ee.actorRole?t.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:["By: ",ee.actorRole]}):null]}),t.jsx("div",{className:"text-xs text-slate-500 shrink-0",children:Cp(ee.createdAt)})]})},ee._id))})]})]})})}function Ql(...a){return a.filter(Boolean).join(" ")}function _2(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?"-":r.toLocaleDateString()}function qu(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?"-":r.toLocaleString()}function Ap({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:Ql("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold","aria-label":"Close message",type:"button",children:""})]})})}function L2({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[980px]"}){return x.useEffect(()=>{if(!a)return;const u=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=u||""}},[a]),a?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:c}),t.jsx("div",{className:Ql("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden flex flex-col max-h-[88vh]",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4 shrink-0",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700","aria-label":"Close",type:"button",children:""})]}),t.jsx("div",{className:"p-6 text-slate-900 overflow-auto flex-1 [&_select]:text-slate-900 [&_input]:text-slate-900 [&_textarea]:text-slate-900",children:i})]})})]}):null}function Ep({status:a}){const r={not_started:"bg-slate-50 text-slate-700 border-slate-200",in_progress:"bg-sky-50 text-sky-700 border-sky-100",resolved:"bg-emerald-50 text-emerald-700 border-emerald-100",closed:"bg-slate-100 text-slate-700 border-slate-200"},i={not_started:"Not started",in_progress:"In progress",resolved:"Resolved",closed:"Closed"};return t.jsx("span",{className:Ql("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.not_started),children:i[a]||"Not started"})}function Tp({priority:a}){const r={low:"bg-emerald-50 text-emerald-700 border-emerald-100",medium:"bg-amber-50 text-amber-700 border-amber-100",high:"bg-rose-50 text-rose-700 border-rose-100"},i={low:"Low",medium:"Medium",high:"High"};return t.jsx("span",{className:Ql("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.low),children:i[a]||"Low"})}function Dp({type:a}){const r={technical:"bg-violet-50 text-violet-700 border-violet-100",payroll:"bg-indigo-50 text-indigo-700 border-indigo-100"},i={technical:"Technical",payroll:"Payroll"};return t.jsx("span",{className:Ql("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.technical),children:i[a]||"Technical"})}const Rp="Allowed: PDF, PNG, JPG, DOC, DOCX, TXT  Max 5MB (up to 5 files)";function U2(){try{return(JSON.parse(localStorage.getItem("user")||"{}")||{})?.role||""}catch{return""}}function z2(a){if(!a||!["not_started","in_progress"].includes(a.status))return!1;const r=Array.isArray(a.messages)?a.messages:[];if(r.length===0)return!1;const i=r[r.length-1];return String(i?.senderRole||"")==="employee"}function B2(){const r=U2()==="admin",i=r?"Admin":"Payroll Manager",[c,m]=x.useState(!0),[u,h]=x.useState(!1),[g,p]=x.useState({kind:"info",text:""}),[b,j]=x.useState({kind:"info",text:""}),[v,D]=x.useState(""),[C,z]=x.useState([]),[_,k]=x.useState("all"),[L,N]=x.useState("all"),[U,M]=x.useState(!1),[J,te]=x.useState(null),[q,Y]=x.useState(""),[I,T]=x.useState([]),[P,$]=x.useState({status:"",priority:""});async function le(){m(!0),p({kind:"info",text:""});try{const H=await _n({q:v,status:_==="all"?"":_});let ue=Array.isArray(H)?H:[];ue=ue.filter(w=>r?w.type==="technical":w.type==="payroll"),L!=="all"&&(ue=ue.filter(w=>w.priority===L)),z(ue)}catch(H){p({kind:"error",text:H.message||"Failed to load tickets."})}finally{m(!1)}}x.useEffect(()=>{le()},[]),x.useEffect(()=>{le()},[_,L]);async function ie(H){h(!0),j({kind:"info",text:""});try{const ue=await rm(H);te(ue),$({status:ue.status||"not_started",priority:ue.priority||"low"}),Y(""),T([]),M(!0)}catch(ue){p({kind:"error",text:ue.message||"Failed to open ticket."})}finally{h(!1)}}async function W(){if(!(!J?._id||u)){h(!0),j({kind:"info",text:""});try{const H={};if(P.status&&P.status!==J.status&&(H.status=P.status),P.priority&&P.priority!==J.priority&&(H.priority=P.priority),Object.keys(H).length===0){j({kind:"info",text:"No changes to save."});return}const ue=await UN(J._id,H);te(ue),j({kind:"success",text:"Ticket updated."}),await le()}catch(H){j({kind:"error",text:H.message||"Failed to update ticket."})}finally{h(!1)}}}async function R(){if(!(!J?._id||u)){h(!0),j({kind:"info",text:""});try{const H=await zb(J._id,{text:q,files:I});te(H),Y(""),T([]),await le()}catch(H){j({kind:"error",text:H.message||"Failed to send message."})}finally{h(!1)}}}const ee=x.useMemo(()=>{const H=v.trim().toLowerCase();return H?C.filter(ue=>String(ue.title||"").toLowerCase().includes(H)):C},[C,v]),Q=r?"No technical tickets assigned to Admin yet.":"No payroll tickets assigned to Payroll Manager yet.";return t.jsx(Nt,{title:"Support Tickets",children:t.jsxs("div",{className:"bg-slate-100 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(Ap,{kind:g.kind,message:g.text,onClose:()=>p({kind:"info",text:""})}),t.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"Support Tickets"}),t.jsxs("div",{className:"text-sm text-slate-600",children:["Viewing tickets assigned to: ",t.jsx("span",{className:"font-semibold",children:i}),r?" (Technical)":" (Payroll)"]})]}),t.jsx("button",{type:"button",onClick:le,className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",disabled:u,children:"Refresh"})]}),t.jsxs("div",{className:"rounded-3xl bg-white border border-slate-200 p-5 shadow-sm",children:[t.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[t.jsx("input",{value:v,onChange:H=>D(H.target.value),placeholder:"Search tickets...",className:"w-full rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white"}),t.jsxs("select",{value:_,onChange:H=>k(H.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white text-slate-900",disabled:u,children:[t.jsx("option",{value:"all",children:"All status"}),t.jsx("option",{value:"not_started",children:"Not started"}),t.jsx("option",{value:"in_progress",children:"In progress"}),t.jsx("option",{value:"resolved",children:"Resolved"}),t.jsx("option",{value:"closed",children:"Closed"})]}),t.jsxs("select",{value:L,onChange:H=>N(H.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white text-slate-900",disabled:u,children:[t.jsx("option",{value:"all",children:"All priority"}),t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"})]})]}),t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3 text-xs text-slate-700",children:[t.jsx("span",{className:"font-semibold",children:"Uploads:"})," ",Rp]})]}),c?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):ee.length===0?t.jsx("div",{className:"text-sm text-slate-700",children:Q}):t.jsx("div",{className:"space-y-3",children:ee.map(H=>{const ue=z2(H);return t.jsx("div",{className:Ql("rounded-2xl border bg-white px-4 py-3",ue?"border-amber-200":"border-slate-200"),children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:H.title}),ue?t.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border border-amber-200 bg-amber-50 text-amber-800",children:"New"}):null]}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Last action: ",qu(H.lastActionAt),"  Created: ",_2(H.createdAt)]}),H.employeeNumber||H.employeeEmail?t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[H.employeeNumber?t.jsxs(t.Fragment,{children:["Employee: ",t.jsx("span",{className:"font-semibold",children:H.employeeNumber})]}):null,H.employeeNumber&&H.employeeEmail?t.jsx("span",{children:"  "}):null,H.employeeEmail?t.jsxs(t.Fragment,{children:["Email: ",t.jsx("span",{className:"font-semibold",children:H.employeeEmail})]}):null]}):null,t.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[t.jsx(Dp,{type:H.type}),t.jsx(Ep,{status:H.status}),t.jsx(Tp,{priority:H.priority})]})]}),t.jsx("div",{className:"flex items-center gap-4 shrink-0",children:t.jsx("button",{type:"button",onClick:()=>ie(H._id),className:"text-sm font-semibold text-slate-700 hover:underline",disabled:u,children:"View"})})]})},H._id)})})]}),t.jsxs(L2,{open:U,title:J?`Ticket: ${J.title}`:"Ticket",onClose:()=>!u&&M(!1),children:[t.jsx(Ap,{kind:b.kind,message:b.text,onClose:()=>j({kind:"info",text:""})}),J?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx(Dp,{type:J.type}),t.jsx(Ep,{status:J.status}),t.jsx(Tp,{priority:J.priority}),t.jsxs("span",{className:"text-xs text-slate-600 ml-auto",children:["Created ",qu(J.createdAt)]})]}),J.employeeNumber||J.employeeEmail?t.jsxs("div",{className:"text-xs text-slate-600 mt-2",children:[J.employeeNumber?t.jsxs(t.Fragment,{children:["Employee: ",t.jsx("span",{className:"font-semibold",children:J.employeeNumber})]}):null,J.employeeNumber&&J.employeeEmail?t.jsx("span",{children:"  "}):null,J.employeeEmail?t.jsxs(t.Fragment,{children:["Email: ",t.jsx("span",{className:"font-semibold",children:J.employeeEmail})]}):null]}):null,J.description?t.jsx("div",{className:"text-sm text-slate-800 mt-3 whitespace-pre-wrap",children:J.description}):null,J.attachments?.length?t.jsxs("div",{className:"mt-3",children:[t.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-1",children:"Attachments"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:J.attachments.map((H,ue)=>t.jsx("a",{href:`http://localhost:5000${H.url}`,target:"_blank",rel:"noreferrer",className:"text-xs rounded-xl border border-slate-200 bg-white px-3 py-2 hover:bg-slate-50 text-indigo-950",children:H.originalName},ue))})]}):null]}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Update ticket"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Status"}),t.jsxs("select",{value:P.status||"not_started",onChange:H=>$(ue=>({...ue,status:H.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",disabled:u,children:[t.jsx("option",{value:"not_started",children:"Not started"}),t.jsx("option",{value:"in_progress",children:"In progress"}),t.jsx("option",{value:"resolved",children:"Resolved"}),t.jsx("option",{value:"closed",children:"Closed"})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Priority"}),t.jsxs("select",{value:P.priority||"low",onChange:H=>$(ue=>({...ue,priority:H.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",disabled:u,children:[t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"})]})]})]}),t.jsx("div",{className:"pt-3 flex items-center justify-end gap-3",children:t.jsx("button",{type:"button",onClick:W,className:Ql("rounded-2xl px-5 py-2 text-sm font-semibold border",u?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:u,children:u?"Saving...":"Save changes"})})]}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Discussion"}),t.jsx("div",{className:"space-y-3 max-h-[320px] overflow-auto pr-2",children:J.messages?.length?J.messages.map(H=>t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsx("div",{className:"text-xs font-semibold text-slate-700",children:H.senderRole}),t.jsx("div",{className:"text-[11px] text-slate-500",children:qu(H.createdAt)})]}),H.text?t.jsx("div",{className:"text-sm text-slate-800 mt-2 whitespace-pre-wrap",children:H.text}):null,H.attachments?.length?t.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:H.attachments.map((ue,w)=>t.jsx("a",{href:`http://localhost:5000${ue.url}`,target:"_blank",rel:"noreferrer",className:"text-xs rounded-xl border border-slate-200 bg-white px-3 py-2 hover:bg-slate-50 text-indigo-950",children:ue.originalName},w))}):null]},H._id)):t.jsx("div",{className:"text-sm text-slate-600",children:"No messages yet."})}),t.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 p-3 bg-white",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Reply"}),t.jsx("textarea",{value:q,onChange:H=>Y(H.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[100px] bg-white",placeholder:"Write a message..."}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:Rp}),t.jsx("input",{type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg,.doc,.docx,.txt",onChange:H=>T(Array.from(H.target.files||[])),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{className:"pt-3 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>M(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",disabled:u,children:"Close"}),t.jsx("button",{type:"button",onClick:R,className:Ql("rounded-2xl px-5 py-2 text-sm font-semibold border",u?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:u,children:u?"Sending...":"Send"})]})]})]})]}):null]})]})})}function En(...a){return a.filter(Boolean).join(" ")}function cm(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?"-":r.toLocaleDateString()}function Mp(a,r){const i=cm(a),c=cm(r);return`${i}  ${c}`}function Op({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:En("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold","aria-label":"Close message",type:"button",children:""})]})})}function $2({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[980px]"}){return a?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:c}),t.jsx("div",{className:En("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700","aria-label":"Close",type:"button",children:""})]}),t.jsx("div",{className:"max-h-[78vh] overflow-auto p-6 text-slate-900 [&_select]:text-slate-900 [&_input]:text-slate-900 [&_textarea]:text-slate-900",children:i})]})})]}):null}function _p({status:a}){const r={inprogress:"bg-sky-50 text-sky-700 border-sky-100",accepted:"bg-emerald-50 text-emerald-700 border-emerald-100",rejected:"bg-rose-50 text-rose-700 border-rose-100",cancelled:"bg-slate-100 text-slate-700 border-slate-200"},i={inprogress:"In progress",accepted:"Accepted",rejected:"Rejected",cancelled:"Cancelled"};return t.jsx("span",{className:En("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.inprogress),children:i[a]||"In progress"})}function Lp({type:a}){const r={"Annual Leave":"bg-violet-50 text-violet-700 border-violet-100","Sick Leave":"bg-amber-50 text-amber-700 border-amber-100","Wedding Leave":"bg-emerald-50 text-emerald-700 border-emerald-100","Unpaid Leave":"bg-slate-100 text-slate-700 border-slate-200","Work From Home":"bg-sky-50 text-sky-700 border-sky-100"};return t.jsx("span",{className:En("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||"bg-slate-100 text-slate-700 border-slate-200"),children:a})}function q2(){try{return(JSON.parse(localStorage.getItem("user")||"{}")||{})?.role||""}catch{return""}}function H2(){const r=q2()==="admin"?"Admin":"Payroll Manager",[i,c]=x.useState(!0),[m,u]=x.useState(!1),[h,g]=x.useState({kind:"info",text:""}),[p,b]=x.useState({kind:"info",text:""}),[j,v]=x.useState(""),[D,C]=x.useState("inprogress"),[z,_]=x.useState([]),[k,L]=x.useState(!1),[N,U]=x.useState(null),[M,J]=x.useState("");async function te(){c(!0),g({kind:"info",text:""});try{const T=await Nm({status:D});_(Array.isArray(T)?T:[])}catch(T){g({kind:"error",text:T.message||"Failed to load approvals."})}finally{c(!1)}}x.useEffect(()=>{te()},[D]);const q=x.useMemo(()=>{const T=j.trim().toLowerCase();return T?z.filter(P=>{const $=P.employee||{};return String(P.type||"").toLowerCase().includes(T)||String($.name||"").toLowerCase().includes(T)||String($.email||"").toLowerCase().includes(T)||String($.employeeNumber||"").toLowerCase().includes(T)}):z},[z,j]);function Y(T){U(T),J(""),b({kind:"info",text:""}),L(!0)}async function I(T){if(!(!N?.id||m)){if(N.status!=="inprogress"){b({kind:"error",text:"Only in-progress requests can be decided."});return}u(!0),b({kind:"info",text:""});try{await FN(N.id,{status:T,note:M}),b({kind:"success",text:T==="accepted"?"Approved.":"Rejected."}),L(!1),await te()}catch(P){b({kind:"error",text:P.message||"Failed to save decision."})}finally{u(!1)}}}return t.jsxs(Nt,{title:"Leave Approvals",children:[t.jsx(Op,{kind:h.kind,message:h.text,onClose:()=>g({kind:"info",text:""})}),t.jsxs("div",{className:"rounded-[28px] bg-slate-50 border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-slate-200",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"Leave Approvals"}),t.jsxs("div",{className:"text-sm text-slate-600",children:["Reviewing as: ",t.jsx("span",{className:"font-semibold",children:r})]})]}),t.jsx("button",{type:"button",onClick:te,className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-indigo-950",disabled:m,children:"Refresh"})]}),t.jsx("div",{className:"mt-4 flex flex-col gap-3",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[t.jsx("input",{value:j,onChange:T=>v(T.target.value),placeholder:"Search employee / email / type...",className:"w-full rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white"}),t.jsxs("select",{value:D,onChange:T=>C(T.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white text-slate-900",disabled:m,children:[t.jsx("option",{value:"inprogress",children:"In progress (to review)"}),t.jsx("option",{value:"accepted",children:"Accepted"}),t.jsx("option",{value:"rejected",children:"Rejected"}),t.jsx("option",{value:"cancelled",children:"Cancelled"}),t.jsx("option",{value:"all",children:"All"})]})]})})]}),t.jsx("div",{className:"p-6",children:i?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):q.length===0?t.jsx("div",{className:"text-sm text-slate-700",children:"No leave requests found."}):t.jsx("div",{className:"space-y-3",children:q.map(T=>{const P=T.employee||{};return t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-sm font-semibold text-slate-900 truncate",children:[P.name||"Employee","  ",Mp(T.start,T.end)]}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[P.employeeNumber?`Employee: ${P.employeeNumber}`:"Employee: -",P.email?`  Email: ${P.email}`:""]}),t.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[t.jsx(Lp,{type:T.type}),t.jsx(_p,{status:T.status})]})]}),t.jsx("div",{className:"flex items-center gap-4 shrink-0",children:t.jsx("button",{type:"button",onClick:()=>Y(T),className:"text-sm font-semibold text-slate-700 hover:underline",disabled:m,children:"View"})})]})},T.id)})})})]}),t.jsxs($2,{open:k,title:N?`Leave Request  ${N.type}`:"Leave Request",onClose:()=>!m&&L(!1),children:[t.jsx(Op,{kind:p.kind,message:p.text,onClose:()=>b({kind:"info",text:""})}),N?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx(Lp,{type:N.type}),t.jsx(_p,{status:N.status}),t.jsxs("span",{className:"text-xs text-slate-600 ml-auto",children:["Created ",cm(N.createdAt)]})]}),N.employee?t.jsxs("div",{className:"text-xs text-slate-600 mt-2",children:[N.employee.employeeNumber?t.jsxs(t.Fragment,{children:["Employee: ",t.jsx("span",{className:"font-semibold",children:N.employee.employeeNumber})]}):null,N.employee.employeeNumber&&N.employee.email?t.jsx("span",{children:"  "}):null,N.employee.email?t.jsxs(t.Fragment,{children:["Email: ",t.jsx("span",{className:"font-semibold",children:N.employee.email})]}):null]}):null,t.jsxs("div",{className:"text-sm text-slate-800 mt-3",children:[t.jsx("div",{className:"font-semibold",children:"Date range"}),t.jsx("div",{children:Mp(N.start,N.end)})]}),N.delegate?t.jsxs("div",{className:"text-sm text-slate-800 mt-3",children:[t.jsx("div",{className:"font-semibold",children:"Delegate"}),t.jsx("div",{children:N.delegate})]}):null,N.comments?t.jsxs("div",{className:"text-sm text-slate-800 mt-3 whitespace-pre-wrap",children:[t.jsx("div",{className:"font-semibold",children:"Employee comments"}),t.jsx("div",{children:N.comments})]}):null,N.decisionNote?t.jsxs("div",{className:"text-sm text-slate-800 mt-3 whitespace-pre-wrap",children:[t.jsx("div",{className:"font-semibold",children:"Decision note"}),t.jsx("div",{children:N.decisionNote})]}):null]}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Decision"}),t.jsx("div",{className:"text-xs text-slate-600 mb-2",children:"Optional note."}),t.jsx("textarea",{value:M,onChange:T=>J(T.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[110px] bg-white",placeholder:"Write a note (optional)",disabled:m}),t.jsxs("div",{className:"pt-3 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>L(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-indigo-950",disabled:m,children:"Close"}),t.jsx("button",{type:"button",onClick:()=>I("rejected"),className:En("rounded-2xl px-5 py-2 text-sm font-semibold border",m?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-rose-50 text-rose-700 border-rose-200 hover:opacity-90"),disabled:m||N.status!=="inprogress",title:N.status!=="inprogress"?"Already decided":"Reject",children:m?"Saving...":"Reject"}),t.jsx("button",{type:"button",onClick:()=>I("accepted"),className:En("rounded-2xl px-5 py-2 text-sm font-semibold border",m?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:m||N.status!=="inprogress",title:N.status!=="inprogress"?"Already decided":"Approve",children:m?"Saving...":"Approve"})]})]})]}):null]})]})}function $r(...a){return a.filter(Boolean).join(" ")}function Up({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:$r("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold","aria-label":"Close message",type:"button",children:""})]})})}function P2({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[980px]"}){return a?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:c}),t.jsx("div",{className:$r("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700","aria-label":"Close",type:"button",children:""})]}),t.jsx("div",{className:"max-h-[78vh] overflow-auto p-6 text-slate-900 [&_select]:text-slate-900 [&_input]:text-slate-900 [&_textarea]:text-slate-900",children:i})]})})]}):null}function Or({tone:a="slate",children:r}){const i={slate:"bg-slate-100 text-slate-700 border-slate-200",amber:"bg-amber-50 text-amber-700 border-amber-100",emerald:"bg-emerald-50 text-emerald-700 border-emerald-100",rose:"bg-rose-50 text-rose-700 border-rose-100",sky:"bg-sky-50 text-sky-700 border-sky-100",violet:"bg-violet-50 text-violet-700 border-violet-100"};return t.jsx("span",{className:$r("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",i[a]||i.slate),children:r})}function Y2(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?"-":r.toLocaleString()}function To(a){return a==="bank"?"Bank":"Personal"}function zp(a){return a==="pending"?"amber":a==="approved"?"emerald":a==="rejected"?"rose":"slate"}function G2(){const[a,r]=x.useState(!0),[i,c]=x.useState(!1),[m,u]=x.useState({kind:"info",text:""}),[h,g]=x.useState({kind:"info",text:""}),[p,b]=x.useState(""),[j,v]=x.useState("pending"),[D,C]=x.useState([]),[z,_]=x.useState(!1),[k,L]=x.useState(null),[N,U]=x.useState("");async function M(){r(!0),u({kind:"info",text:""});try{const Y=await Tm({status:j});C(Array.isArray(Y)?Y:[])}catch(Y){u({kind:"error",text:Y.message||"Failed to load requests."})}finally{r(!1)}}x.useEffect(()=>{M()},[j]);const J=x.useMemo(()=>{const Y=p.trim().toLowerCase();return Y?D.filter(I=>{const T=I.employee||{};return String(I.category||"").toLowerCase().includes(Y)||String(T.fullName||"").toLowerCase().includes(Y)||String(T.email||"").toLowerCase().includes(Y)||String(T.employeeNumber||"").toLowerCase().includes(Y)}):D},[D,p]);function te(Y){L(Y),U(""),g({kind:"info",text:""}),_(!0)}async function q(Y){if(!(!k?.id||i)){if(k.status!=="pending"){g({kind:"error",text:"Only pending requests can be decided."});return}c(!0),g({kind:"info",text:""});try{await Mw(k.id,{status:Y,reviewNote:N}),g({kind:"success",text:Y==="approved"?"Approved.":"Rejected."}),_(!1),await M()}catch(I){g({kind:"error",text:I.message||"Failed to save decision."})}finally{c(!1)}}}return t.jsx(Nt,{title:"Profile Change Requests",hideWelcome:!0,children:t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(Up,{kind:m.kind,message:m.text,onClose:()=>u({kind:"info",text:""})}),t.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"Profile Change Requests"}),t.jsx("div",{className:"text-sm text-slate-600",children:"Review employee requests and approve/reject."})]}),t.jsx("button",{type:"button",onClick:M,className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-indigo-950",disabled:i,children:"Refresh"})]}),t.jsxs("div",{className:"rounded-3xl bg-white border border-slate-200 p-5 shadow-sm",children:[t.jsx("div",{className:"flex flex-col gap-3 mb-4",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[t.jsx("input",{value:p,onChange:Y=>b(Y.target.value),placeholder:"Search employee / email / category...",className:"w-full rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white"}),t.jsxs("select",{value:j,onChange:Y=>v(Y.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white text-slate-900",disabled:i,children:[t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"approved",children:"Approved"}),t.jsx("option",{value:"rejected",children:"Rejected"}),t.jsx("option",{value:"all",children:"All"})]})]})}),a?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):J.length===0?t.jsx("div",{className:"text-sm text-slate-700",children:"No requests found."}):t.jsx("div",{className:"space-y-3",children:J.map(Y=>{const I=Y.employee||{},T=Object.keys(Y.payload||{});return t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-sm font-semibold text-slate-900 truncate",children:[I.fullName||"Employee","  ",To(Y.category)," change"]}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[I.employeeNumber?`Employee: ${I.employeeNumber}`:"Employee: -",I.email?`  Email: ${I.email}`:""]}),t.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[t.jsx(Or,{tone:"violet",children:To(Y.category)}),t.jsx(Or,{tone:zp(Y.status),children:String(Y.status||"").toUpperCase()}),t.jsx(Or,{tone:"slate",children:T.length?`${T.length} field(s)`:"No fields"})]})]}),t.jsx("div",{className:"flex items-center gap-4 shrink-0",children:t.jsx("button",{type:"button",onClick:()=>te(Y),className:"text-sm font-semibold text-slate-700 hover:underline",disabled:i,children:"View"})})]})},Y.id)})})]}),t.jsxs(P2,{open:z,title:k?`Profile Change  ${To(k.category)}`:"Profile Change",onClose:()=>!i&&_(!1),children:[t.jsx(Up,{kind:h.kind,message:h.text,onClose:()=>g({kind:"info",text:""})}),k?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx(Or,{tone:"violet",children:To(k.category)}),t.jsx(Or,{tone:zp(k.status),children:String(k.status||"").toUpperCase()}),t.jsxs("span",{className:"text-xs text-slate-600 ml-auto",children:["Submitted ",Y2(k.createdAt)]})]}),k.employee?t.jsxs("div",{className:"text-xs text-slate-600 mt-2",children:[k.employee.employeeNumber?t.jsxs(t.Fragment,{children:["Employee: ",t.jsx("span",{className:"font-semibold",children:k.employee.employeeNumber})]}):null,k.employee.employeeNumber&&k.employee.email?t.jsx("span",{children:"  "}):null,k.employee.email?t.jsxs(t.Fragment,{children:["Email: ",t.jsx("span",{className:"font-semibold",children:k.employee.email})]}):null]}):null,k.note?t.jsxs("div",{className:"mt-3 text-sm text-slate-800 whitespace-pre-wrap",children:[t.jsx("div",{className:"font-semibold",children:"Employee note"}),t.jsx("div",{children:k.note})]}):null]}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Requested changes"}),t.jsx("div",{className:"space-y-2",children:Object.keys(k.payload||{}).length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"No payload."}):Object.entries(k.payload||{}).map(([Y,I])=>t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3",children:[t.jsx("div",{className:"text-xs text-slate-500",children:Y}),t.jsx("div",{className:"text-sm font-semibold text-slate-900 break-words",children:String(I)})]},Y))}),k.reviewNote?t.jsxs("div",{className:"mt-4 text-sm text-slate-800 whitespace-pre-wrap",children:[t.jsx("div",{className:"font-semibold",children:"Previous reviewer note"}),t.jsx("div",{children:k.reviewNote})]}):null,t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Reviewer note (optional)"}),t.jsx("textarea",{value:N,onChange:Y=>U(Y.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[110px] bg-white",placeholder:"Write a short reason (optional)",disabled:i})]}),t.jsxs("div",{className:"pt-3 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>_(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-indigo-950",disabled:i,children:"Close"}),t.jsx("button",{type:"button",onClick:()=>q("rejected"),className:$r("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-rose-50 text-rose-700 border-rose-200 hover:opacity-90"),disabled:i||k.status!=="pending",title:k.status!=="pending"?"Already decided":"Reject",children:i?"Saving...":"Reject"}),t.jsx("button",{type:"button",onClick:()=>q("approved"),className:$r("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:i||k.status!=="pending",title:k.status!=="pending"?"Already decided":"Approve (applies changes)",children:i?"Saving...":"Approve"})]})]})]}):null]})]})})}const tg="http://localhost:5000/api/overtime";function sg(){return{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}async function lg(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok){const c=i?.message||`Request failed (${a.status})`;throw new Error(c)}return i}async function J2({status:a="inprogress",month:r=""}={}){const i=new URLSearchParams;a&&i.set("status",a),r&&i.set("month",r);const c=await fetch(`${tg}/approvals?${i.toString()}`,{headers:sg()});return lg(c)}async function V2(a,{status:r,managerNote:i=""}){const c=await fetch(`${tg}/approvals/${a}`,{method:"PUT",headers:sg(),body:JSON.stringify({status:r,managerNote:i})});return lg(c)}function qr(...a){return a.filter(Boolean).join(" ")}function X2(a){return String(a).padStart(2,"0")}function Hu(a=new Date){return`${a.getFullYear()}-${X2(a.getMonth()+1)}`}function Q2(a){const[r,i]=a.split("-").map(Number);return new Date(r,i-1,1).toLocaleDateString(void 0,{month:"long",year:"numeric"})}function Bp(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?a:r.toLocaleDateString()}function F2(){try{return(JSON.parse(localStorage.getItem("user")||"{}")||{})?.role||""}catch{return""}}function $p({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:qr("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold","aria-label":"Close message",type:"button",children:""})]})})}function K2({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[980px]"}){return a?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:c}),t.jsx("div",{className:qr("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700","aria-label":"Close",type:"button",children:""})]}),t.jsx("div",{className:"max-h-[78vh] overflow-auto p-6 text-slate-900 [&_select]:text-slate-900 [&_input]:text-slate-900 [&_textarea]:text-slate-900",children:i})]})})]}):null}function qp({status:a}){const r={inprogress:"bg-sky-50 text-sky-700 border-sky-100",accepted:"bg-emerald-50 text-emerald-700 border-emerald-100",rejected:"bg-rose-50 text-rose-700 border-rose-100",cancelled:"bg-slate-100 text-slate-700 border-slate-200"},i={inprogress:"In progress",accepted:"Accepted",rejected:"Rejected",cancelled:"Cancelled"};return t.jsx("span",{className:qr("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.inprogress),children:i[a]||"In progress"})}function Z2(){const r=F2()==="admin"?"Admin":"Payroll Manager",[i,c]=x.useState(()=>Hu(new Date)),[m,u]=x.useState("inprogress"),[h,g]=x.useState(""),[p,b]=x.useState([]),[j,v]=x.useState(!0),[D,C]=x.useState(!1),[z,_]=x.useState({kind:"info",text:""}),[k,L]=x.useState({kind:"info",text:""}),[N,U]=x.useState(!1),[M,J]=x.useState(null),[te,q]=x.useState("");function Y(){const[ie,W]=i.split("-").map(Number),R=new Date(ie,W-2,1);c(Hu(R))}function I(){const[ie,W]=i.split("-").map(Number),R=new Date(ie,W,1);c(Hu(R))}async function T(){v(!0),_({kind:"info",text:""});try{const ie=await J2({status:m,month:i});b(Array.isArray(ie)?ie:[])}catch(ie){_({kind:"error",text:ie.message||"Failed to load overtime approvals."})}finally{v(!1)}}x.useEffect(()=>{T()},[m,i]);const P=x.useMemo(()=>{const ie=h.trim().toLowerCase();return ie?p.filter(W=>{const R=W.employee||{};return String(R.name||"").toLowerCase().includes(ie)||String(R.email||"").toLowerCase().includes(ie)||String(R.employeeNumber||"").toLowerCase().includes(ie)||String(W.reason||"").toLowerCase().includes(ie)||String(W.date||"").toLowerCase().includes(ie)}):p},[p,h]);function $(ie){J(ie),q(ie.managerNote||""),L({kind:"info",text:""}),U(!0)}async function le(ie){if(!(!M?.id||D)){if(M.status!=="inprogress"){L({kind:"error",text:"Only in-progress requests can be decided."});return}C(!0),L({kind:"info",text:""});try{await V2(M.id,{status:ie,managerNote:te}),U(!1),_({kind:"success",text:ie==="accepted"?"Approved.":"Rejected."}),await T()}catch(W){L({kind:"error",text:W.message||"Failed to save decision."})}finally{C(!1)}}}return t.jsxs(Nt,{title:"Overtime Approvals",children:[t.jsx($p,{kind:z.kind,message:z.text,onClose:()=>_({kind:"info",text:""})}),t.jsxs("div",{className:"rounded-[28px] bg-slate-50 border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-slate-200",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"Overtime Approvals"}),t.jsxs("div",{className:"text-sm text-slate-600",children:["Reviewing as: ",t.jsx("span",{className:"font-semibold",children:r})]})]}),t.jsx("button",{type:"button",onClick:T,className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-indigo-950",disabled:D,children:"Refresh"})]}),t.jsx("div",{className:"mt-4 flex flex-col gap-3",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[t.jsx("input",{value:h,onChange:ie=>g(ie.target.value),placeholder:"Search employee / email / reason / date...",className:"w-full rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white"}),t.jsxs("select",{value:m,onChange:ie=>u(ie.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white text-slate-900",disabled:D,children:[t.jsx("option",{value:"inprogress",children:"In progress (to review)"}),t.jsx("option",{value:"accepted",children:"Accepted"}),t.jsx("option",{value:"rejected",children:"Rejected"}),t.jsx("option",{value:"cancelled",children:"Cancelled"}),t.jsx("option",{value:"all",children:"All"})]}),t.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[t.jsx("button",{type:"button",onClick:Y,className:"h-10 w-10 rounded-2xl border border-slate-200 hover:bg-slate-100 text-slate-700 font-bold",disabled:D,children:""}),t.jsx("div",{className:"text-sm font-semibold text-slate-800 min-w-[160px] text-center",children:Q2(i)}),t.jsx("button",{type:"button",onClick:I,className:"h-10 w-10 rounded-2xl border border-slate-200 hover:bg-slate-100 text-slate-700 font-bold",disabled:D,children:""})]})]})})]}),t.jsx("div",{className:"p-6",children:j?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):P.length===0?t.jsx("div",{className:"text-sm text-slate-700",children:"No overtime requests found."}):t.jsx("div",{className:"space-y-3",children:P.map(ie=>{const W=ie.employee||{};return t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-sm font-semibold text-slate-900 truncate",children:[W.name||"Employee","  ",Bp(ie.date),"  ",ie.hours," hour(s)"]}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[W.employeeNumber?`Employee: ${W.employeeNumber}`:"Employee: -",W.email?`  Email: ${W.email}`:""]}),t.jsx("div",{className:"text-xs text-slate-700 mt-2 break-words",children:ie.reason}),t.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[t.jsx(qp,{status:ie.status}),ie.startTime&&ie.endTime?t.jsxs("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border bg-slate-50 text-slate-700 border-slate-200",children:[ie.startTime,"  ",ie.endTime]}):t.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border bg-slate-50 text-slate-700 border-slate-200",children:"Manual hours"})]})]}),t.jsx("div",{className:"flex items-center gap-4 shrink-0",children:t.jsx("button",{type:"button",onClick:()=>$(ie),className:"text-sm font-semibold text-slate-700 hover:underline",disabled:D,children:"View"})})]})},ie.id)})})})]}),t.jsxs(K2,{open:N,title:M?`Overtime  ${M.employee?.name||"Employee"}`:"Overtime",onClose:()=>!D&&U(!1),children:[t.jsx($p,{kind:k.kind,message:k.text,onClose:()=>L({kind:"info",text:""})}),M?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx(qp,{status:M.status}),t.jsxs("span",{className:"text-xs text-slate-600 ml-auto",children:["Date ",Bp(M.date),"  ",M.hours," hour(s)"]})]}),t.jsxs("div",{className:"text-xs text-slate-600 mt-2",children:[M.employee?.employeeNumber?t.jsxs(t.Fragment,{children:["Employee: ",t.jsx("span",{className:"font-semibold",children:M.employee.employeeNumber})]}):null,M.employee?.employeeNumber&&M.employee?.email?t.jsx("span",{children:"  "}):null,M.employee?.email?t.jsxs(t.Fragment,{children:["Email: ",t.jsx("span",{className:"font-semibold",children:M.employee.email})]}):null]}),t.jsxs("div",{className:"text-sm text-slate-800 mt-3",children:[t.jsx("div",{className:"font-semibold",children:"Time"}),t.jsx("div",{children:M.startTime&&M.endTime?`${M.startTime}  ${M.endTime}`:"Manual hours"})]}),t.jsxs("div",{className:"text-sm text-slate-800 mt-3 whitespace-pre-wrap",children:[t.jsx("div",{className:"font-semibold",children:"Reason"}),t.jsx("div",{children:M.reason})]})]}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Decision"}),t.jsx("div",{className:"text-xs text-slate-600 mb-2",children:"Optional manager note (visible to employee)."}),t.jsx("textarea",{value:te,onChange:ie=>q(ie.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[110px] bg-white",placeholder:"Write a note (optional)",disabled:D}),t.jsxs("div",{className:"pt-3 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>U(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-indigo-950",disabled:D,children:"Close"}),t.jsx("button",{type:"button",onClick:()=>le("rejected"),className:qr("rounded-2xl px-5 py-2 text-sm font-semibold border",D?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-rose-50 text-rose-700 border-rose-200 hover:opacity-90"),disabled:D||M.status!=="inprogress",title:M.status!=="inprogress"?"Already decided":"Reject",children:D?"Saving...":"Reject"}),t.jsx("button",{type:"button",onClick:()=>le("accepted"),className:qr("rounded-2xl px-5 py-2 text-sm font-semibold border",D?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:opacity-90"),disabled:D||M.status!=="inprogress",title:M.status!=="inprogress"?"Already decided":"Approve",children:D?"Saving...":"Approve"})]})]})]}):null]})]})}const ag="http://localhost:5000/api/progressions";function ng(){return{Authorization:`Bearer ${localStorage.getItem("token")}`}}async function rg(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok)throw new Error(i?.message||`Request failed (${a.status})`);return i}async function I2(){const a=await fetch(`${ag}/backoffice/employees`,{headers:ng()});return rg(a)}async function W2(a){const r=await fetch(`${ag}/backoffice/${a}`,{headers:ng()});return rg(r)}function Yr(...a){return a.filter(Boolean).join(" ")}function Pu(a){if(!a)return"-";const r=new Date(a);return Number.isNaN(r.getTime())?"-":r.toLocaleDateString()}function Hp(a){return Math.round(Number(a||0)/(1024*1024)*10)/10}function eS({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:Yr("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold","aria-label":"Close message",type:"button",children:""})]})})}function Pp({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[980px]"}){return a?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:c}),t.jsx("div",{className:Yr("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700","aria-label":"Close",type:"button",children:""})]}),t.jsx("div",{className:"max-h-[78vh] overflow-auto p-6 text-slate-900",children:i})]})})]}):null}function Yu({title:a,children:r,className:i=""}){return t.jsxs("div",{className:Yr("rounded-3xl bg-white border border-slate-200 p-5 shadow-sm",i),children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function Yp({status:a}){const r={not_started:"bg-slate-50 text-slate-700 border-slate-200",in_progress:"bg-sky-50 text-sky-700 border-sky-100",completed:"bg-emerald-50 text-emerald-700 border-emerald-100"},i={not_started:"Not started",in_progress:"In progress",completed:"Completed"};return t.jsx("span",{className:Yr("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.not_started),children:i[a]||"Not started"})}function Gp({priority:a}){const r={low:"bg-emerald-50 text-emerald-700 border-emerald-100",medium:"bg-amber-50 text-amber-700 border-amber-100",high:"bg-rose-50 text-rose-700 border-rose-100"},i={low:"Low",medium:"Medium",high:"High"};return t.jsx("span",{className:Yr("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border",r[a]||r.low),children:i[a]||"Low"})}function tS(){const[a,r]=x.useState(!0),[i,c]=x.useState(!1),[m,u]=x.useState({kind:"info",text:""}),[h,g]=x.useState([]),[p,b]=x.useState(""),[j,v]=x.useState(null),[D,C]=x.useState(""),[z,_]=x.useState(!1),[k,L]=x.useState(!1);async function N(){r(!0),u({kind:"info",text:""});try{const te=await I2();g(Array.isArray(te)?te:[])}catch(te){u({kind:"error",text:te.message||"Failed to load employees."})}finally{r(!1)}}async function U(te){if(!te){v(null);return}c(!0),u({kind:"info",text:""});try{const q=await W2(te);v(q||null)}catch(q){u({kind:"error",text:q.message||"Failed to load employee progressions."}),v(null)}finally{c(!1)}}x.useEffect(()=>{N()},[]),x.useEffect(()=>{U(p)},[p]);const M=x.useMemo(()=>{const te=j?.projects||[],q=D.trim().toLowerCase();return q?te.filter(Y=>String(Y.name||"").toLowerCase().includes(q)||String(Y.description||"").toLowerCase().includes(q)||String(Y.status||"").toLowerCase().includes(q)||String(Y.priority||"").toLowerCase().includes(q)):te},[j,D]),J=x.useMemo(()=>{const te=j?.certificates||[],q=D.trim().toLowerCase();return q?te.filter(Y=>String(Y.title||"").toLowerCase().includes(q)||String(Y.originalName||"").toLowerCase().includes(q)):te},[j,D]);return t.jsxs(Nt,{title:"Progressions",children:[t.jsx(eS,{kind:m.kind,message:m.text,onClose:()=>u({kind:"info",text:""})}),t.jsxs("div",{className:"rounded-[28px] bg-slate-50 border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-slate-200",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"Progressions"}),t.jsx("div",{className:"text-sm text-slate-600",children:"View employee projects, CV and certificates."})]}),t.jsx("button",{type:"button",onClick:async()=>{await N(),p&&await U(p)},className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-indigo-950",disabled:i,children:"Refresh"})]}),t.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[t.jsxs("select",{value:p,onChange:te=>b(te.target.value),className:"w-full lg:max-w-[420px] rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white text-slate-900",disabled:a,children:[t.jsx("option",{value:"",children:"Select employee"}),h.map(te=>t.jsxs("option",{value:te.id,children:[te.employeeNumber?`${te.employeeNumber}  `:"",te.name,te.email?` (${te.email})`:""]},te.id))]}),t.jsx("input",{value:D,onChange:te=>C(te.target.value),placeholder:"Search projects / certificates...",className:"w-full rounded-2xl border border-slate-200 px-4 py-2 text-sm bg-white",disabled:!p})]}),j?.employee?t.jsxs("div",{className:"text-xs text-slate-600",children:["Viewing: ",t.jsx("span",{className:"font-semibold",children:j.employee.name}),j.employee.employeeNumber?t.jsxs("span",{children:["  ",j.employee.employeeNumber]}):null,j.employee.email?t.jsxs("span",{children:["  ",j.employee.email]}):null]}):null]})]}),t.jsx("div",{className:"p-6",children:p?i?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):j?t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[t.jsxs(Yu,{title:"Projects",className:"border-indigo-500/20",children:[t.jsx("div",{className:"text-3xl font-semibold text-slate-900",children:j.summary?.projectsTotal??0}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Total projects"}),t.jsx("div",{className:"mt-4 flex gap-3",children:t.jsx("button",{type:"button",onClick:()=>_(!0),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"View Projects"})}),j.projects?.[0]?t.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:j.projects[0].name}),t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx(Yp,{status:j.projects[0].status}),t.jsx(Gp,{priority:j.projects[0].priority})]})]}):null]}),t.jsx(Yu,{title:"CV",className:"border-emerald-500/20",children:j.cv?t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:j.cv.originalName}),t.jsxs("div",{className:"text-xs text-slate-600",children:[Hp(j.cv.size)," MB  Uploaded ",Pu(j.cv.uploadedAt)]}),t.jsx("div",{className:"flex gap-3 pt-2",children:t.jsx("a",{href:`http://localhost:5000${j.cv.url}`,target:"_blank",rel:"noreferrer",className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"View"})})]}):t.jsx("div",{className:"text-sm text-slate-700",children:"No CV uploaded."})}),t.jsxs(Yu,{title:"Certificates",className:"border-sky-500/20",children:[t.jsx("div",{className:"text-3xl font-semibold text-slate-900",children:j.summary?.certificatesTotal??0}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Total certificates"}),t.jsx("div",{className:"mt-4 flex gap-3",children:t.jsx("button",{type:"button",onClick:()=>L(!0),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"View Certificates"})})]})]}):t.jsx("div",{className:"text-sm text-slate-700",children:"No data."}):t.jsx("div",{className:"text-sm text-slate-700",children:"Select an employee to view progressions."})})]}),t.jsxs(Pp,{open:z,title:"Projects",onClose:()=>_(!1),widthClass:"sm:w-[980px]",children:[M.length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"No projects."}):t.jsx("div",{className:"space-y-3",children:M.map(te=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsx("div",{className:"flex items-start justify-between gap-4",children:t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:te.name}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Due: ",te.dueDate?Pu(te.dueDate):"-"]}),te.description?t.jsx("div",{className:"text-xs text-slate-700 mt-2 break-words",children:te.description}):null,t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx(Yp,{status:te.status}),t.jsx(Gp,{priority:te.priority})]})]})})},te.id))}),t.jsx("div",{className:"pt-4 flex justify-end",children:t.jsx("button",{type:"button",onClick:()=>_(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"Close"})})]}),t.jsxs(Pp,{open:k,title:"Certificates",onClose:()=>L(!1),widthClass:"sm:w-[980px]",children:[J.length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"No certificates."}):t.jsx("div",{className:"space-y-3",children:J.map(te=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:te.title?te.title:te.originalName}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[Hp(te.size)," MB  Uploaded ",Pu(te.uploadedAt)]})]}),t.jsx("div",{className:"flex items-center gap-4 shrink-0",children:t.jsx("a",{href:`http://localhost:5000${te.url}`,target:"_blank",rel:"noreferrer",className:"text-sm font-semibold text-slate-700 hover:underline",children:"View"})})]})},te.id))}),t.jsx("div",{className:"pt-4 flex justify-end",children:t.jsx("button",{type:"button",onClick:()=>L(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"Close"})})]})]})}const Gr="http://localhost:5000/api/paycodes";function Jr(){return{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}async function Vr(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok)throw new Error(i?.message||`Request failed (${a.status})`);return i}async function sc(a={}){const r=new URLSearchParams;Object.entries(a).forEach(([c,m])=>{m==null||m===""||r.set(c,String(m))});const i=await fetch(`${Gr}?${r.toString()}`,{headers:Jr()});return Vr(i)}async function sS(a){const r=await fetch(`${Gr}`,{method:"POST",headers:Jr(),body:JSON.stringify(a)});return Vr(r)}async function lS(a,r){const i=await fetch(`${Gr}/${a}`,{method:"PATCH",headers:Jr(),body:JSON.stringify(r)});return Vr(i)}async function aS(a){const r=await fetch(`${Gr}/${a}/archive`,{method:"POST",headers:Jr()});return Vr(r)}async function nS(a){const r=await fetch(`${Gr}/bulk`,{method:"POST",headers:Jr(),body:JSON.stringify({csvText:a})});return Vr(r)}const Rm="http://localhost:5000/api/employee-paycodes";function Mm(){return{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}async function Om(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok)throw new Error(i?.message||`Request failed (${a.status})`);return i}async function qo(a){const r=await fetch(`${Rm}/${a}`,{headers:Mm()});return Om(r)}async function ig(a,r){const i=await fetch(`${Rm}/${a}`,{method:"POST",headers:Mm(),body:JSON.stringify(r)});return Om(i)}async function og(a,r,i){const c=await fetch(`${Rm}/${a}/${r}/end`,{method:"POST",headers:Mm(),body:JSON.stringify({effectiveTo:i})});return Om(c)}function Kt(...a){return a.filter(Boolean).join(" ")}function Gu({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-800":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-slate-200 bg-white text-slate-800";return t.jsx("div",{className:Kt("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold",type:"button",children:""})]})})}function Jp({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[980px]"}){return a?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:c}),t.jsx("div",{className:Kt("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:u=>u.stopPropagation(),style:{maxHeight:"85vh"},children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button","aria-label":"Close",children:""})]}),t.jsx("div",{className:"p-6 overflow-y-auto text-slate-900 [&_input]:text-slate-900 [&_textarea]:text-slate-900 [&_select]:text-slate-900",style:{maxHeight:"calc(85vh - 76px)"},children:i})]})})]}):null}function rS({open:a,title:r="Confirm",message:i,confirmText:c="Confirm",tone:m="danger",onCancel:u,onConfirm:h,busy:g}){if(!a)return null;const p=m==="danger"?"border-rose-200 bg-rose-50 hover:bg-rose-100 text-rose-800":"border-emerald-200 bg-emerald-50 hover:bg-emerald-100 text-emerald-800";return t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:g?void 0:u}),t.jsx("div",{className:"absolute left-1/2 top-1/2 w-[94vw] sm:w-[520px] -translate-x-1/2 -translate-y-1/2",children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:b=>b.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:r}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:i})]}),t.jsx("button",{onClick:g?void 0:u,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button","aria-label":"Close",children:""})]}),t.jsxs("div",{className:"p-6 flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:g?void 0:u,className:"rounded-xl px-4 py-2 border border-slate-200 bg-white hover:bg-slate-50 text-slate-800 font-semibold",type:"button",disabled:g,children:"Cancel"}),t.jsx("button",{onClick:g?void 0:h,className:Kt("rounded-xl px-4 py-2 border font-semibold",p,g?"opacity-60 cursor-not-allowed":""),type:"button",disabled:g,children:g?"Please wait...":c})]})]})})]})}function iS({title:a,children:r}){return t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function Do({active:a,children:r,onClick:i}){return t.jsx("button",{type:"button",onClick:i,className:Kt("rounded-xl px-3 py-2 text-sm font-semibold border",a?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-800 border-slate-200 hover:bg-slate-50"),children:r})}function dl(a){if(!a)return"";const r=new Date(a);if(Number.isNaN(r.getTime()))return"";const i=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0"),m=String(r.getDate()).padStart(2,"0");return`${i}-${c}-${m}`}function oS(a,r){if(!a)return null;const i=new Date(a);return Number.isNaN(i.getTime())?null:(i.setMonth(i.getMonth()+r),i.toISOString())}function Ro(){const a=new Date,r=a.getFullYear(),i=String(a.getMonth()+1).padStart(2,"0");return`${r}-${i}`}function cS(a){return a==="fixed"?"This paycode is FIXED. Enter Amount only.":a==="percentage"?"This paycode is PERCENTAGE. Enter Percentage only (e.g., 3 = 3%).":a==="hourly_rate"?"This paycode is HOURLY RATE. Enter Hourly Rate only.":"Select a paycode to see what to enter."}function dS(){const[a,r]=x.useState(!0),[i,c]=x.useState(!1),[m,u]=x.useState([]),[h,g]=x.useState({kind:"info",text:""}),[p,b]=x.useState(!1),[j,v]=x.useState(null),[D,C]=x.useState({kind:"info",text:""}),[z,_]=x.useState(""),[k,L]=x.useState("details"),[N,U]=x.useState({fullName:"",email:"",department:"",bankDetails:{bankName:"",accountName:"",accountNumber:"",sortCode:"",iban:""},employmentType:"permanent",employmentStatus:"active",hireDate:"",terminationDate:"",rehireDate:"",accessRevokedAt:""}),[M,J]=x.useState([]),[te,q]=x.useState([]),[Y,I]=x.useState({paycodeId:"",effectiveFrom:Ro(),effectiveTo:"",amount:"",percentage:"",hourlyRate:"",priority:"",note:""}),[T,P]=x.useState(!1),[$,le]=x.useState(""),[ie,W]=x.useState(null),[R,ee]=x.useState({open:!1,mode:"",emp:null});async function Q(){r(!0);try{const se=await Lr();u(Array.isArray(se)?se:[])}catch(se){g({kind:"error",text:se.message||"Failed to load employees."})}finally{r(!1)}}x.useEffect(()=>{Q()},[]);async function H(se){try{const K=await sc({archived:"false"});J(Array.isArray(K)?K:[]);const be=await qo(se);q(Array.isArray(be)?be:[])}catch(K){C({kind:"error",text:K.message||"Failed to load compensation data."})}}function ue(){C({kind:"info",text:""}),_(""),v(null),L("details"),J([]),q([]),I({paycodeId:"",effectiveFrom:Ro(),effectiveTo:"",amount:"",percentage:"",hourlyRate:"",priority:"",note:""}),U({fullName:"",email:"",department:"",bankDetails:{bankName:"",accountName:"",accountNumber:"",sortCode:"",iban:""},employmentType:"permanent",employmentStatus:"active",hireDate:"",terminationDate:"",rehireDate:"",accessRevokedAt:""}),b(!0)}function w(se){C({kind:"info",text:""}),_(""),v(se),L("details"),U({fullName:se.fullName||"",email:se.email||"",department:se.department||"",bankDetails:{bankName:se.bankDetails?.bankName||"",accountName:se.bankDetails?.accountName||"",accountNumber:se.bankDetails?.accountNumber||"",sortCode:se.bankDetails?.sortCode||"",iban:se.bankDetails?.iban||""},employmentType:se.employmentType||"permanent",employmentStatus:se.employmentStatus||"active",hireDate:dl(se.hireDate),terminationDate:dl(se.terminationDate),rehireDate:dl(se.rehireDate),accessRevokedAt:dl(se.accessRevokedAt)}),I(K=>({...K,effectiveFrom:Ro()})),b(!0),H(se.id)}async function E(){if(!i){c(!0),C({kind:"info",text:""}),_("");try{if(!String(N.fullName).trim())throw new Error("Full name is required.");if(!String(N.email).trim())throw new Error("Email is required.");const se={fullName:N.fullName,department:N.department,bankDetails:N.bankDetails,employmentType:N.employmentType,employmentStatus:N.employmentStatus,hireDate:N.hireDate?new Date(N.hireDate).toISOString():null,terminationDate:N.terminationDate?new Date(N.terminationDate).toISOString():null,rehireDate:N.rehireDate?new Date(N.rehireDate).toISOString():null,accessRevokedAt:N.accessRevokedAt?new Date(N.accessRevokedAt).toISOString():N.employmentStatus==="terminated"&&N.terminationDate?oS(N.terminationDate,3):null};if(j?.id)await Hw(j.id,se),g({kind:"success",text:"Employee updated."}),b(!1),await Q();else{const K=await qw({fullName:N.fullName,email:N.email,department:N.department,bankDetails:N.bankDetails,employmentType:N.employmentType,hireDate:N.hireDate?new Date(N.hireDate).toISOString():null});_(K?.tempPassword||""),g({kind:"success",text:"Employee created."}),await Q()}}catch(se){C({kind:"error",text:se.message||"Failed to save employee."})}finally{c(!1)}}}async function ne(se){if(!i){c(!0),g({kind:"info",text:""});try{await Pw(se.id),g({kind:"success",text:"Employee deactivated."}),await Q()}catch(K){g({kind:"error",text:K.message||"Failed to deactivate employee."})}finally{c(!1),ee({open:!1,mode:"",emp:null})}}}async function he(se){if(!i){c(!0),g({kind:"info",text:""});try{await Yw(se.id),g({kind:"success",text:"Employee activated."}),await Q()}catch(K){g({kind:"error",text:K.message||"Failed to activate employee."})}finally{c(!1),ee({open:!1,mode:"",emp:null})}}}async function ge(){if(!i){c(!0),W(null),C({kind:"info",text:""});try{if(!String($).trim())throw new Error("Paste CSV first.");const se=await Vw($);W(se),g({kind:"success",text:`Bulk add done: ${se.createdCount} created, ${se.skippedCount} skipped.`}),await Q()}catch(se){C({kind:"error",text:se.message||"Bulk add failed."})}finally{c(!1)}}}async function Ne(){if(!j?.id||i)return;const se=N.terminationDate||dl(new Date);if(se){c(!0),C({kind:"info",text:""});try{await Gw(j.id,new Date(se).toISOString()),C({kind:"success",text:"Employee terminated. Access will be revoked after 3 months."}),await Q();const K=(await Lr()).find(be=>be.id===j.id);K&&(v(K),U(be=>({...be,employmentStatus:K.employmentStatus||"terminated",terminationDate:dl(K.terminationDate),accessRevokedAt:dl(K.accessRevokedAt)})))}catch(K){C({kind:"error",text:K.message||"Failed to terminate"})}finally{c(!1)}}}async function ke(){if(!j?.id||i)return;const se=N.rehireDate||dl(new Date);if(se){c(!0),C({kind:"info",text:""});try{await Jw(j.id,new Date(se).toISOString()),C({kind:"success",text:"Employee rehired and reactivated."}),await Q();const K=(await Lr()).find(be=>be.id===j.id);K&&(v(K),U(be=>({...be,employmentStatus:K.employmentStatus||"active",terminationDate:"",accessRevokedAt:"",rehireDate:dl(K.rehireDate)})))}catch(K){C({kind:"error",text:K.message||"Failed to rehire"})}finally{c(!1)}}}const ce=x.useMemo(()=>(M||[]).find(se=>se._id===Y.paycodeId),[M,Y.paycodeId]);x.useEffect(()=>{const se=ce?.calcType;se&&I(K=>({...K,amount:se==="fixed"?K.amount:"",percentage:se==="percentage"?K.percentage:"",hourlyRate:se==="hourly_rate"?K.hourlyRate:""}))},[ce?.calcType]);async function ve(){if(!j?.id){C({kind:"error",text:"Create the employee first, then add compensation."});return}if(!i){c(!0),C({kind:"info",text:""});try{const se=(M||[]).find(Z=>Z._id===Y.paycodeId);if(!se)throw new Error("Choose a paycode");const K={paycodeId:Y.paycodeId,effectiveFrom:Y.effectiveFrom,effectiveTo:Y.effectiveTo?Y.effectiveTo:null,note:Y.note||"",priority:Y.priority===""?null:Number(Y.priority),amount:Y.amount===""?null:Number(Y.amount),percentage:Y.percentage===""?null:Number(Y.percentage),hourlyRate:Y.hourlyRate===""?null:Number(Y.hourlyRate),calcType:null};if(se.calcType==="fixed"&&K.amount==null)throw new Error("Amount is required for fixed paycodes");if(se.calcType==="percentage"&&K.percentage==null)throw new Error("Percentage is required");if(se.calcType==="hourly_rate"&&K.hourlyRate==null)throw new Error("Hourly rate is required");await ig(j.id,K);const be=await qo(j.id);q(Array.isArray(be)?be:[]),I(Z=>({...Z,paycodeId:"",amount:"",percentage:"",hourlyRate:"",priority:"",note:""})),C({kind:"success",text:"Compensation assignment added."})}catch(se){C({kind:"error",text:se.message||"Failed to add assignment."})}finally{c(!1)}}}async function Je(se){if(!j?.id||i)return;const K=prompt("End month (YYYY-MM):",Ro());if(K){c(!0),C({kind:"info",text:""});try{await og(j.id,se._id,K);const be=await qo(j.id);q(Array.isArray(be)?be:[]),C({kind:"success",text:"Assignment ended."})}catch(be){C({kind:"error",text:be.message||"Failed to end assignment."})}finally{c(!1)}}}const Me=x.useMemo(()=>m.filter(se=>se.isActive).length,[m]);return t.jsxs(Nt,{title:"Employee Setup",children:[t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(Gu,{kind:h.kind,message:h.text,onClose:()=>g({kind:"info",text:""})}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-5",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-slate-900 font-semibold",children:"Employees"}),t.jsxs("div",{className:"text-slate-600 text-sm",children:[Me," active  ",m.length," total"]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:()=>P(!0),className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"Bulk Add"}),t.jsx("button",{type:"button",onClick:ue,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",children:"+ Add Employee"})]})]}),t.jsx(iS,{title:"Employee List",children:a?t.jsx("div",{className:"text-slate-600 text-sm",children:"Loading"}):m.length===0?t.jsx("div",{className:"text-slate-600 text-sm",children:"No employees found."}):t.jsx("div",{className:"space-y-2",children:m.map(se=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-slate-900 font-semibold truncate",children:[se.fullName," ",t.jsx("span",{className:"text-slate-500 text-xs font-normal",children:se.employeeId?` ${se.employeeId}`:""})]}),t.jsx("div",{className:"text-slate-700 text-sm truncate",children:se.email}),t.jsxs("div",{className:"text-slate-500 text-xs mt-1",children:[se.department||"","  ",se.employmentType||"permanent","  ",se.employmentStatus||"active"]})]}),t.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[t.jsx("span",{className:Kt("text-xs font-semibold rounded-full px-3 py-1 border",se.isActive?"bg-emerald-50 text-emerald-800 border-emerald-200":"bg-rose-50 text-rose-800 border-rose-200"),children:se.isActive?"Active":"Inactive"}),t.jsx("button",{type:"button",onClick:()=>w(se),className:"text-sm font-semibold text-slate-700 hover:underline",disabled:i,children:"Edit"}),se.isActive?t.jsx("button",{type:"button",onClick:()=>ee({open:!0,mode:"deactivate",emp:se}),className:"text-sm font-semibold text-rose-700 hover:underline",disabled:i,children:"Deactivate"}):t.jsx("button",{type:"button",onClick:()=>ee({open:!0,mode:"activate",emp:se}),className:"text-sm font-semibold text-emerald-700 hover:underline",disabled:i,children:"Activate"})]})]})},se.id))})})]}),t.jsxs(Jp,{open:p,title:j?"Edit Employee":"Add Employee",onClose:()=>!i&&b(!1),children:[t.jsx(Gu,{kind:D.kind,message:D.text,onClose:()=>C({kind:"info",text:""})}),!j&&z?t.jsxs("div",{className:"mb-4 rounded-2xl border border-emerald-200 bg-emerald-50 p-4 text-sm text-emerald-900",children:[t.jsx("div",{className:"font-semibold",children:"Temp password (copy now)"}),t.jsx("div",{className:"mt-1 font-mono",children:z}),t.jsx("div",{className:"mt-2 text-xs text-emerald-800",children:"Share this with the employee. It may not be shown again."})]}):null,t.jsxs("div",{className:"flex flex-wrap gap-2 mb-5",children:[t.jsx(Do,{active:k==="details",onClick:()=>L("details"),children:"Details"}),t.jsx(Do,{active:k==="bank",onClick:()=>L("bank"),children:"Bank"}),t.jsx(Do,{active:k==="employment",onClick:()=>L("employment"),children:"Employment"}),t.jsx(Do,{active:k==="compensation",onClick:()=>L("compensation"),children:"Compensation"})]}),k==="details"&&t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Full Name *"}),t.jsx("input",{value:N.fullName,onChange:se=>U(K=>({...K,fullName:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Email *"}),t.jsx("input",{value:N.email,onChange:se=>U(K=>({...K,email:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",disabled:!!j}),j?t.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Email cant be changed here (rehire uses same email)."}):null]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Department"}),t.jsx("input",{value:N.department,onChange:se=>U(K=>({...K,department:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Hire Date"}),t.jsx("input",{type:"date",value:N.hireDate,onChange:se=>U(K=>({...K,hireDate:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]})]}),k==="bank"&&t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Bank Details"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[["bankName","Bank Name"],["accountName","Account Name"],["accountNumber","Account Number"],["sortCode","Sort Code"],["iban","IBAN"]].map(([se,K])=>t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:K}),t.jsx("input",{value:N.bankDetails?.[se]||"",onChange:be=>U(Z=>({...Z,bankDetails:{...Z.bankDetails||{},[se]:be.target.value}})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]},se))})]}),k==="employment"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Employment Type"}),t.jsxs("select",{value:N.employmentType,onChange:se=>U(K=>({...K,employmentType:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",children:[t.jsx("option",{value:"permanent",children:"permanent"}),t.jsx("option",{value:"contract",children:"contract"}),t.jsx("option",{value:"intern",children:"intern"})]}),t.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Intern later can auto-apply intern preset paycodes."})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Status"}),t.jsx("input",{value:N.employmentStatus,readOnly:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-50 text-slate-700"}),t.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Use Terminate / Rehire buttons to change status."})]})]}),j?t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-3 justify-between",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 flex-1",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Termination Date"}),t.jsx("input",{type:"date",value:N.terminationDate,onChange:se=>U(K=>({...K,terminationDate:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Rehire Date"}),t.jsx("input",{type:"date",value:N.rehireDate,onChange:se=>U(K=>({...K,rehireDate:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Access Revoked At"}),t.jsx("input",{type:"date",value:N.accessRevokedAt,readOnly:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-50 text-slate-700"})]})]}),t.jsxs("div",{className:"flex gap-2 shrink-0",children:[t.jsx("button",{type:"button",onClick:Ne,disabled:i,className:Kt("rounded-2xl px-4 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-rose-50 text-rose-800 border-rose-200 hover:bg-rose-100"),children:"Terminate"}),t.jsx("button",{type:"button",onClick:ke,disabled:i,className:Kt("rounded-2xl px-4 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-emerald-50 text-emerald-800 border-emerald-200 hover:bg-emerald-100"),children:"Rehire"})]})]}),t.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:["Termination sets status to ",t.jsx("b",{children:"terminated"})," and sets access revoke date = termination + 3 months. Rehire reactivates the employee (same email)."]})]}):t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700",children:"Create the employee first to use termination/rehire actions."})]}),k==="compensation"&&t.jsx("div",{className:"space-y-4",children:j?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Add assignment (effective-dated)"}),t.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Paycode"}),t.jsxs("select",{value:Y.paycodeId,onChange:se=>I(K=>({...K,paycodeId:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",children:[t.jsx("option",{value:"",children:"Select"}),M.map(se=>t.jsxs("option",{value:se._id,children:[se.code,"  ",se.name," (",se.calcType,")"]},se._id))]}),t.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Create paycodes first (BASIC_SALARY, allowances, etc.)."})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Effective From (YYYY-MM)"}),t.jsx("input",{value:Y.effectiveFrom,onChange:se=>I(K=>({...K,effectiveFrom:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",placeholder:"2026-02"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Effective To (optional YYYY-MM)"}),t.jsx("input",{value:Y.effectiveTo,onChange:se=>I(K=>({...K,effectiveTo:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",placeholder:"2026-05"})]}),t.jsx("div",{className:"md:col-span-3",children:t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-sm text-slate-700",children:cS(ce?.calcType)})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Amount (fixed)"}),t.jsx("input",{type:"number",value:Y.amount,onChange:se=>I(K=>({...K,amount:se.target.value})),className:Kt("w-full rounded-2xl border px-3 py-2 text-sm",ce?.calcType==="fixed"?"border-slate-200 bg-white":"border-slate-200 bg-slate-50 text-slate-500"),disabled:ce?.calcType!=="fixed"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Percentage"}),t.jsx("input",{type:"number",value:Y.percentage,onChange:se=>I(K=>({...K,percentage:se.target.value})),className:Kt("w-full rounded-2xl border px-3 py-2 text-sm",ce?.calcType==="percentage"?"border-slate-200 bg-white":"border-slate-200 bg-slate-50 text-slate-500"),disabled:ce?.calcType!=="percentage"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Hourly Rate"}),t.jsx("input",{type:"number",value:Y.hourlyRate,onChange:se=>I(K=>({...K,hourlyRate:se.target.value})),className:Kt("w-full rounded-2xl border px-3 py-2 text-sm",ce?.calcType==="hourly_rate"?"border-slate-200 bg-white":"border-slate-200 bg-slate-50 text-slate-500"),disabled:ce?.calcType!=="hourly_rate"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Priority override (optional)"}),t.jsx("input",{type:"number",value:Y.priority,onChange:se=>I(K=>({...K,priority:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Note"}),t.jsx("input",{value:Y.note,onChange:se=>I(K=>({...K,note:se.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]})]}),t.jsx("div",{className:"pt-4 flex items-center justify-end",children:t.jsx("button",{type:"button",onClick:ve,className:Kt("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),disabled:i,children:"Add Assignment"})})]}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Assignments"}),te.length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"No assignments yet."}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-left text-slate-600",children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{className:"py-2 pr-3",children:"Paycode"}),t.jsx("th",{className:"py-2 pr-3",children:"From"}),t.jsx("th",{className:"py-2 pr-3",children:"To"}),t.jsx("th",{className:"py-2 pr-3",children:"Amount"}),t.jsx("th",{className:"py-2 pr-3",children:"%"}),t.jsx("th",{className:"py-2 pr-3",children:"Hourly"}),t.jsx("th",{className:"py-2 pr-3",children:"Priority"}),t.jsx("th",{className:"py-2 pr-3"})]})}),t.jsx("tbody",{children:te.map(se=>t.jsxs("tr",{className:"border-b last:border-b-0",children:[t.jsxs("td",{className:"py-2 pr-3",children:[t.jsx("div",{className:"font-mono text-xs",children:se.paycodeId?.code}),t.jsx("div",{className:"text-slate-700",children:se.paycodeId?.name})]}),t.jsx("td",{className:"py-2 pr-3",children:se.effectiveFrom}),t.jsx("td",{className:"py-2 pr-3",children:se.effectiveTo||""}),t.jsx("td",{className:"py-2 pr-3",children:se.amount??""}),t.jsx("td",{className:"py-2 pr-3",children:se.percentage??""}),t.jsx("td",{className:"py-2 pr-3",children:se.hourlyRate??""}),t.jsx("td",{className:"py-2 pr-3",children:se.priority??se.paycodeId?.defaultPriority??""}),t.jsx("td",{className:"py-2 pr-3 text-right",children:!se.effectiveTo&&t.jsx("button",{type:"button",onClick:()=>Je(se),className:"rounded-xl border px-3 py-1.5 text-xs hover:bg-slate-50",children:"End"})})]},se._id))})]})}),t.jsx("div",{className:"mt-3 text-[11px] text-slate-500",children:"Tip: Salary increase = end BASIC_SALARY at month X, then add new BASIC_SALARY from next month."})]})]}):t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700",children:"Create the employee first, then add compensation assignments."})}),t.jsxs("div",{className:"pt-5 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>b(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50",disabled:i,children:"Close"}),t.jsx("button",{type:"button",onClick:E,className:Kt("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),disabled:i,children:i?"Saving...":j?"Save":"Create"})]})]}),t.jsxs(Jp,{open:T,title:"Bulk Add Employees",onClose:()=>!i&&P(!1),widthClass:"sm:w-[980px]",children:[t.jsx(Gu,{kind:D.kind,message:D.text,onClose:()=>C({kind:"info",text:""})}),t.jsxs("div",{className:"text-sm text-slate-700 mb-3",children:["CSV format (header required): ",t.jsx("span",{className:"ml-2 font-mono text-xs",children:"fullName,email,department"})]}),t.jsx("textarea",{value:$,onChange:se=>le(se.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[220px] bg-white font-mono",placeholder:`fullName,email,department
John Doe,john@x.com,Finance
Jane Doe,jane@x.com,HR`}),t.jsxs("div",{className:"pt-4 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>P(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50",disabled:i,children:"Close"}),t.jsx("button",{type:"button",onClick:ge,className:Kt("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),disabled:i,children:i?"Processing...":"Run Bulk Add"})]}),ie?t.jsxs("div",{className:"mt-5 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Result"}),t.jsxs("div",{className:"text-sm text-slate-700 mt-1",children:["Created: ",t.jsx("b",{children:ie.createdCount}),"  Skipped: ",t.jsx("b",{children:ie.skippedCount})]}),ie.skipped?.length?t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-600 mb-2",children:"Skipped rows:"}),t.jsx("div",{className:"space-y-2",children:ie.skipped.map((se,K)=>t.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-3 text-sm",children:[t.jsx("div",{className:"text-slate-900 font-semibold",children:se.reason}),t.jsx("div",{className:"text-xs text-slate-700 mt-1 font-mono",children:JSON.stringify(se.row)})]},K))})]}):null]}):null]}),t.jsx(rS,{open:R.open,title:R.mode==="deactivate"?"Deactivate employee?":"Activate employee?",message:R.emp?R.mode==="deactivate"?`Are you sure you want to deactivate ${R.emp.fullName}?`:`Are you sure you want to activate ${R.emp.fullName}?`:"",confirmText:R.mode==="deactivate"?"Deactivate":"Activate",tone:R.mode==="deactivate"?"danger":"success",onCancel:()=>!i&&ee({open:!1,mode:"",emp:null}),onConfirm:()=>{R.emp&&(R.mode==="deactivate"?ne(R.emp):he(R.emp))},busy:i})]})}const Xr="http://localhost:5000/api/access-rights";function Qr(){return{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}async function Fr(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok)throw new Error(i?.message||`Request failed (${a.status})`);return i}async function uS(){const a=await fetch(`${Xr}`,{headers:Qr()});return Fr(a)}async function mS(a){const r=await fetch(`${Xr}`,{method:"POST",headers:Qr(),body:JSON.stringify(a)});return Fr(r)}async function Vp(a,r){const i=await fetch(`${Xr}/${a}`,{method:"PUT",headers:Qr(),body:JSON.stringify(r)});return Fr(i)}async function xS(a){const r=await fetch(`${Xr}/${a}/resend`,{method:"POST",headers:Qr()});return Fr(r)}async function fS(a){const r=await fetch(`${Xr}/${a}`,{method:"DELETE",headers:Qr()});return Fr(r)}function kn(...a){return a.filter(Boolean).join(" ")}function Xp({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-800":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-slate-200 bg-white text-slate-800";return t.jsx("div",{className:kn("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold",type:"button",children:""})]})})}function hS({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[900px]"}){return a?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:c}),t.jsx("div",{className:kn("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button","aria-label":"Close",children:""})]}),t.jsx("div",{className:"p-6 text-slate-900 [&_input]:text-slate-900 [&_textarea]:text-slate-900 [&_select]:text-slate-900",children:i})]})})]}):null}function pS({open:a,title:r="Confirm",message:i,confirmText:c="Confirm",tone:m="danger",onCancel:u,onConfirm:h,busy:g}){if(!a)return null;const p=m==="danger"?"border-rose-200 bg-rose-50 hover:bg-rose-100 text-rose-800":"border-emerald-200 bg-emerald-50 hover:bg-emerald-100 text-emerald-800";return t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:g?void 0:u}),t.jsx("div",{className:"absolute left-1/2 top-1/2 w-[94vw] sm:w-[520px] -translate-x-1/2 -translate-y-1/2",children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:b=>b.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:r}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:i})]}),t.jsx("button",{onClick:g?void 0:u,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button","aria-label":"Close",children:""})]}),t.jsxs("div",{className:"p-6 flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:g?void 0:u,className:"rounded-xl px-4 py-2 border border-slate-200 bg-white hover:bg-slate-50 text-slate-800 font-semibold",type:"button",disabled:g,children:"Cancel"}),t.jsx("button",{onClick:g?void 0:h,className:kn("rounded-xl px-4 py-2 border font-semibold",p,g?"opacity-60 cursor-not-allowed":""),type:"button",disabled:g,children:g?"Please wait...":c})]})]})})]})}function bS({title:a,children:r}){return t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function gS(){const[a,r]=x.useState(!0),[i,c]=x.useState(!1),[m,u]=x.useState([]),[h,g]=x.useState({kind:"info",text:""}),[p,b]=x.useState(!1),[j,v]=x.useState(null),[D,C]=x.useState({kind:"info",text:""}),[z,_]=x.useState({open:!1,mode:"",row:null}),[k,L]=x.useState({fullName:"",email:"",role:"payroll_manager",isActive:!0});async function N(){r(!0),g({kind:"info",text:""});try{const le=await uS();u(Array.isArray(le)?le:[])}catch(le){g({kind:"error",text:le.message||"Failed to load access rights."})}finally{r(!1)}}x.useEffect(()=>{N()},[]);const U=x.useMemo(()=>m.filter(le=>le.isActive).length,[m]);function M(){v(null),C({kind:"info",text:""}),L({fullName:"",email:"",role:"payroll_manager",isActive:!0}),b(!0)}function J(le){v(le),C({kind:"info",text:""}),L({fullName:le.fullName||"",email:le.email||"",role:le.role||"payroll_manager",isActive:le.isActive!==!1}),b(!0)}async function te(){if(!i){c(!0),C({kind:"info",text:""});try{if(!String(k.fullName).trim())throw new Error("Full name is required.");if(!String(k.email).trim())throw new Error("Email is required.");j?.id?(await Vp(j.id,{fullName:k.fullName,email:k.email,role:k.role,isActive:k.isActive}),g({kind:"success",text:"Access updated."})):(await mS({fullName:k.fullName,email:k.email,role:k.role}),g({kind:"success",text:"Access created"})),b(!1),await N()}catch(le){C({kind:"error",text:le.message||"Failed to save access."})}finally{c(!1)}}}function q(le){_({open:!0,mode:le.isActive?"deactivate":"activate",row:le})}async function Y(le){const ie=!le.isActive;if(!i){c(!0),g({kind:"info",text:""});try{await Vp(le.id,{isActive:ie}),g({kind:"success",text:ie?"Access activated.":"Access deactivated."}),await N()}catch(W){g({kind:"error",text:W.message||"Failed to update access."})}finally{c(!1),_({open:!1,mode:"",row:null})}}}function I(le){_({open:!0,mode:"remove",row:le})}async function T(le){if(!i){c(!0),g({kind:"info",text:""});try{await fS(le.id),g({kind:"success",text:"Access removed."}),await N()}catch(ie){g({kind:"error",text:ie.message||"Failed to remove access."})}finally{c(!1),_({open:!1,mode:"",row:null})}}}function P(le){_({open:!0,mode:"resend",row:le})}async function $(le){if(!i){c(!0),g({kind:"info",text:""});try{await xS(le.id),g({kind:"success",text:"Email sent again."})}catch(ie){g({kind:"error",text:ie.message||"Failed to resend email."})}finally{c(!1),_({open:!1,mode:"",row:null})}}}return t.jsxs(Nt,{title:"Access Rights",children:[t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(Xp,{kind:h.kind,message:h.text,onClose:()=>g({kind:"info",text:""})}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-5",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-slate-900 font-semibold",children:"Back Office Users"}),t.jsxs("div",{className:"text-slate-600 text-sm",children:[U," active  ",m.length," total"]})]}),t.jsx("button",{type:"button",onClick:M,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",children:"+ Add Access"})]}),t.jsx(bS,{title:"Admin & Payroll Manager Access",children:a?t.jsx("div",{className:"text-slate-600 text-sm",children:"Loading"}):m.length===0?t.jsx("div",{className:"text-slate-600 text-sm",children:"No access entries yet."}):t.jsx("div",{className:"space-y-2",children:m.map(le=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-slate-900 font-semibold truncate",children:[le.fullName||""," ",t.jsxs("span",{className:"text-slate-500 text-xs font-normal",children:[" ",le.email]})]}),t.jsxs("div",{className:"text-slate-600 text-sm mt-1",children:["Role:"," ",t.jsx("span",{className:"font-semibold text-slate-800",children:le.role==="admin"?"Admin":"Payroll Manager"})]})]}),t.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[t.jsx("span",{className:kn("text-xs font-semibold rounded-full px-3 py-1 border",le.isActive?"bg-emerald-50 text-emerald-800 border-emerald-200":"bg-rose-50 text-rose-800 border-rose-200"),children:le.isActive?"Active":"Inactive"}),t.jsx("button",{type:"button",onClick:()=>J(le),className:"text-sm font-semibold text-slate-700 hover:underline",disabled:i,children:"Edit"}),t.jsx("button",{type:"button",onClick:()=>P(le),className:"text-sm font-semibold text-indigo-700 hover:underline",disabled:i,children:"Resend Email"}),t.jsx("button",{type:"button",onClick:()=>q(le),className:kn("text-sm font-semibold hover:underline",le.isActive?"text-rose-700":"text-emerald-700"),disabled:i,children:le.isActive?"Deactivate":"Activate"}),t.jsx("button",{type:"button",onClick:()=>I(le),className:"text-sm font-semibold text-slate-500 hover:text-slate-700",disabled:i,children:"Remove"})]})]})},le.id))})})]}),t.jsxs(hS,{open:p,title:j?"Edit Access":"Add Access",onClose:()=>!i&&b(!1),children:[t.jsx(Xp,{kind:D.kind,message:D.text,onClose:()=>C({kind:"info",text:""})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Full Name *"}),t.jsx("input",{value:k.fullName,onChange:le=>L(ie=>({...ie,fullName:le.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Email *"}),t.jsx("input",{value:k.email,onChange:le=>L(ie=>({...ie,email:le.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white"}),t.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"You can edit email address."})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Role"}),t.jsxs("select",{value:k.role,onChange:le=>L(ie=>({...ie,role:le.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white",children:[t.jsx("option",{value:"payroll_manager",children:"Payroll Manager"}),t.jsx("option",{value:"admin",children:"Admin"})]})]}),t.jsx("div",{className:"sm:col-span-2",children:t.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[t.jsx("input",{type:"checkbox",checked:!!k.isActive,onChange:le=>L(ie=>({...ie,isActive:le.target.checked}))}),"Active access"]})})]}),t.jsxs("div",{className:"pt-5 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>b(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50",disabled:i,children:"Close"}),t.jsx("button",{type:"button",onClick:te,className:kn("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),disabled:i,children:i?"Saving...":"Save"})]})]}),t.jsx(pS,{open:z.open,title:z.mode==="remove"?"Remove access?":z.mode==="resend"?"Resend email?":z.mode==="deactivate"?"Deactivate access?":"Activate access?",message:z.row?z.mode==="remove"?`This will remove back office access for ${z.row.email}.`:z.mode==="resend"?`This will send the welcome email again to ${z.row.email}.`:z.mode==="deactivate"?`Are you sure you want to deactivate ${z.row.email}?`:`Are you sure you want to activate ${z.row.email}?`:"",confirmText:z.mode==="remove"?"Remove":z.mode==="resend"?"Resend":z.mode==="deactivate"?"Deactivate":"Activate",tone:z.mode==="deactivate"||z.mode==="remove"?"danger":"success",busy:i,onCancel:()=>!i&&_({open:!1,mode:"",row:null}),onConfirm:()=>{z.row&&(z.mode==="remove"?T(z.row):z.mode==="resend"?$(z.row):Y(z.row))}})]})}function cg(...a){return a.filter(Boolean).join(" ")}function yS({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-800":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-slate-200 bg-white text-slate-800";return t.jsx("div",{className:cg("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold",type:"button",children:""})]})})}function Qp({title:a,children:r}){return t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function vS(){const[a,r]=x.useState(!0),[i,c]=x.useState(!1),[m,u]=x.useState([]),[h,g]=x.useState(""),[p,b]=x.useState([]),[j,v]=x.useState([]),[D,C]=x.useState({kind:"info",text:""}),[z,_]=x.useState(null),[k,L]=x.useState("tax_year_end"),[N,U]=x.useState("");async function M(){r(!0);try{const T=await Lr(),P=Array.isArray(T)?T:[];u(P),!h&&P.length&&(g(P[0].id),b([P[0].id]))}catch(T){C({kind:"error",text:T.message||"Failed to load employees."})}finally{r(!1)}}async function J(T){if(T)try{const P=await bw(T);v(Array.isArray(P)?P:[])}catch(P){C({kind:"error",text:P.message||"Failed to load documents."})}}x.useEffect(()=>{M()},[]),x.useEffect(()=>{h&&J(h)},[h]);const te=x.useMemo(()=>m.find(T=>T.id===h),[m,h]);function q(T){b(P=>P.includes(T)?P.filter($=>$!==T):[...P,T])}async function Y(){if(!i){c(!0),C({kind:"info",text:""});try{if(!z)throw new Error("Select a file first.");if(!p.length)throw new Error("Select at least 1 employee.");if(!String(N||"").trim())throw new Error("Title is required.");await gw({file:z,employeeIds:p,category:k,title:N}),_(null),U(""),C({kind:"success",text:"Document uploaded."}),h&&await J(h)}catch(T){C({kind:"error",text:T.message||"Upload failed."})}finally{c(!1)}}}async function I(T){if(!i){c(!0),C({kind:"info",text:""});try{await yw(T.id),C({kind:"success",text:"Document deleted."}),h&&await J(h)}catch(P){C({kind:"error",text:P.message||"Delete failed."})}finally{c(!1)}}}return t.jsx(Nt,{title:"Employee Documents",children:t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(yS,{kind:D.kind,message:D.text,onClose:()=>C({kind:"info",text:""})}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[1fr_420px] gap-5",children:[t.jsxs(Qp,{title:"Documents Viewer",children:[t.jsxs("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"View documents for"}),t.jsx("select",{value:h,onChange:T=>g(T.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900",disabled:a,children:m.map(T=>t.jsxs("option",{value:T.id,children:[T.fullName," ",T.employeeId?`(${T.employeeId})`:""]},T.id))})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{type:"button",onClick:()=>h&&J(h),className:"w-full rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",disabled:i||!h,children:"Refresh"})})]}),te?t.jsxs("div",{className:"text-slate-600 text-sm mb-3",children:["Showing documents for ",t.jsx("span",{className:"text-slate-900 font-semibold",children:te.fullName})]}):null,j.length===0?t.jsx("div",{className:"text-slate-600 text-sm",children:"No documents uploaded for this employee."}):t.jsx("div",{className:"space-y-2",children:j.map(T=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-slate-900 font-semibold truncate",children:T.title||T.originalName}),t.jsxs("div",{className:"text-slate-600 text-xs mt-1",children:["Category: ",T.category,"  Size: ",Math.round(T.size/(1024*1024)*10)/10," MB"]})]}),t.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[t.jsx("a",{href:`http://localhost:5000${T.url}`,target:"_blank",rel:"noreferrer",className:"text-sm font-semibold text-indigo-700 hover:underline",children:"View"}),t.jsx("button",{type:"button",onClick:()=>I(T),className:"text-sm font-semibold text-rose-700 hover:underline",disabled:i,children:"Delete"})]})]})},T.id))})]}),t.jsxs(Qp,{title:"Upload Document",children:[t.jsx("div",{className:"text-slate-600 text-sm mb-4",children:"Upload once and apply to one employee or many (bulk)."}),t.jsxs("div",{className:"mb-3",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Category"}),t.jsxs("select",{value:k,onChange:T=>L(T.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900",children:[t.jsx("option",{value:"tax_year_end",children:"Tax Year End"}),t.jsx("option",{value:"other",children:"Other"})]})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Title *"}),t.jsx("input",{value:N,onChange:T=>U(T.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400",placeholder:"e.g. Tax Year End 2025"})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"File *"}),t.jsx("input",{type:"file",onChange:T=>_(T.target.files?.[0]||null),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900",accept:".pdf,.png,.jpg,.jpeg"}),t.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Allowed: PDF, PNG, JPG"})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-2",children:"Apply to employees *"}),t.jsx("div",{className:"max-h-[220px] overflow-auto rounded-2xl border border-slate-200 bg-white p-3 space-y-2",children:m.map(T=>t.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[t.jsx("input",{type:"checkbox",checked:p.includes(T.id),onChange:()=>q(T.id)}),t.jsxs("span",{className:"truncate",children:[T.fullName," ",T.employeeId?`(${T.employeeId})`:""]})]},T.id))}),t.jsx("div",{className:"mt-2 text-[11px] text-slate-500",children:"Tip: tick multiple employees for bulk upload."})]}),t.jsx("button",{type:"button",onClick:Y,className:cg("w-full rounded-2xl px-4 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),disabled:i,children:i?"Uploading...":"Upload Document"})]})]})]})})}function _a(...a){return a.filter(Boolean).join(" ")}function Ju({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-800":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-slate-200 bg-white text-slate-800";return t.jsx("div",{className:_a("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold",type:"button",children:""})]})})}function Fp({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[920px]"}){return a?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:c}),t.jsx("div",{className:_a("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button","aria-label":"Close",children:""})]}),t.jsx("div",{className:"p-6 text-slate-900 [&_input]:text-slate-900 [&_textarea]:text-slate-900 [&_select]:text-slate-900",children:i})]})})]}):null}function jS({open:a,title:r,message:i,confirmText:c="Confirm",tone:m="danger",onCancel:u,onConfirm:h,busy:g}){if(!a)return null;const p=m==="danger"?"border-rose-200 bg-rose-50 hover:bg-rose-100 text-rose-800":"border-emerald-200 bg-emerald-50 hover:bg-emerald-100 text-emerald-800";return t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:g?void 0:u}),t.jsx("div",{className:"absolute left-1/2 top-1/2 w-[94vw] sm:w-[520px] -translate-x-1/2 -translate-y-1/2",children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:b=>b.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:r}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:i})]}),t.jsx("button",{onClick:g?void 0:u,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button","aria-label":"Close",children:""})]}),t.jsxs("div",{className:"p-6 flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:g?void 0:u,className:"rounded-xl px-4 py-2 border border-slate-200 bg-white hover:bg-slate-50 text-slate-800 font-semibold",type:"button",disabled:g,children:"Cancel"}),t.jsx("button",{onClick:g?void 0:h,className:_a("rounded-xl px-4 py-2 border font-semibold",p,g?"opacity-60 cursor-not-allowed":""),type:"button",disabled:g,children:g?"Please wait...":c})]})]})})]})}function Kp({title:a,children:r}){return t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function Ea({children:a,tone:r="slate"}){const i=r==="emerald"?"bg-emerald-50 text-emerald-800 border-emerald-200":r==="rose"?"bg-rose-50 text-rose-800 border-rose-200":r==="blue"?"bg-blue-50 text-blue-800 border-blue-200":"bg-slate-50 text-slate-800 border-slate-200";return t.jsx("span",{className:_a("text-xs font-semibold rounded-full px-3 py-1 border",i),children:a})}function NS(){const[a,r]=x.useState(!0),[i,c]=x.useState(!1),[m,u]=x.useState({kind:"info",text:""}),[h,g]=x.useState([]),[p,b]=x.useState(""),[j,v]=x.useState(""),[D,C]=x.useState(!1),[z,_]=x.useState(!1),[k,L]=x.useState(null),[N,U]=x.useState({kind:"info",text:""}),[M,J]=x.useState({open:!1,id:null,name:""}),[te,q]=x.useState(!1),[Y,I]=x.useState(""),[T,P]=x.useState(null),[$,le]=x.useState({name:"",code:"",type:"earning",visibleOnPayslip:!0,active:!0,calcType:"fixed",defaultPriority:100});async function ie(){r(!0);try{const w=await sc({search:p.trim(),type:j||"",archived:D?"true":"false"});g(Array.isArray(w)?w:[])}catch(w){u({kind:"error",text:w.message||"Failed to load paycodes"})}finally{r(!1)}}x.useEffect(()=>{ie()},[D]);const W=x.useMemo(()=>{const w=h.length,E=h.filter(ne=>ne.active&&!ne.archivedAt).length;return{total:w,active:E}},[h]);function R(){L(null),U({kind:"info",text:""}),le({name:"",code:"",type:"earning",visibleOnPayslip:!0,active:!0,calcType:"fixed",defaultPriority:100}),_(!0)}function ee(w){L(w),U({kind:"info",text:""}),le({name:w.name||"",code:w.code||"",type:w.type||"earning",visibleOnPayslip:!!w.visibleOnPayslip,active:!!w.active,calcType:w.calcType||"fixed",defaultPriority:Number(w.defaultPriority??100)}),_(!0)}async function Q(){if(!i){c(!0),U({kind:"info",text:""});try{if(!String($.name).trim())throw new Error("Name is required (e.g. Basic Salary).");if(!String($.code).trim())throw new Error("Code is required (e.g. BASIC_SALARY).");if(!["earning","deduction"].includes($.type))throw new Error("Type must be earning or deduction.");const w={name:$.name,code:$.code,type:$.type,visibleOnPayslip:!!$.visibleOnPayslip,active:!!$.active,calcType:$.calcType,defaultPriority:Number($.defaultPriority)||100};k?._id?(await lS(k._id,w),u({kind:"success",text:"Paycode updated."})):(await sS(w),u({kind:"success",text:"Paycode created."})),_(!1),await ie()}catch(w){U({kind:"error",text:w.message||"Failed to save paycode"})}finally{c(!1)}}}async function H(w){if(!i){c(!0),u({kind:"info",text:""});try{await aS(w),u({kind:"success",text:"Paycode archived (not deleted)."}),await ie()}catch(E){u({kind:"error",text:E.message||"Failed to archive"})}finally{c(!1),J({open:!1,id:null,name:""})}}}async function ue(){if(!i){c(!0),P(null),U({kind:"info",text:""});try{if(!String(Y).trim())throw new Error("Paste CSV first.");const w=await nS(Y);P(w),u({kind:"success",text:`Bulk add done: ${w.createdCount} created, ${w.skippedCount} skipped.`}),await ie()}catch(w){U({kind:"error",text:w.message||"Bulk add failed."})}finally{c(!1)}}}return t.jsxs(Nt,{title:"Paycodes",children:[t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(Ju,{kind:m.kind,message:m.text,onClose:()=>u({kind:"info",text:""})}),t.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-5",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-slate-900 font-semibold",children:"Paycodes"}),t.jsxs("div",{className:"text-slate-600 text-sm",children:["Earnings/deductions building blocks  ",W.active," active  ",W.total," shown"]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsx("button",{type:"button",onClick:()=>q(!0),className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"Bulk Add"}),t.jsx("button",{type:"button",onClick:()=>C(w=>!w),className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:D?"Show Active":"Show Archived"}),t.jsx("button",{type:"button",onClick:R,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",children:"+ Add Paycode"})]})]}),t.jsx(Kp,{title:"Search / Filter",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Search (name/code)"}),t.jsx("input",{value:p,onChange:w=>b(w.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900 placeholder-slate-400",placeholder:"BASIC, transport"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Type"}),t.jsxs("select",{value:j,onChange:w=>v(w.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",children:[t.jsx("option",{value:"",children:"All"}),t.jsx("option",{value:"earning",children:"Earning"}),t.jsx("option",{value:"deduction",children:"Deduction"})]})]}),t.jsxs("div",{className:"flex items-end gap-3",children:[t.jsx("button",{type:"button",onClick:ie,className:_a("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),disabled:i,children:i?"Loading...":"Apply"}),t.jsx("button",{type:"button",onClick:()=>{b(""),v("")},className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",disabled:i,children:"Reset"})]})]})}),t.jsx("div",{className:"mt-5",children:t.jsx(Kp,{title:"Paycode List",children:a?t.jsx("div",{className:"text-slate-600 text-sm",children:"Loading"}):h.length===0?t.jsx("div",{className:"text-slate-600 text-sm",children:"No paycodes found."}):t.jsx("div",{className:"space-y-2",children:h.map(w=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-slate-900 font-semibold truncate",children:[t.jsx("span",{className:"font-mono text-xs text-slate-600 mr-2",children:w.code}),w.name]}),t.jsxs("div",{className:"mt-1 flex flex-wrap gap-2",children:[t.jsx(Ea,{tone:w.type==="earning"?"emerald":"rose",children:w.type}),t.jsx(Ea,{tone:"blue",children:w.calcType}),t.jsx(Ea,{children:w.visibleOnPayslip?"Visible on payslip":"Hidden"}),w.archivedAt?t.jsx(Ea,{tone:"rose",children:"Archived"}):w.active?t.jsx(Ea,{tone:"emerald",children:"Active"}):t.jsx(Ea,{tone:"rose",children:"Inactive"}),t.jsxs(Ea,{children:["Priority: ",w.defaultPriority??100]})]})]}),t.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[t.jsx("button",{type:"button",onClick:()=>ee(w),className:"text-sm font-semibold text-slate-700 hover:underline",disabled:i||!!w.archivedAt,title:w.archivedAt?"Archived paycodes cannot be edited":"Edit",children:"Edit"}),w.archivedAt?null:t.jsx("button",{type:"button",onClick:()=>J({open:!0,id:w._id,name:`${w.code}  ${w.name}`}),className:"text-sm font-semibold text-rose-700 hover:underline",disabled:i,children:"Archive"})]})]})},w._id))})})})]}),t.jsxs(Fp,{open:z,title:k?"Edit Paycode":"Add Paycode",onClose:()=>!i&&_(!1),children:[t.jsx(Ju,{kind:N.kind,message:N.text,onClose:()=>U({kind:"info",text:""})}),t.jsxs("div",{className:"mb-4 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700",children:[t.jsx("div",{className:"font-semibold text-slate-900",children:"What do I enter?"}),t.jsxs("div",{className:"mt-1",children:[t.jsx("span",{className:"font-semibold",children:"Name"})," = label on UI/PDF (e.g. ",t.jsx("span",{className:"font-mono",children:"Basic Salary"}),") "," ",t.jsx("span",{className:"font-semibold",children:"Code"})," = unique identifier (e.g. ",t.jsx("span",{className:"font-mono",children:"BASIC_SALARY"}),")"]}),t.jsxs("div",{className:"mt-1",children:[t.jsx("span",{className:"font-semibold",children:"Calc Type"}),": fixed/percentage/hourly_rate/manual (manual = entered via adjustments)"]}),t.jsxs("div",{className:"mt-1",children:[t.jsx("span",{className:"font-semibold",children:"Priority"}),": lower shows earlier on payslip."]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Name *"}),t.jsx("input",{value:$.name,onChange:w=>le(E=>({...E,name:w.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900 placeholder-slate-400",placeholder:"Basic Salary"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Code *"}),t.jsx("input",{value:$.code,onChange:w=>le(E=>({...E,code:w.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900 placeholder-slate-400 font-mono",placeholder:"BASIC_SALARY"}),t.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Uppercase + underscores. Must be unique."})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Type"}),t.jsxs("select",{value:$.type,onChange:w=>le(E=>({...E,type:w.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",children:[t.jsx("option",{value:"earning",children:"earning"}),t.jsx("option",{value:"deduction",children:"deduction"})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Calc Type"}),t.jsxs("select",{value:$.calcType,onChange:w=>le(E=>({...E,calcType:w.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",children:[t.jsx("option",{value:"fixed",children:"fixed amount"}),t.jsx("option",{value:"percentage",children:"percentage"}),t.jsx("option",{value:"hourly_rate",children:"hourly * rate"}),t.jsx("option",{value:"manual",children:"manual"})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Default Priority (ordering)"}),t.jsx("input",{type:"number",value:$.defaultPriority,onChange:w=>le(E=>({...E,defaultPriority:w.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-800",children:[t.jsx("input",{type:"checkbox",checked:$.visibleOnPayslip,onChange:w=>le(E=>({...E,visibleOnPayslip:w.target.checked}))}),"Visible on payslip PDF"]}),t.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-800",children:[t.jsx("input",{type:"checkbox",checked:$.active,onChange:w=>le(E=>({...E,active:w.target.checked}))}),"Active"]})]})]}),t.jsxs("div",{className:"pt-5 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>_(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",disabled:i,children:"Close"}),t.jsx("button",{type:"button",onClick:Q,className:_a("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),disabled:i,children:i?"Saving...":k?"Save":"Create"})]})]}),t.jsxs(Fp,{open:te,title:"Bulk Add Paycodes",onClose:()=>!i&&q(!1),widthClass:"sm:w-[980px]",children:[t.jsx(Ju,{kind:N.kind,message:N.text,onClose:()=>U({kind:"info",text:""})}),t.jsxs("div",{className:"text-sm text-slate-700 mb-3",children:["CSV format (header required):"," ",t.jsx("span",{className:"ml-2 font-mono text-xs",children:"code,name,type,calcType,visibleOnPayslip,active,priority"})]}),t.jsx("textarea",{value:Y,onChange:w=>I(w.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[220px] bg-white text-slate-900 placeholder-slate-400 font-mono",placeholder:`code,name,type,calcType,visibleOnPayslip,active,priority
BASIC_SALARY,Basic Salary,earning,fixed,true,true,10
TRANSPORT,Transport Allowance,earning,fixed,true,true,20
TAX,Tax,deduction,manual,true,true,90`}),t.jsxs("div",{className:"pt-4 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>q(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",disabled:i,children:"Close"}),t.jsx("button",{type:"button",onClick:ue,className:_a("rounded-2xl px-5 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),disabled:i,children:i?"Processing...":"Run Bulk Add"})]}),T?t.jsxs("div",{className:"mt-5 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Result"}),t.jsxs("div",{className:"text-sm text-slate-700 mt-1",children:["Created: ",t.jsx("b",{children:T.createdCount}),"  Skipped: ",t.jsx("b",{children:T.skippedCount})]}),T.skipped?.length?t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-600 mb-2",children:"Skipped rows:"}),t.jsx("div",{className:"space-y-2",children:T.skipped.map((w,E)=>t.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-3 text-sm",children:[t.jsx("div",{className:"text-slate-900 font-semibold",children:w.reason}),t.jsx("div",{className:"text-xs text-slate-700 mt-1 font-mono",children:JSON.stringify(w.row)})]},E))})]}):null]}):null]}),t.jsx(jS,{open:M.open,title:"Archive paycode?",message:`Archive "${M.name}"? This will disable it (no delete).`,confirmText:"Archive",tone:"danger",busy:i,onCancel:()=>!i&&J({open:!1,id:null,name:""}),onConfirm:()=>M.id&&H(M.id)})]})}function Zp(){const a=new Date,r=a.getFullYear(),i=String(a.getMonth()+1).padStart(2,"0");return`${r}-${i}`}function wS(){const{id:a}=gb(),[r,i]=x.useState(""),[c,m]=x.useState(!0),[u,h]=x.useState([]),[g,p]=x.useState([]),[b,j]=x.useState({paycodeId:"",effectiveFrom:Zp(),effectiveTo:"",amount:"",percentage:"",hourlyRate:"",priority:"",note:""}),v=x.useMemo(()=>{const _=new Map;return(u||[]).forEach(k=>_.set(k._id,k)),_},[u]);async function D(){m(!0),i("");try{const _=await sc({archived:"false"});h(_||[]);const k=await qo(a);p(k||[])}catch(_){i(_.message||"Failed to load")}finally{m(!1)}}x.useEffect(()=>{D()},[a]);async function C(){i("");try{if(!b.paycodeId)throw new Error("Choose a paycode");const k=v.get(b.paycodeId)?.calcType,L={paycodeId:b.paycodeId,effectiveFrom:b.effectiveFrom,effectiveTo:b.effectiveTo?b.effectiveTo:null,note:b.note||"",priority:b.priority===""?null:Number(b.priority),amount:b.amount===""?null:Number(b.amount),percentage:b.percentage===""?null:Number(b.percentage),hourlyRate:b.hourlyRate===""?null:Number(b.hourlyRate),calcType:null};if(k==="fixed"&&L.amount==null)throw new Error("Amount is required for fixed paycodes");if(k==="percentage"&&L.percentage==null)throw new Error("Percentage is required");if(k==="hourly_rate"&&L.hourlyRate==null)throw new Error("Hourly rate is required");await ig(a,L),j(N=>({...N,paycodeId:"",amount:"",percentage:"",hourlyRate:"",priority:"",note:""})),await D()}catch(_){i(_.message||"Failed to add")}}async function z(_){const k=prompt("End month (YYYY-MM):",Zp());if(k){i("");try{await og(a,_,k),await D()}catch(L){i(L.message||"Failed to end")}}}return t.jsx(Nt,{children:t.jsx("div",{className:"min-h-screen bg-slate-50",children:t.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Employee Compensation"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Assign base salary and allowances using paycodes (effective-dated)."})]}),r&&t.jsx("div",{className:"mt-4 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:r}),t.jsxs("div",{className:"mt-4 rounded-2xl border bg-white p-4",children:[t.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Add assignment"}),t.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-600",children:"Paycode"}),t.jsxs("select",{className:"mt-1 w-full rounded-xl border px-3 py-2 text-sm",value:b.paycodeId,onChange:_=>j(k=>({...k,paycodeId:_.target.value})),children:[t.jsx("option",{value:"",children:"Select..."}),u.map(_=>t.jsxs("option",{value:_._id,children:[_.code,"  ",_.name]},_._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-600",children:"Effective From (YYYY-MM)"}),t.jsx("input",{className:"mt-1 w-full rounded-xl border px-3 py-2 text-sm",value:b.effectiveFrom,onChange:_=>j(k=>({...k,effectiveFrom:_.target.value}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-600",children:"Effective To (optional)"}),t.jsx("input",{className:"mt-1 w-full rounded-xl border px-3 py-2 text-sm",value:b.effectiveTo,onChange:_=>j(k=>({...k,effectiveTo:_.target.value}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-600",children:"Amount (fixed)"}),t.jsx("input",{type:"number",className:"mt-1 w-full rounded-xl border px-3 py-2 text-sm",value:b.amount,onChange:_=>j(k=>({...k,amount:_.target.value}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-600",children:"Percentage"}),t.jsx("input",{type:"number",className:"mt-1 w-full rounded-xl border px-3 py-2 text-sm",value:b.percentage,onChange:_=>j(k=>({...k,percentage:_.target.value}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-600",children:"Hourly Rate"}),t.jsx("input",{type:"number",className:"mt-1 w-full rounded-xl border px-3 py-2 text-sm",value:b.hourlyRate,onChange:_=>j(k=>({...k,hourlyRate:_.target.value}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-600",children:"Priority override (optional)"}),t.jsx("input",{type:"number",className:"mt-1 w-full rounded-xl border px-3 py-2 text-sm",value:b.priority,onChange:_=>j(k=>({...k,priority:_.target.value}))})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"text-xs text-slate-600",children:"Note"}),t.jsx("input",{className:"mt-1 w-full rounded-xl border px-3 py-2 text-sm",value:b.note,onChange:_=>j(k=>({...k,note:_.target.value}))})]})]}),t.jsx("div",{className:"mt-4 flex justify-end",children:t.jsx("button",{onClick:C,className:"rounded-xl bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-800",children:"Add"})})]}),t.jsxs("div",{className:"mt-4 rounded-2xl border bg-white p-4",children:[t.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Assignments"}),t.jsx("div",{className:"mt-3 overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-left text-slate-600",children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{className:"py-2 pr-3",children:"Paycode"}),t.jsx("th",{className:"py-2 pr-3",children:"From"}),t.jsx("th",{className:"py-2 pr-3",children:"To"}),t.jsx("th",{className:"py-2 pr-3",children:"Amount"}),t.jsx("th",{className:"py-2 pr-3",children:"%"}),t.jsx("th",{className:"py-2 pr-3",children:"Hourly"}),t.jsx("th",{className:"py-2 pr-3",children:"Priority"}),t.jsx("th",{className:"py-2 pr-3"})]})}),t.jsx("tbody",{children:c?t.jsx("tr",{children:t.jsx("td",{className:"py-4 text-slate-500",colSpan:8,children:"Loading..."})}):g.length===0?t.jsx("tr",{children:t.jsx("td",{className:"py-4 text-slate-500",colSpan:8,children:"No assignments yet."})}):g.map(_=>t.jsxs("tr",{className:"border-b last:border-b-0",children:[t.jsxs("td",{className:"py-2 pr-3",children:[t.jsx("div",{className:"font-mono text-xs",children:_.paycodeId?.code}),t.jsx("div",{className:"text-slate-700",children:_.paycodeId?.name})]}),t.jsx("td",{className:"py-2 pr-3",children:_.effectiveFrom}),t.jsx("td",{className:"py-2 pr-3",children:_.effectiveTo||""}),t.jsx("td",{className:"py-2 pr-3",children:_.amount??""}),t.jsx("td",{className:"py-2 pr-3",children:_.percentage??""}),t.jsx("td",{className:"py-2 pr-3",children:_.hourlyRate??""}),t.jsx("td",{className:"py-2 pr-3",children:_.priority??_.paycodeId?.defaultPriority??""}),t.jsx("td",{className:"py-2 pr-3 text-right",children:!_.effectiveTo&&t.jsx("button",{onClick:()=>z(_._id),className:"rounded-xl border px-3 py-1.5 text-xs hover:bg-slate-50",children:"End"})})]},_._id))})]})})]})]})})})}const Kr="http://localhost:5000/api/pm/adjustments";function Zr(){return{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}async function Ir(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok)throw new Error(i?.message||`Request failed (${a.status})`);return i}async function SS({period:a="",status:r="",search:i=""}={}){const c=new URLSearchParams;a&&c.set("period",a),r&&c.set("status",r),i&&c.set("search",i);const m=await fetch(`${Kr}?${c.toString()}`,{headers:Zr()});return Ir(m)}async function kS(a){const r=await fetch(`${Kr}`,{method:"POST",headers:Zr(),body:JSON.stringify(a)});return Ir(r)}async function CS(a,r){const i=await fetch(`${Kr}/${a}`,{method:"PATCH",headers:Zr(),body:JSON.stringify(r)});return Ir(i)}async function AS(a){const r=await fetch(`${Kr}/${a}/cancel`,{method:"POST",headers:Zr()});return Ir(r)}async function ES(a){const r=await fetch(`${Kr}/bulk`,{method:"POST",headers:Zr(),body:JSON.stringify({csvText:a})});return Ir(r)}function _t(...a){return a.filter(Boolean).join(" ")}function Ds(){const a=localStorage.getItem("token")||localStorage.getItem("authToken")||(()=>{try{const r=JSON.parse(localStorage.getItem("user")||"{}");return r?.token||r?.accessToken||""}catch{return""}})();return{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}}}async function Rs(a){const i=(a.headers.get("content-type")||"").toLowerCase().includes("application/json"),c=i?await a.json().catch(()=>({})):await a.text().catch(()=>"");if(!a.ok){const m=i?c?.message:c;throw new Error(m||`Request failed (${a.status})`)}return c}function TS(a){return typeof a!="number"?a:Number.isFinite(a)?Math.abs(a)>=1e6?Math.abs(a-Math.round(a))<1e-9?Math.round(a).toLocaleString("en-GB"):a.toLocaleString("en-GB",{maximumFractionDigits:2}):a.toLocaleString("en-GB",{maximumFractionDigits:6}):String(a)}function Ip(a){const r=new WeakSet;return JSON.stringify(a||{},(i,c)=>{if(typeof c=="number")return TS(c);if(c&&typeof c=="object"){if(r.has(c))return"[Circular]";r.add(c)}return c},2)}function Mt(a){return typeof a=="string"&&/^\d{4}-(0[1-9]|1[0-2])$/.test(a.trim())}function DS(a){return typeof a=="string"&&/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/.test(a.trim())}function dm(a){const r=Number(a)||0;return String(r).padStart(2,"0")}function wn(a){const r=a.getFullYear(),i=dm(a.getMonth()+1),c=dm(a.getDate());return`${r}-${i}-${c}`}function Cn(a){const r=a.getFullYear(),i=dm(a.getMonth()+1);return`${r}-${i}`}function dg(a,r){return new Date(a,r+1,0).getDate()}function RS(a){const r=new Set;return String(a||"").split(",").map(i=>i.trim()).filter(Boolean).forEach(i=>{DS(i)&&r.add(i)}),r}function Ho(a){const r=a.getDay();return r===0||r===6}function Wp({year:a,monthIndex0:r,dayOfMonth:i,runHour:c,runMinute:m,moveBackIfNonWorking:u,holidaySet:h}){const g=dg(a,r),p=Math.min(Math.max(Number(i||1),1),g),b=new Date(a,r,p,Number(c||0),Number(m||0),0,0);if(!u)return b;let j=0;for(;j<40;){const v=wn(b);if(!Ho(b)&&!h.has(v))break;b.setDate(b.getDate()-1),j+=1}return b}function MS({past:a=18,future:r=18}={}){const i=[],c=new Date;for(let m=a;m>=1;m--){const u=new Date(c.getFullYear(),c.getMonth()-m,1);i.push(Cn(u))}i.push(Cn(c));for(let m=1;m<=r;m++){const u=new Date(c.getFullYear(),c.getMonth()+m,1);i.push(Cn(u))}return i}function Vu({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-800":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-slate-200 bg-white text-slate-800";return t.jsx("div",{className:_t("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold",type:"button",children:""})]})})}function Ta({title:a,right:r,children:i}){return t.jsxs("div",{className:_t("rounded-3xl border border-slate-200 bg-white p-6 shadow-sm","[&_input]:text-slate-900 [&_textarea]:text-slate-900 [&_select]:text-slate-900","[&_input]:bg-white [&_textarea]:bg-white [&_select]:bg-white","[&_input]:placeholder:text-slate-400 [&_textarea]:placeholder:text-slate-400"),children:[a?t.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),r?t.jsx("div",{className:"shrink-0",children:r}):null]}):null,i]})}function Xu({open:a,title:r,children:i,onClose:c,widthClass:m="sm:w-[900px]"}){return a?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:c}),t.jsx("div",{className:_t("absolute left-1/2 top-1/2 w-[94vw] -translate-x-1/2 -translate-y-1/2",m),children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),t.jsx("button",{onClick:c,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button","aria-label":"Close",children:""})]}),t.jsx("div",{className:"p-6 text-slate-900",children:i})]})})]}):null}function OS({open:a,title:r="Confirm",message:i,confirmText:c="Confirm",tone:m="danger",onCancel:u,onConfirm:h,busy:g}){if(!a)return null;const p=m==="danger"?"border-rose-200 bg-rose-50 hover:bg-rose-100 text-rose-800":"border-emerald-200 bg-emerald-50 hover:bg-emerald-100 text-emerald-800";return t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:g?void 0:u}),t.jsx("div",{className:"absolute left-1/2 top-1/2 w-[94vw] sm:w-[520px] -translate-x-1/2 -translate-y-1/2",children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:b=>b.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:r}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:i})]}),t.jsx("button",{onClick:g?void 0:u,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button","aria-label":"Close",children:""})]}),t.jsxs("div",{className:"p-6 flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:g?void 0:u,className:"rounded-xl px-4 py-2 border border-slate-200 bg-white hover:bg-slate-50 text-slate-800 font-semibold",type:"button",disabled:g,children:"No"}),t.jsx("button",{onClick:g?void 0:h,className:_t("rounded-xl px-4 py-2 border font-semibold",p,g?"opacity-60 cursor-not-allowed":""),type:"button",disabled:g,children:g?"Please wait...":c})]})]})})]})}function _S({value:a,onChange:r,tabs:i}){return t.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(c=>{const m=a===c.key;return t.jsx("button",{type:"button",onClick:()=>r(c.key),className:_t("rounded-2xl px-4 py-2 text-sm font-semibold border transition",m?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white hover:bg-slate-50 text-slate-900"),children:c.label},c.key)})})}const Mo="http://localhost:5000/api/pm/scheduler",Qu="http://localhost:5000/api/pm/payroll-runs",LS="http://localhost:5000/api/pm/banking/export",eb="http://localhost:5000/api/pm/anomalies";function US(){const[a,r]=x.useState(!1),[i,c]=x.useState({kind:"info",text:""}),[m,u]=x.useState("adjustments"),h=x.useMemo(()=>MS({past:18,future:18}),[]),[g,p]=x.useState([]),[b,j]=x.useState([]),[v,D]=x.useState({period:"",status:"",search:""}),[C,z]=x.useState([]),[_,k]=x.useState(!0),[L,N]=x.useState({open:!1,item:null}),[U,M]=x.useState(!1),[J,te]=x.useState(null),[q,Y]=x.useState({kind:"info",text:""}),[I,T]=x.useState({employeeId:"",paycode:"",amount:"",period:"",note:""}),[P,$]=x.useState(!1),[le,ie]=x.useState(""),[W,R]=x.useState(null),[ee,Q]=x.useState(!1),[H,ue]=x.useState({enabled:!0,dayOfMonth:25,runHour:9,runMinute:0,moveBackIfNonWorking:!0,holidays:[],overridePeriod:""}),[w,E]=x.useState(""),[ne,he]=x.useState(null),[ge,Ne]=x.useState(Cn(new Date)),[ke,ce]=x.useState(12),[ve,Je]=x.useState(!1),[Me,se]=x.useState(""),[K,be]=x.useState(""),[Z,$e]=x.useState(null),[S,xe]=x.useState(null),[fe,He]=x.useState(!1),[We,me]=x.useState([]),[Pt,Oe]=x.useState({}),[xs,ta]=x.useState(""),[Ua,Ps]=x.useState(null),[Nl,Wr]=x.useState(""),[ac,ei]=x.useState(!1),[wl,ht]=x.useState([]),[wt,St]=x.useState({open:!1,item:null});function ti(A){return A?(A instanceof Date?A:new Date(A)).toLocaleString("en-GB",{timeZone:"Indian/Mauritius"}):""}async function nc(){k(!0);try{const[A,pe]=await Promise.all([Lr(),sc({archived:"false"})]);p(Array.isArray(A)?A:[]),j(Array.isArray(pe)?pe:[])}catch(A){c({kind:"error",text:A.message||"Failed to load reference data."})}finally{k(!1)}}async function za(){k(!0);try{const A=await SS(v);z(Array.isArray(A)?A:[])}catch(A){c({kind:"error",text:A.message||"Failed to load adjustments."})}finally{k(!1)}}x.useEffect(()=>{nc()},[]),x.useEffect(()=>{m==="adjustments"&&za()},[m,v.period,v.status,v.search]);function Ba(){te(null),Y({kind:"info",text:""}),T({employeeId:"",paycode:"",amount:"",period:"",note:""}),M(!0)}function $a(A){te(A),Y({kind:"info",text:""}),T({employeeId:A.employee||"",paycode:A.paycodeCode||"",amount:String(A.amount??""),period:A.period||"",note:A.note||""}),M(!0)}async function qa(){if(!a){r(!0),Y({kind:"info",text:""});try{if(!I.employeeId)throw new Error("Employee is required.");if(!I.paycode)throw new Error("Paycode is required.");if(!I.period)throw new Error("Period is required (YYYY-MM).");if(!String(I.amount).trim())throw new Error("Amount is required.");const A={employeeId:I.employeeId,paycode:I.paycode,amount:Number(I.amount),period:I.period,note:I.note};J?._id?(await CS(J._id,A),c({kind:"success",text:"Adjustment updated."})):(await kS(A),c({kind:"success",text:"Adjustment created."})),M(!1),await za()}catch(A){Y({kind:"error",text:A.message||"Failed to save adjustment."})}finally{r(!1)}}}async function Ys(A){if(!a){r(!0);try{await AS(A._id),c({kind:"success",text:"Adjustment cancelled."}),await za()}catch(pe){c({kind:"error",text:pe.message||"Failed to cancel adjustment."})}finally{r(!1),N({open:!1,item:null})}}}async function Ha(){if(!a){r(!0),R(null),Y({kind:"info",text:""});try{if(!String(le).trim())throw new Error("Paste CSV first.");const A=await ES(le);R(A),c({kind:"success",text:`Bulk import done: ${A.createdCount} created, ${A.skippedCount} skipped.`}),await za()}catch(A){Y({kind:"error",text:A.message||"Bulk import failed."})}finally{r(!1)}}}const sa=x.useMemo(()=>C.filter(A=>A.status==="pending").length,[C]);async function si(){Q(!0);try{const A=await fetch(Mo,{headers:Ds()}),pe=await Rs(A);pe&&typeof pe=="object"&&(ue(Ee=>({...Ee,...pe,holidays:Array.isArray(pe.holidays)?pe.holidays:[],overridePeriod:typeof pe.overridePeriod=="string"?pe.overridePeriod:Ee.overridePeriod||""})),E(Array.isArray(pe.holidays)?pe.holidays.join(", "):""))}catch(A){c({kind:"error",text:A.message||"Failed to load schedule."})}finally{Q(!1)}}async function la(){try{const A=await fetch(`${Mo}/preview`,{headers:Ds()}),pe=await Rs(A);he(pe||null)}catch(A){he(null),c({kind:"error",text:A.message||"Failed to preview schedule."})}}async function Bn(){if(!a){r(!0);try{const A=String(w||"").split(",").map(Pe=>Pe.trim()).filter(Boolean),pe={...H,dayOfMonth:Number(H.dayOfMonth||25),runHour:Number(H.runHour||9),runMinute:Number(H.runMinute||0),holidays:A,overridePeriod:String(H.overridePeriod||"").trim()},Ee=await fetch(Mo,{method:"POST",headers:Ds(),body:JSON.stringify(pe)}),De=await Rs(Ee);ue(Pe=>({...Pe,...De,holidays:Array.isArray(De?.holidays)?De.holidays:A,overridePeriod:typeof De?.overridePeriod=="string"?De.overridePeriod:Pe.overridePeriod})),c({kind:"success",text:"Schedule saved."}),await la()}catch(A){c({kind:"error",text:A.message||"Failed to save schedule."})}finally{r(!1)}}}async function aa(A){if(!a){r(!0);try{const pe=await fetch(`${Mo}/auto-fetch?year=${encodeURIComponent(A)}&country=MU`,{method:"POST",headers:Ds()}),Ee=await Rs(pe);ue(De=>({...De,holidays:Array.isArray(Ee?.holidays)?Ee.holidays:[]})),E(Array.isArray(Ee?.holidays)?Ee.holidays.join(", "):""),c({kind:"success",text:`Holidays updated for ${A}.`}),await la()}catch(pe){c({kind:"error",text:pe.message||"Failed to auto-fetch holidays."})}finally{r(!1)}}}const Gs=x.useMemo(()=>RS(w),[w]),fs=x.useMemo(()=>{if(!Mt(ge))return null;const[A,pe]=ge.split("-").map(De=>Number(De));return Wp({year:A,monthIndex0:pe-1,dayOfMonth:H.dayOfMonth,runHour:H.runHour,runMinute:H.runMinute,moveBackIfNonWorking:!!H.moveBackIfNonWorking,holidaySet:Gs})},[ge,H.dayOfMonth,H.runHour,H.runMinute,H.moveBackIfNonWorking,Gs]),li=x.useMemo(()=>{const A=Math.min(Math.max(Number(ke||12),1),36),pe=new Date,Ee=pe.getFullYear(),De=pe.getMonth(),Pe=[];for(let dt=0;dt<A;dt++){const lt=new Date(Ee,De+dt,1),hs=Wp({year:lt.getFullYear(),monthIndex0:lt.getMonth(),dayOfMonth:H.dayOfMonth,runHour:H.runHour,runMinute:H.runMinute,moveBackIfNonWorking:!!H.moveBackIfNonWorking,holidaySet:Gs});Pe.push({period:Cn(lt),date:hs,dateKey:wn(hs)})}return Pe},[ke,H.dayOfMonth,H.runHour,H.runMinute,H.moveBackIfNonWorking,Gs]),na=x.useMemo(()=>{if(!Mt(ge))return null;const[A,pe]=ge.split("-").map(Dt=>Number(Dt)),Ee=A,De=pe-1,Pe=new Date(Ee,De,1,0,0,0,0),dt=dg(Ee,De),lt=(Pe.getDay()+6)%7,hs=[];for(let Dt=0;Dt<lt;Dt++)hs.push(null);for(let Dt=1;Dt<=dt;Dt++)hs.push(new Date(Ee,De,Dt,0,0,0,0));for(;hs.length%7!==0;)hs.push(null);const ri=fs?wn(fs):null;return{year:Ee,monthIndex0:De,cells:hs,targetDay:ri}},[ge,fs]);async function ra(){if(!Mt(Me))return xe(null);try{const A=await fetch(`${Qu}/preview?period=${encodeURIComponent(Me)}`,{headers:Ds()}),pe=await Rs(A);xe(pe||null)}catch{xe(null)}}async function ia(){if(!Mt(Me)){me([]),Oe({});return}He(!0);try{const A=await fetch(`${Qu}/run-list?period=${encodeURIComponent(Me)}`,{headers:Ds()}),pe=await Rs(A),Ee=Array.isArray(pe?.items)?pe.items:[];me(Ee);const De={};for(const Pe of Ee)Pe?.hasPendingAdjustments&&(De[Pe.employeeId]=!0);Oe(De)}catch(A){me([]),Oe({}),c({kind:"error",text:A.message||"Failed to load run list."})}finally{He(!1)}}function $n(){return Object.entries(Pt).filter(([,A])=>!!A).map(([A])=>A)}function ai(){const A={};for(const pe of We)pe?.hasPendingAdjustments&&(A[pe.employeeId]=!0);Oe(A)}function ks(){const A={};for(const pe of We)pe?.alreadyReleased||(A[pe.employeeId]=!0);Oe(A)}function pt(){Oe({})}async function Tt(){if(!a){r(!0),$e(null);try{if(!Mt(Me))throw new Error("Period must be YYYY-MM");const A=$n();if(!A.length)throw new Error("Select at least one employee to run payroll for.");const pe={period:Me,payDate:K?new Date(K).toISOString():null,selectedEmployeeIds:A},Ee=await fetch(`${Qu}/run`,{method:"POST",headers:Ds(),body:JSON.stringify(pe)}),De=await Rs(Ee);$e(De||{ok:!0});const Pe=Number(De?.anomaliesFound||De?.anomalies||0),dt=Number(De?.payslipsBlocked||De?.blocked||0);Pe>0||dt>0?c({kind:"success",text:`Run completed. Anomalies detected (${Pe}). Payslips blocked/not sent: ${dt}. Check the Anomalies tab.`}):c({kind:"success",text:"Run completed. Payslips released to selected employees only."}),await ra(),await ia()}catch(A){c({kind:"error",text:A.message||"Failed to run payroll."})}finally{r(!1)}}}async function Sl(){if(!a){r(!0),Ps(null);try{if(!Mt(xs))throw new Error("Period must be YYYY-MM");const A=await fetch(`${LS}?period=${encodeURIComponent(xs)}`,{headers:Ds()}),pe=String(await Rs(A)||"");if(!pe.trim())throw new Error("No CSV returned from server.");Ps({ok:!0});const Ee=new Blob([pe],{type:"text/csv;charset=utf-8"}),De=URL.createObjectURL(Ee),Pe=document.createElement("a");Pe.href=De,Pe.download=`banking-export-${xs}.csv`,document.body.appendChild(Pe),Pe.click(),Pe.remove(),URL.revokeObjectURL(De),c({kind:"success",text:"Banking export downloaded."})}catch(A){c({kind:"error",text:A.message||"Failed to export banking CSV."})}finally{r(!1)}}}async function oa(){if(!Mt(Nl)){ht([]);return}ei(!0);try{const A=await fetch(`${eb}?period=${encodeURIComponent(Nl)}`,{headers:Ds()}),pe=await Rs(A);ht(Array.isArray(pe)?pe:[])}catch(A){c({kind:"error",text:A.message||"Failed to load anomalies."}),ht([])}finally{ei(!1)}}async function ni(A,pe){if(!a){r(!0);try{const Ee=await fetch(`${eb}/${A._id}/resolve`,{method:"POST",headers:Ds(),body:JSON.stringify({decision:pe})});await Rs(Ee),c(pe==="approve"?{kind:"success",text:"Approved. Payslip released + email sent."}:{kind:"success",text:"Dismissed. Kept for record."}),await oa()}catch(Ee){c({kind:"error",text:Ee.message||"Failed to update anomaly."})}finally{r(!1)}}}x.useEffect(()=>{c({kind:"info",text:""}),Y({kind:"info",text:""}),xe(null),$e(null),he(null),Ps(null),ht([]),me([]),Oe({}),m==="scheduler"&&(si(),la(),Je(!1),Mt(ge)||Ne(Cn(new Date))),m==="run"&&($e(null),xe(null)),m==="banking"&&Ps(null),m==="anomalies"&&ht([])},[m]),x.useEffect(()=>{m==="run"&&(ra(),ia())},[m,Me]),x.useEffect(()=>{m==="anomalies"&&oa()},[m,Nl]);const rc=[{key:"adjustments",label:"Adjustments"},{key:"run",label:"Run Payroll"},{key:"scheduler",label:"Scheduler"},{key:"banking",label:"Banking Export"},{key:"anomalies",label:"Anomalies"}],ca=x.useMemo(()=>$n().length,[Pt]);return t.jsxs(Nt,{title:"Payroll Adjustments",children:[t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(Vu,{kind:i.kind,message:i.text,onClose:()=>c({kind:"info",text:""})}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-5",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-slate-900 font-semibold",children:"Payroll"}),t.jsx("div",{className:"text-slate-600 text-sm",children:m==="adjustments"?`${sa} pending  ${C.length} adjustments`:"Manage payroll operations"})]}),t.jsx(_S,{value:m,onChange:u,tabs:rc})]}),m==="adjustments"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-5",children:[t.jsx("div",{className:"text-sm text-slate-600",children:"Create, edit, cancel and bulk-import payroll adjustments."}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:()=>$(!0),className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"Bulk Import"}),t.jsx("button",{type:"button",onClick:Ba,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 text-white hover:bg-slate-800",children:"+ Add Adjustment"})]})]}),t.jsx(Ta,{title:"Filters",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[t.jsx("input",{value:v.search,onChange:A=>D(pe=>({...pe,search:A.target.value})),placeholder:"Search employee/paycode...",className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm"}),t.jsxs("select",{value:v.period,onChange:A=>D(pe=>({...pe,period:A.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"All periods"}),h.map(A=>t.jsx("option",{value:A,children:A},A))]}),t.jsxs("select",{value:v.status,onChange:A=>D(pe=>({...pe,status:A.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"All statuses"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"applied",children:"Applied"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),t.jsx("div",{className:"mt-5",children:t.jsx(Ta,{title:"Adjustment List",children:_?t.jsx("div",{className:"text-slate-600 text-sm",children:"Loading"}):C.length===0?t.jsx("div",{className:"text-slate-600 text-sm",children:"No adjustments found."}):t.jsx("div",{className:"space-y-2",children:C.map(A=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-slate-900 font-semibold truncate",children:[A.employeeSnapshot?.fullName||"Employee"," ",t.jsxs("span",{className:"text-slate-500 text-xs font-normal",children:[" ",A.employeeSnapshot?.email||"-","  ",A.period]})]}),t.jsxs("div",{className:"text-slate-700 text-sm",children:[A.paycodeCode,"  ",A.paycodeName||"Paycode","  ",A.type,"  Amount: ",A.amount]}),A.note?t.jsx("div",{className:"text-slate-500 text-xs mt-1",children:A.note}):null]}),t.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[t.jsx("span",{className:_t("text-xs font-semibold rounded-full px-3 py-1 border",A.status==="pending"?"bg-amber-50 text-amber-800 border-amber-200":A.status==="cancelled"?"bg-rose-50 text-rose-800 border-rose-200":"bg-emerald-50 text-emerald-800 border-emerald-200"),children:A.status}),A.status==="pending"?t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",onClick:()=>$a(A),className:"text-sm font-semibold text-slate-700 hover:underline",disabled:a,children:"Edit"}),t.jsx("button",{type:"button",onClick:()=>N({open:!0,item:A}),className:"text-sm font-semibold text-rose-700 hover:underline",disabled:a,children:"Cancel"})]}):null]})]})},A._id))})})})]}):null,m==="run"?t.jsxs(Ta,{title:"Run Payroll",right:t.jsx("button",{type:"button",onClick:Tt,disabled:a||!Mt(Me)||ca===0,className:_t("rounded-2xl px-4 py-2 text-sm font-semibold border",a||!Mt(Me)||ca===0?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),title:ca===0?"Select at least one employee":"",children:a?"Running...":`Run (${ca})`}),children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Period *"}),t.jsxs("select",{value:Me,onChange:A=>se(A.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"Select period"}),h.map(A=>t.jsx("option",{value:A,children:A},A))]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Pay Date (optional)"}),t.jsx("input",{value:K,onChange:A=>be(A.target.value),type:"date",className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm"})]}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{type:"button",disabled:!Mt(Me)||a,onClick:ra,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900 disabled:opacity-50",children:"Preview"}),t.jsx("button",{type:"button",disabled:!Mt(Me)||a,onClick:ia,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900 disabled:opacity-50",children:"Refresh List"})]})]}),S?t.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700",children:[t.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:"Preview"}),t.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(S,null,2)})]}):null,t.jsxs("div",{className:"mt-5",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-3",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Who should receive payslips now?"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{type:"button",onClick:ai,disabled:a||We.length===0,className:"rounded-2xl px-3 py-2 text-xs font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900 disabled:opacity-50",children:"Select adjustments only"}),t.jsx("button",{type:"button",onClick:ks,disabled:a||We.length===0,className:"rounded-2xl px-3 py-2 text-xs font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900 disabled:opacity-50",children:"Select all unpaid"}),t.jsx("button",{type:"button",onClick:pt,disabled:a||We.length===0,className:"rounded-2xl px-3 py-2 text-xs font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900 disabled:opacity-50",children:"Clear"})]})]}),t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white",children:fe?t.jsx("div",{className:"p-4 text-sm text-slate-600",children:"Loading employees"}):We.length===0?t.jsx("div",{className:"p-4 text-sm text-slate-600",children:Mt(Me)?"No employees found for this period.":"Enter a valid period to load employees."}):t.jsx("div",{className:"divide-y divide-slate-100",children:We.map(A=>{const pe=!!Pt[A.employeeId],Ee=a||!!A.alreadyReleased;return t.jsxs("label",{className:_t("flex items-start gap-3 p-4 cursor-pointer",Ee?"opacity-60 cursor-not-allowed":"hover:bg-slate-50"),children:[t.jsx("input",{type:"checkbox",checked:pe,disabled:Ee,onChange:De=>{const Pe=De.target.checked;Oe(dt=>({...dt,[A.employeeId]:Pe}))},className:"mt-1"}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"text-sm font-semibold text-slate-900 truncate",children:[A.fullName||"Employee"," ",t.jsxs("span",{className:"text-slate-500 text-xs font-normal",children:[" ",A.email||"-"]})]}),t.jsxs("div",{className:"mt-1 flex flex-wrap gap-2",children:[A.hasPendingAdjustments?t.jsx("span",{className:"text-xs font-semibold rounded-full px-3 py-1 border bg-amber-50 text-amber-800 border-amber-200",children:"has adjustment"}):null,A.alreadyReleased?t.jsx("span",{className:"text-xs font-semibold rounded-full px-3 py-1 border bg-emerald-50 text-emerald-800 border-emerald-200",children:"already paid"}):t.jsx("span",{className:"text-xs font-semibold rounded-full px-3 py-1 border bg-slate-50 text-slate-700 border-slate-200",children:"unpaid"})]}),A.alreadyReleased?t.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:["This employee already has a released payslip for ",Me,". (Disabled)"]}):null]})]},A.employeeId)})})}),t.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Default selection = employees with pending adjustments, so an adjustment run wont accidentally send everyone."})]}),Z?t.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700",children:[t.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:"Run Result"}),t.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(Z,null,2)})]}):null]}):null,m==="scheduler"?t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[t.jsxs(Ta,{title:"Scheduler",right:t.jsx("button",{type:"button",onClick:Bn,disabled:a,className:_t("rounded-2xl px-4 py-2 text-sm font-semibold border",a?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),children:a?"Saving...":"Save"}),children:[ee?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading schedule"}):null,t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[t.jsx("input",{type:"checkbox",checked:!!H.enabled,onChange:A=>ue(pe=>({...pe,enabled:A.target.checked}))}),"Enabled"]}),t.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[t.jsx("input",{type:"checkbox",checked:!!H.moveBackIfNonWorking,onChange:A=>ue(pe=>({...pe,moveBackIfNonWorking:A.target.checked}))}),"Move back if weekend/holiday"]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mt-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Day of month"}),t.jsx("input",{value:H.dayOfMonth,onChange:A=>ue(pe=>({...pe,dayOfMonth:A.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",placeholder:"25"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Run hour (0-23)"}),t.jsx("input",{value:H.runHour,onChange:A=>ue(pe=>({...pe,runHour:A.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",placeholder:"9"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Run minute (0-59)"}),t.jsx("input",{value:H.runMinute,onChange:A=>ue(pe=>({...pe,runMinute:A.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",placeholder:"0"})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Holidays (YYYY-MM-DD, comma separated)"}),t.jsx("input",{value:w,onChange:A=>E(A.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",placeholder:"2026-01-01, 2026-03-12"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Test run period (optional)"}),t.jsxs("select",{value:H.overridePeriod||"",onChange:A=>ue(pe=>({...pe,overridePeriod:A.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"Normal monthly run"}),h.map(A=>t.jsx("option",{value:A,children:A},A))]}),t.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Choose a period ONLY for testing. Leave empty for normal payroll schedule."}),H.overridePeriod?t.jsx("div",{className:"text-xs mt-2",children:t.jsxs("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold border bg-amber-50 text-amber-800 border-amber-200",children:["TEST MODE: ",H.overridePeriod]})}):null]}),t.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[t.jsx("button",{type:"button",onClick:si,disabled:a,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900 disabled:opacity-50",children:"Reload"}),t.jsx("button",{type:"button",onClick:la,disabled:a,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900 disabled:opacity-50",children:"Preview Next Run (server)"}),t.jsx("button",{type:"button",onClick:()=>aa(new Date().getFullYear()),disabled:a,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900 disabled:opacity-50",children:"Auto-Fetch MU Holidays (This Year)"})]}),ne?t.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700",children:[t.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:"Next Run Preview (server)"}),t.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(ne,null,2)})]}):null]}),t.jsxs(Ta,{title:"Release Dates",right:t.jsxs("button",{type:"button",onClick:()=>Je(A=>!A),className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:[ve?"Hide":"Show"," dates"]}),children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Month"}),t.jsx("select",{value:ge,onChange:A=>Ne(A.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",children:h.map(A=>t.jsx("option",{value:A,children:A},A))})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Show next (months)"}),t.jsx("input",{value:ke,onChange:A=>ce(A.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",placeholder:"12"})]})]}),t.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"This months release"}),t.jsx("div",{className:"text-sm text-slate-700 mt-1",children:fs?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"font-mono text-xs",children:wn(fs)}),t.jsx("span",{className:"text-slate-500",children:"  "}),t.jsx("span",{children:ti(fs)}),Gs.has(wn(fs))||Ho(fs)?t.jsx("span",{className:"ml-2 text-rose-700 text-xs font-semibold",children:"(non-working)"}):null]}):t.jsx("span",{className:"text-slate-500 text-sm",children:"Enter a valid month (YYYY-MM)"})}),na?t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"grid grid-cols-7 gap-2 text-xs text-slate-500 mb-2",children:[t.jsx("div",{children:"Mon"}),t.jsx("div",{children:"Tue"}),t.jsx("div",{children:"Wed"}),t.jsx("div",{children:"Thu"}),t.jsx("div",{children:"Fri"}),t.jsx("div",{children:"Sat"}),t.jsx("div",{children:"Sun"})]}),t.jsx("div",{className:"grid grid-cols-7 gap-2",children:na.cells.map((A,pe)=>{if(!A)return t.jsx("div",{className:"h-10 rounded-xl border border-transparent"},pe);const Ee=wn(A),De=na.targetDay&&Ee===na.targetDay,Pe=Gs.has(Ee),dt=Ho(A);return t.jsx("div",{className:_t("h-10 rounded-xl border flex items-center justify-center text-sm",De?"border-slate-900 bg-slate-900 text-white font-semibold":"border-slate-200 bg-white text-slate-900",(Pe||dt)&&!De?"opacity-70":""),title:`${Ee}${Pe?"  holiday":""}${dt?"  weekend":""}${De?"  release":""}`,children:A.getDate()},pe)})}),t.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"Dark = release date  Dim = weekend/holiday"})]}):null]}),ve?t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Upcoming release dates"}),t.jsx("div",{className:"space-y-2",children:li.map(A=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-slate-900 font-semibold",children:[A.period,t.jsxs("span",{className:"text-slate-500 text-xs font-normal",children:["  ",A.dateKey]})]}),t.jsx("div",{className:"text-slate-700 text-sm",children:ti(A.date)})]}),t.jsx("div",{className:"shrink-0",children:Gs.has(A.dateKey)||Ho(A.date)?t.jsx("span",{className:"text-xs font-semibold rounded-full px-3 py-1 border bg-rose-50 text-rose-800 border-rose-200",children:"non-working"}):t.jsx("span",{className:"text-xs font-semibold rounded-full px-3 py-1 border bg-emerald-50 text-emerald-800 border-emerald-200",children:"working day"})})]})},A.period))})]}):null]})]}):null,m==="banking"?t.jsxs(Ta,{title:"Banking Export",right:t.jsx("button",{type:"button",onClick:Sl,disabled:a||!Mt(xs),className:_t("rounded-2xl px-4 py-2 text-sm font-semibold border",a||!Mt(xs)?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),children:a?"Exporting...":"Download CSV"}),children:[t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Period *"}),t.jsxs("select",{value:xs,onChange:A=>ta(A.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"Select period"}),h.map(A=>t.jsx("option",{value:A,children:A},A))]})]})}),Ua?t.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"Exports only include payslips with status: released."}):null]}):null,m==="anomalies"?t.jsxs(Ta,{title:"Anomaly Detection",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Period *"}),t.jsxs("select",{value:Nl,onChange:A=>Wr(A.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"Select period"}),h.map(A=>t.jsx("option",{value:A,children:A},A))]})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{type:"button",onClick:oa,disabled:a||!Mt(Nl),className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900 disabled:opacity-50",children:"Refresh"})})]}),t.jsx("div",{className:"mt-5",children:ac?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):wl.length===0?t.jsx("div",{className:"text-sm text-slate-600",children:"No anomalies found."}):t.jsx("div",{className:"space-y-2",children:wl.map(A=>t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"text-slate-900 font-semibold truncate",children:[A.employeeSnapshot?.fullName||"Employee"," ",t.jsxs("span",{className:"text-slate-500 text-xs font-normal",children:[" ",A.employeeSnapshot?.email||"-","  ",A.period||Nl]})]}),t.jsxs("div",{className:"text-slate-700 text-sm mt-1",children:[t.jsx("span",{className:"font-semibold",children:A.type||"ANOMALY"}),": ",A.message||"Potential issue detected"]}),t.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[t.jsx("span",{className:_t("text-xs font-semibold rounded-full px-3 py-1 border",A.severity==="high"?"bg-rose-50 text-rose-800 border-rose-200":A.severity==="medium"?"bg-amber-50 text-amber-800 border-amber-200":"bg-slate-50 text-slate-700 border-slate-200"),children:A.severity||"low"}),t.jsx("span",{className:_t("text-xs font-semibold rounded-full px-3 py-1 border",A.status==="open"?"bg-amber-50 text-amber-800 border-amber-200":A.status==="dismissed"?"bg-slate-50 text-slate-700 border-slate-200":"bg-emerald-50 text-emerald-800 border-emerald-200"),children:A.status||"open"})]}),A.meta?t.jsx("div",{className:"text-xs text-slate-500 mt-2 font-mono whitespace-pre-wrap",children:Ip(A.meta)}):null]}),t.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[t.jsx("button",{type:"button",onClick:()=>St({open:!0,item:A}),className:"rounded-xl px-3 py-2 text-xs font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-800 min-w-[86px] text-center",children:"View"}),t.jsx("button",{type:"button",disabled:a||A.status!=="open",onClick:()=>ni(A,"dismiss"),className:"rounded-xl px-3 py-2 text-xs font-semibold border border-rose-200 bg-rose-50 hover:bg-rose-100 text-rose-800 min-w-[86px] text-center",title:"Dismiss anomaly",children:"Dismiss"}),t.jsx("button",{type:"button",disabled:a||A.status!=="open",onClick:()=>ni(A,"approve"),className:"rounded-xl px-3 py-2 text-xs font-semibold border border-emerald-200 bg-emerald-50 hover:bg-emerald-100 text-emerald-800 min-w-[86px] text-center disabled:opacity-50",title:"Approve = release payslip + email employee",children:"Approve"})]})]})},A._id))})})]}):null]}),t.jsx(OS,{open:L.open,title:"Cancel adjustment?",message:L.item?`Are you sure you want to cancel ${L.item.paycodeCode||"this adjustment"} for ${L.item.employeeSnapshot?.fullName||"this employee"} (${L.item.period||"-"})?`:"",confirmText:"Yes, cancel",tone:"danger",busy:a,onCancel:()=>N({open:!1,item:null}),onConfirm:()=>{L.item&&Ys(L.item)}}),t.jsxs(Xu,{open:U,title:J?"Edit Adjustment":"Add Adjustment",onClose:()=>!a&&M(!1),children:[t.jsx(Vu,{kind:q.kind,message:q.text,onClose:()=>Y({kind:"info",text:""})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Employee *"}),t.jsxs("select",{value:I.employeeId,onChange:A=>T(pe=>({...pe,employeeId:A.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",disabled:a,children:[t.jsx("option",{value:"",children:"Select employee"}),g.map(A=>t.jsxs("option",{value:A.id,children:[A.fullName," (",A.email,")"]},A.id))]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Paycode *"}),t.jsxs("select",{value:I.paycode,onChange:A=>T(pe=>({...pe,paycode:A.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",disabled:a,children:[t.jsx("option",{value:"",children:"Select paycode"}),b.map(A=>t.jsxs("option",{value:A.code,children:[A.code,"  ",A.name]},A._id))]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Amount *"}),t.jsx("input",{value:I.amount,onChange:A=>T(pe=>({...pe,amount:A.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",placeholder:"e.g. 1500"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Period *"}),t.jsxs("select",{value:I.period,onChange:A=>T(pe=>({...pe,period:A.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"Select period"}),h.map(A=>t.jsx("option",{value:A,children:A},A))]})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Note"}),t.jsx("textarea",{value:I.note,onChange:A=>T(pe=>({...pe,note:A.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[90px]",placeholder:"Optional note"})]})]}),t.jsxs("div",{className:"pt-5 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>M(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50",disabled:a,children:"Close"}),t.jsx("button",{type:"button",onClick:qa,className:_t("rounded-2xl px-5 py-2 text-sm font-semibold border",a?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),disabled:a,children:a?"Saving...":J?"Save":"Create"})]})]}),t.jsx(Xu,{open:wt.open,title:"Anomaly details",onClose:()=>St({open:!1,item:null}),widthClass:"sm:w-[820px]",children:wt.item?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:wt.item.employeeSnapshot?.fullName||"Employee"}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[wt.item.employeeSnapshot?.email||"-","  Period: ",wt.item.period||"-"]}),t.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Total anomalies: ",t.jsx("b",{children:wt.item.anomalyCount||(wt.item.items?.length??0)})]})]}),t.jsx("div",{className:"space-y-2",children:(wt.item.items||[]).map((A,pe)=>t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:A.type||"ANOMALY"}),t.jsx("div",{className:"text-sm text-slate-700 mt-1",children:A.message||"-"})]}),t.jsx("span",{className:_t("text-xs font-semibold rounded-full px-3 py-1 border",A.severity==="high"?"bg-rose-50 text-rose-800 border-rose-200":A.severity==="medium"?"bg-amber-50 text-amber-800 border-amber-200":"bg-slate-50 text-slate-700 border-slate-200"),children:A.severity||"low"})]}),A.meta?t.jsx("div",{className:"text-xs text-slate-500 mt-3 font-mono whitespace-pre-wrap",children:Ip(A.meta)}):null]},pe))}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"button",onClick:()=>St({open:!1,item:null}),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50",children:"Close"})})]}):null}),t.jsxs(Xu,{open:P,title:"Bulk Import Adjustments",onClose:()=>!a&&$(!1),widthClass:"sm:w-[980px]",children:[t.jsx(Vu,{kind:q.kind,message:q.text,onClose:()=>Y({kind:"info",text:""})}),t.jsxs("div",{className:"text-sm text-slate-700 mb-3",children:["CSV header (choose ONE):"," ",t.jsx("span",{className:"ml-2 font-mono text-xs",children:"employeeEmail,paycode,amount,period,note"})," OR"," ",t.jsx("span",{className:"ml-2 font-mono text-xs",children:"employeeId,paycode,amount,period,note"})]}),t.jsx("textarea",{value:le,onChange:A=>ie(A.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm min-h-[220px] bg-white text-slate-900 placeholder:text-slate-400 font-mono",placeholder:`employeeEmail,paycode,amount,period,note
john@x.com,BASIC,50000,2026-01,Basic salary correction
jane@x.com,OT,1200,2026-01,Overtime`}),t.jsxs("div",{className:"pt-4 flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>$(!1),className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50",disabled:a,children:"Close"}),t.jsx("button",{type:"button",onClick:Ha,className:_t("rounded-2xl px-5 py-2 text-sm font-semibold border",a?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),disabled:a,children:a?"Processing...":"Run Import"})]}),W?t.jsxs("div",{className:"mt-5 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Result"}),t.jsxs("div",{className:"text-sm text-slate-700 mt-1",children:["Created: ",t.jsx("b",{children:W.createdCount}),"  Skipped: ",t.jsx("b",{children:W.skippedCount})]}),W.skipped?.length?t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-600 mb-2",children:"Skipped rows:"}),t.jsx("div",{className:"space-y-2",children:W.skipped.map((A,pe)=>t.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-3 text-sm",children:[t.jsx("div",{className:"text-slate-900 font-semibold",children:A.reason}),t.jsx("div",{className:"text-xs text-slate-700 mt-1 font-mono",children:JSON.stringify(A.row)})]},pe))})]}):null]}):null]})]})}const $s="http://localhost:5000/api/pm/reports";function qs(){return{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}async function Hs(a){const i=(a.headers.get("content-type")||"").includes("application/json")?await a.json().catch(()=>({})):null;if(!a.ok)throw new Error(i?.message||`Request failed (${a.status})`);return i}async function zS(){const a=await fetch(`${$s}/periods`,{headers:qs()});return Hs(a)}async function BS({period:a,module:r=""}){const i=new URLSearchParams;i.set("period",a),r&&i.set("module",r);const c=await fetch(`${$s}/audit?${i.toString()}`,{headers:qs()});return Hs(c)}async function $S({period:a,status:r="released"}){const i=new URLSearchParams;i.set("period",a),i.set("status",r);const c=await fetch(`${$s}/payroll-summary?${i.toString()}`,{headers:qs()});return Hs(c)}async function qS({period:a}){const r=new URLSearchParams;r.set("period",a);const i=await fetch(`${$s}/employee-wise?${r.toString()}`,{headers:qs()});return Hs(i)}async function HS({status:a="all"}){const r=new URLSearchParams;r.set("status",a);const i=await fetch(`${$s}/paycodes?${r.toString()}`,{headers:qs()});return Hs(i)}async function PS({status:a="all"}){const r=new URLSearchParams;r.set("status",a);const i=await fetch(`${$s}/employee-setup?${r.toString()}`,{headers:qs()});return Hs(i)}async function YS({period:a}){const r=new URLSearchParams;r.set("period",a);const i=await fetch(`${$s}/payroll-runs?${r.toString()}`,{headers:qs()});return Hs(i)}async function GS({period:a,status:r="all",severity:i=""}){const c=new URLSearchParams;c.set("period",a),c.set("status",r),i&&c.set("severity",i);const m=await fetch(`${$s}/anomalies?${c.toString()}`,{headers:qs()});return Hs(m)}async function JS({period:a,recipientType:r="all",module:i="",status:c="all"}){const m=new URLSearchParams;a&&m.set("period",a),r&&r!=="all"&&m.set("recipientType",r),i&&m.set("module",i),c&&c!=="all"&&m.set("status",c);const u=await fetch(`${$s}/emails?${m.toString()}`,{headers:qs()});return Hs(u)}async function VS({role:a="all"}){const r=new URLSearchParams;r.set("role",a);const i=await fetch(`${$s}/access-rights?${r.toString()}`,{headers:qs()});return Hs(i)}function lc(...a){return a.filter(Boolean).join(" ")}const Fu=[{key:"audit",title:"Audit Report",desc:"Actions performed during the selected month (by user/module)."},{key:"emails",title:"Email Report",desc:"All emails sent during the selected period (employee/admin/PM)."},{key:"payrollSummary",title:"Payroll Summary",desc:"Totals, counts, and status breakdown for a period."},{key:"employeeWise",title:"Employee-wise Report",desc:"Payslip totals per employee for the period."},{key:"paycodes",title:"Paycode Report",desc:"All paycodes and configuration."},{key:"employeeSetup",title:"Employee Setup Report",desc:"All employees and employment details."},{key:"payrollRuns",title:"Payroll Run Report",desc:"Runs + employee results + adjustments for the period."},{key:"anomalies",title:"Anomalies Report",desc:"All anomalies for the selected period."},{key:"accessRights",title:"Access Rights Report",desc:"All Admin/Payroll Manager accounts."}];function Ms(a){return Number(a||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function gt(a){if(!a)return"";const r=new Date(a);return Number.isNaN(r.getTime())?"":r.toISOString().slice(0,10)}function tb(a){if(!a)return"";const r=new Date(a);return Number.isNaN(r.getTime())?"":`${r.toISOString().slice(0,10)} ${r.toISOString().slice(11,19)}`}function XS({filename:a,content:r,mime:i="text/plain;charset=utf-8"}){const c=new Blob([r],{type:i}),m=URL.createObjectURL(c),u=document.createElement("a");u.href=m,u.download=a,document.body.appendChild(u),u.click(),u.remove(),URL.revokeObjectURL(m)}function ys(a=[],r=[]){const i=u=>{const h=String(u??"");return h.includes('"')||h.includes(",")||h.includes(`
`)?`"${h.replace(/"/g,'""')}"`:h},c=r.map(u=>i(u.label)).join(","),m=a.map(u=>r.map(h=>i(h.get(u))).join(","));return[c,...m].join(`
`)}function Ae({value:a,children:r}){return t.jsx("option",{value:a,className:"bg-slate-900 text-white",children:r})}function os({label:a,value:r,onChange:i,children:c,disabled:m=!1}){return t.jsxs("label",{className:"block",children:[t.jsx("div",{className:"text-xs text-slate-600 mb-1",children:a}),t.jsx("select",{disabled:m,value:r,onChange:u=>i(u.target.value),className:lc("w-full rounded-xl border px-3 py-2 text-sm outline-none","border-slate-200 bg-slate-900 text-white","focus:ring-2 focus:ring-slate-300",m?"opacity-60 cursor-not-allowed":""),children:c})]})}function QS({active:a,title:r,desc:i,onClick:c}){return t.jsxs("button",{type:"button",onClick:c,className:lc("text-left rounded-2xl border p-4 transition","bg-white hover:bg-slate-50",a?"border-slate-900":"border-slate-200"),children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:r}),t.jsx("div",{className:"mt-1 text-xs text-slate-600",children:i})]})}function Os({columns:a,rows:r}){return t.jsx("div",{className:"overflow-auto rounded-2xl border border-slate-200",children:t.jsxs("table",{className:"min-w-[980px] w-full text-sm",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsx("tr",{children:a.map(i=>t.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-700 border-b border-slate-200",children:i.label},i.key))})}),t.jsx("tbody",{className:"bg-white",children:r.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:a.length,className:"px-4 py-6 text-slate-500",children:"No data"})}):r.map((i,c)=>t.jsx("tr",{className:"border-b border-slate-100 last:border-b-0",children:a.map(m=>t.jsx("td",{className:"px-4 py-3 text-slate-800 align-top",children:m.render?m.render(i):String(m.get(i)??"")},m.key))},i?._id||i?.id||c))})]})})}function Da({label:a,value:r,hint:i}){return t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"text-xs text-slate-600",children:a}),t.jsx("div",{className:"text-xl font-semibold text-slate-900",children:r}),i?t.jsx("div",{className:"mt-1 text-xs text-slate-500",children:i}):null]})}function Ku({active:a,children:r,onClick:i}){return t.jsx("button",{type:"button",onClick:i,className:lc("rounded-xl px-3 py-2 text-sm font-semibold border transition",a?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white hover:bg-slate-50 text-slate-900"),children:r})}function sb(a=24){const r=[],i=new Date,c=new Date(i.getFullYear(),i.getMonth(),1);for(let m=0;m<a;m++){const u=c.getFullYear(),h=String(c.getMonth()+1).padStart(2,"0");r.push(`${u}-${h}`),c.setMonth(c.getMonth()-1)}return r}function lb(a){const i=(Array.isArray(a)?a:[]).map(c=>String(c||"").trim()).filter(c=>/^\d{4}-(0[1-9]|1[0-2])$/.test(c));return Array.from(new Set(i)).sort((c,m)=>c<m?1:-1)}function FS(){const[a,r]=x.useState([]),[i,c]=x.useState("audit"),[m,u]=x.useState(""),[h,g]=x.useState(!0),[p,b]=x.useState(!1),[j,v]=x.useState(""),[D,C]=x.useState(""),[z,_]=x.useState(null),[k,L]=x.useState(""),[N,U]=x.useState("all"),[M,J]=x.useState(""),[te,q]=x.useState("all"),[Y,I]=x.useState("all"),[T,P]=x.useState("all"),[$,le]=x.useState("released"),[ie,W]=x.useState("all"),[R,ee]=x.useState(""),[Q,H]=x.useState("all"),[ue,w]=x.useState("runs"),E=x.useMemo(()=>Fu.find(K=>K.key===i),[i]),ne=x.useRef(null),he=x.useRef(0);x.useEffect(()=>{let K=!0;return(async()=>{try{g(!0),v("");const be=await zS();if(!K)return;const Z=lb(be?.periods),$e=sb(24),S=lb([...Z,...$e]);r(S),u(xe=>xe||S[0]||"")}catch(be){if(!K)return;const Z=sb(24);r(Z),u($e=>$e||Z[0]||""),v(be?.message?`Periods API failed. Using fallback months. (${be.message})`:"Periods API failed. Using fallback months.")}finally{K&&g(!1)}})(),()=>{K=!1}},[]),x.useEffect(()=>{const K=ne.current;K&&(K.scrollTop=he.current||0)});function ge(){const K=ne.current;K&&(he.current=K.scrollTop||0)}async function Ne(){if(C(""),v(""),!["paycodes","employeeSetup","accessRights"].includes(i)&&!m){v("Please select a period."),_(null);return}b(!0);try{let be=null;i==="audit"?be=await BS({period:m,module:k||""}):i==="emails"?be=await JS({period:m,recipientType:ie,module:R,status:Q}):i==="payrollSummary"?be=await $S({period:m,status:$}):i==="employeeWise"?be=await qS({period:m}):i==="paycodes"?be=await HS({status:te}):i==="employeeSetup"?be=await PS({status:Y}):i==="payrollRuns"?(be=await YS({period:m}),w("runs")):i==="anomalies"?be=await GS({period:m,status:N,severity:M}):i==="accessRights"&&(be=await VS({role:T})),he.current=0,_(be)}catch(be){v(be.message||"Failed to load preview"),_(null)}finally{b(!1)}}function ke(){if(!z)return null;const K=new Date().toISOString().slice(0,10),be=`${i}${m?"_"+m:""}_${K}.csv`;if(i==="emails"){const Z=z.items||[],$e=[{key:"createdAt",label:"Date",get:S=>tb(S.createdAt)},{key:"to",label:"To",get:S=>Array.isArray(S.to)?S.to.join("; "):String(S.to||"")},{key:"recipientType",label:"Recipient Type",get:S=>S.recipientType||""},{key:"subject",label:"Subject",get:S=>S.subject||""},{key:"module",label:"Module",get:S=>S.module||""},{key:"template",label:"Template",get:S=>S.template||""},{key:"status",label:"Status",get:S=>S.status||""},{key:"entityId",label:"Entity ID",get:S=>S.entityId||""}];return{filename:`emails_${m}_${K}.csv`,csv:ys(Z,$e)}}if(i==="payrollRuns"){if(ue==="runs"){const S=z.runs||[],xe=[{key:"createdAt",label:"Created",get:fe=>gt(fe.createdAt)},{key:"payDate",label:"Pay Date",get:fe=>gt(fe.payDate)},{key:"status",label:"Status",get:fe=>fe.status||""},{key:"trigger",label:"Trigger",get:fe=>fe?.trigger?.type==="manual"?"manual":"scheduler"},{key:"by",label:"By",get:fe=>fe?.trigger?.by?.fullName||fe?.trigger?.by?.email||""},{key:"employees",label:"Employees",get:fe=>fe?.counts?.employees??0},{key:"created",label:"Payslips Created",get:fe=>fe?.counts?.payslipsCreated??0},{key:"failed",label:"Payslips Failed",get:fe=>fe?.counts?.payslipsFailed??0},{key:"anomalies",label:"Anomalies Found",get:fe=>fe?.counts?.anomaliesFound??0},{key:"blocked",label:"Payslips Blocked",get:fe=>fe?.counts?.payslipsBlocked??0},{key:"emailed",label:"Emailed Count",get:fe=>fe?.counts?.emailedCount??0},{key:"error",label:"Error",get:fe=>fe.error||""}];return{filename:`payroll_runs_${m}_${K}.csv`,csv:ys(S,xe)}}if(ue==="employees"){const S=z.employees||[],xe=[{key:"name",label:"Employee",get:fe=>fe?.employeeSnapshot?.fullName||""},{key:"email",label:"Email",get:fe=>fe?.employeeSnapshot?.email||""},{key:"empId",label:"Employee ID",get:fe=>fe?.employeeSnapshot?.employeeId||""},{key:"payDate",label:"Pay Date",get:fe=>gt(fe.payDate)},{key:"gross",label:"Gross",get:fe=>fe?.totals?.grossPay??""},{key:"ded",label:"Deductions",get:fe=>fe?.totals?.totalDeductions??""},{key:"net",label:"Net",get:fe=>fe?.totals?.netPay??""},{key:"status",label:"Payslip Status",get:fe=>fe.status||""},{key:"proc",label:"Processing",get:fe=>fe.processingStatus||""},{key:"kind",label:"Payslip Kind",get:fe=>fe.payslipKind||""},{key:"seq",label:"Adjustment Seq",get:fe=>fe.adjustmentSequence||0},{key:"runId",label:"Payroll Run ID",get:fe=>fe.payrollRunId||""}];return{filename:`payroll_employees_${m}_${K}.csv`,csv:ys(S,xe)}}const Z=z.adjustments||[],$e=[{key:"createdAt",label:"Created",get:S=>gt(S.createdAt)},{key:"employee",label:"Employee",get:S=>S?.employeeSnapshot?.fullName||""},{key:"email",label:"Email",get:S=>S?.employeeSnapshot?.email||""},{key:"code",label:"Paycode",get:S=>S.paycodeCode||""},{key:"name",label:"Name",get:S=>S.paycodeName||""},{key:"type",label:"Type",get:S=>S.type||""},{key:"amount",label:"Amount",get:S=>S.amount??""},{key:"status",label:"Status",get:S=>S.status||""},{key:"by",label:"Created By",get:S=>S?.createdBy?.fullName||S?.createdBy?.email||""}];return{filename:`payroll_adjustments_${m}_${K}.csv`,csv:ys(Z,$e)}}if(i==="audit"){const Z=z.items||[];return{filename:be,csv:ys(Z,[{key:"createdAt",label:"Date",get:S=>gt(S.createdAt)},{key:"actor",label:"Actor",get:S=>S?.actorId?.fullName||S?.actorId?.email||""},{key:"actorRole",label:"Actor Role",get:S=>S.actorRole||""},{key:"module",label:"Module",get:S=>S.module||""},{key:"action",label:"Action",get:S=>S.action||""},{key:"message",label:"Message",get:S=>S.message||""}])}}if(i==="employeeWise"){const Z=z.items||[];return{filename:be,csv:ys(Z,[{key:"name",label:"Employee",get:S=>S?.employeeSnapshot?.fullName||""},{key:"email",label:"Email",get:S=>S?.employeeSnapshot?.email||""},{key:"empId",label:"Employee ID",get:S=>S?.employeeSnapshot?.employeeId||""},{key:"gross",label:"Gross",get:S=>S?.totals?.grossPay??""},{key:"ded",label:"Deductions",get:S=>S?.totals?.totalDeductions??""},{key:"net",label:"Net",get:S=>S?.totals?.netPay??""},{key:"status",label:"Payslip Status",get:S=>S.status||""},{key:"proc",label:"Processing",get:S=>S.processingStatus||""}])}}if(i==="paycodes"){const Z=z.items||[];return{filename:be,csv:ys(Z,[{key:"code",label:"Code",get:S=>S.code||""},{key:"name",label:"Name",get:S=>S.name||""},{key:"type",label:"Type",get:S=>S.type||""},{key:"visible",label:"Visible On Payslip",get:S=>String(!!S.visibleOnPayslip)},{key:"active",label:"Active",get:S=>String(S.active!==!1)},{key:"archivedAt",label:"Archived At",get:S=>gt(S.archivedAt)},{key:"calcType",label:"Calc Type",get:S=>S.calcType||""},{key:"priority",label:"Priority",get:S=>S.defaultPriority??""}])}}if(i==="employeeSetup"){const Z=z.items||[];return{filename:be,csv:ys(Z,[{key:"name",label:"Full Name",get:S=>S.fullName||""},{key:"email",label:"Email",get:S=>S.email||""},{key:"empId",label:"Employee ID",get:S=>S.employeeId||""},{key:"dept",label:"Department",get:S=>S.department||""},{key:"status",label:"Employment Status",get:S=>S.employmentStatus||""},{key:"type",label:"Employment Type",get:S=>S.employmentType||""},{key:"hire",label:"Hire Date",get:S=>gt(S.hireDate)},{key:"term",label:"Termination Date",get:S=>gt(S.terminationDate)},{key:"active",label:"User Active",get:S=>String(!!S.isActive)}])}}if(i==="anomalies"){const Z=z.items||[];return{filename:be,csv:ys(Z,[{key:"period",label:"Period",get:S=>S.period||""},{key:"name",label:"Employee",get:S=>S?.employeeSnapshot?.fullName||""},{key:"email",label:"Email",get:S=>S?.employeeSnapshot?.email||""},{key:"severity",label:"Severity",get:S=>S.severity||""},{key:"status",label:"Status",get:S=>S.status||""},{key:"count",label:"Anomaly Count",get:S=>S.anomalyCount??""},{key:"type",label:"Type",get:S=>S.type||""},{key:"message",label:"Message",get:S=>S.message||""}])}}if(i==="accessRights"){const Z=z.items||[];return{filename:be,csv:ys(Z,[{key:"name",label:"Full Name",get:S=>S.fullName||""},{key:"email",label:"Email",get:S=>S.email||""},{key:"role",label:"Role",get:S=>S.role||""},{key:"dept",label:"Department",get:S=>S.department||""},{key:"active",label:"Active",get:S=>String(!!S.isActive)},{key:"createdAt",label:"Created At",get:S=>gt(S.createdAt)}])}}if(i==="payrollSummary"){const Z=z.totals||{},$e=[{period:z.period||"",payDate:gt(z.payDate),grossPay:Z.grossPay??0,totalDeductions:Z.totalDeductions??0,netPay:Z.netPay??0}];return{filename:be,csv:ys($e,[{key:"period",label:"Period",get:xe=>xe.period},{key:"payDate",label:"Pay Date",get:xe=>xe.payDate},{key:"grossPay",label:"Gross Pay",get:xe=>xe.grossPay},{key:"totalDeductions",label:"Total Deductions",get:xe=>xe.totalDeductions},{key:"netPay",label:"Net Pay",get:xe=>xe.netPay}])}}return null}function ce(){if(C(""),!z){v("Please click Preview first.");return}const K=ke();if(!K){v("Download is not available for this report yet.");return}XS({filename:K.filename,content:K.csv,mime:"text/csv;charset=utf-8"}),C("Report downloaded successfully.")}function ve(){if(!z)return null;const K=z?.totals||{},be=z?.counts||{};return t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsx(Da,{label:"Gross Pay",value:Ms(K.grossPay)}),t.jsx(Da,{label:"Total Deductions",value:Ms(K.totalDeductions)}),t.jsx(Da,{label:"Net Pay",value:Ms(K.netPay)})]}),t.jsxs("div",{className:"mt-4 text-sm text-slate-700",children:[t.jsx("span",{className:"text-slate-500",children:"Payslips:"})," ","total ",be.total||0,"  released ",be.released||0,"  approved ",be.approved||0,"  draft ",be.draft||0]})]})}function Je(){if(!z)return null;const K=z.runs||[],be=z.employees||[],Z=z.adjustments||[],$e=K.filter(me=>me?.trigger?.type==="manual").length,S=K.length-$e,xe=K.reduce((me,Pt)=>{const Oe=Pt?.counts||{};return me.employees+=Number(Oe.employees||0),me.created+=Number(Oe.payslipsCreated||0),me.failed+=Number(Oe.payslipsFailed||0),me.anomalies+=Number(Oe.anomaliesFound||0),me.blocked+=Number(Oe.payslipsBlocked||0),me.emailed+=Number(Oe.emailedCount||0),me},{employees:0,created:0,failed:0,anomalies:0,blocked:0,emailed:0}),fe=[{key:"createdAt",label:"Created",get:me=>gt(me.createdAt)},{key:"payDate",label:"Pay Date",get:me=>gt(me.payDate)},{key:"status",label:"Status",get:me=>me.status||""},{key:"trigger",label:"Trigger",get:me=>me?.trigger?.type==="manual"?"manual":"scheduler"},{key:"by",label:"By",get:me=>me?.trigger?.by?.fullName||me?.trigger?.by?.email||""},{key:"emps",label:"Employees",get:me=>me?.counts?.employees??0},{key:"created",label:"Payslips Created",get:me=>me?.counts?.payslipsCreated??0},{key:"failed",label:"Failed",get:me=>me?.counts?.payslipsFailed??0},{key:"anom",label:"Anomalies",get:me=>me?.counts?.anomaliesFound??0},{key:"blocked",label:"Blocked",get:me=>me?.counts?.payslipsBlocked??0},{key:"emailed",label:"Emailed",get:me=>me?.counts?.emailedCount??0},{key:"error",label:"Error",get:me=>me.error||""}],He=[{key:"name",label:"Employee",get:me=>me?.employeeSnapshot?.fullName||""},{key:"email",label:"Email",get:me=>me?.employeeSnapshot?.email||""},{key:"empId",label:"Employee ID",get:me=>me?.employeeSnapshot?.employeeId||""},{key:"payDate",label:"Pay Date",get:me=>gt(me.payDate)},{key:"gross",label:"Gross",get:me=>Ms(me?.totals?.grossPay)},{key:"ded",label:"Deductions",get:me=>Ms(me?.totals?.totalDeductions)},{key:"net",label:"Net",get:me=>Ms(me?.totals?.netPay)},{key:"status",label:"Payslip Status",get:me=>me.status||""},{key:"proc",label:"Processing",get:me=>me.processingStatus||""},{key:"kind",label:"Kind",get:me=>me.payslipKind||""},{key:"seq",label:"Adj Seq",get:me=>me.adjustmentSequence||0},{key:"runId",label:"Payroll Run ID",get:me=>me.payrollRunId||""}],We=[{key:"createdAt",label:"Created",get:me=>gt(me.createdAt)},{key:"employee",label:"Employee",get:me=>me?.employeeSnapshot?.fullName||""},{key:"email",label:"Email",get:me=>me?.employeeSnapshot?.email||""},{key:"code",label:"Paycode",get:me=>me.paycodeCode||""},{key:"name",label:"Name",get:me=>me.paycodeName||""},{key:"type",label:"Type",get:me=>me.type||""},{key:"amount",label:"Amount",get:me=>Ms(me.amount)},{key:"status",label:"Status",get:me=>me.status||""},{key:"by",label:"Created By",get:me=>me?.createdBy?.fullName||me?.createdBy?.email||""}];return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[t.jsx(Da,{label:"Runs",value:K.length,hint:`${$e} manual  ${S} scheduler`}),t.jsx(Da,{label:"Employees (sum across runs)",value:xe.employees}),t.jsx(Da,{label:"Payslips Created",value:xe.created,hint:`Failed: ${xe.failed}`}),t.jsx(Da,{label:"Anomalies / Blocked / Emailed",value:`${xe.anomalies} / ${xe.blocked} / ${xe.emailed}`})]}),t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Payroll Run Breakdown"}),t.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Tabs help you review runs, employee outcomes, and adjustments separately."})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ku,{active:ue==="runs",onClick:()=>w("runs"),children:"Runs"}),t.jsx(Ku,{active:ue==="employees",onClick:()=>w("employees"),children:"Employees"}),t.jsx(Ku,{active:ue==="adjustments",onClick:()=>w("adjustments"),children:"Adjustments"})]})]}),t.jsx("div",{className:"mt-4",children:ue==="runs"?t.jsx(Os,{columns:fe,rows:K}):ue==="employees"?t.jsx(Os,{columns:He,rows:be}):t.jsx(Os,{columns:We,rows:Z})})]})]})}function Me(){if(!z)return null;if(i==="payrollSummary")return t.jsx(ve,{});if(i==="payrollRuns")return t.jsx(Je,{});if(i==="audit"){const K=z.items||[],be=[{key:"date",label:"Date",get:Z=>gt(Z.createdAt)},{key:"actor",label:"Actor",get:Z=>Z?.actorId?.fullName||Z?.actorId?.email||""},{key:"role",label:"Role",get:Z=>Z.actorRole||""},{key:"module",label:"Module",get:Z=>Z.module||""},{key:"action",label:"Action",get:Z=>Z.action||""},{key:"message",label:"Message",get:Z=>Z.message||""}];return t.jsx(Os,{columns:be,rows:K})}if(i==="emails"){const K=z.items||[],be=[{key:"dt",label:"Date/Time",get:Z=>tb(Z.createdAt)},{key:"to",label:"To",get:Z=>Array.isArray(Z.to)?Z.to.join(", "):String(Z.to||"")},{key:"rtype",label:"Recipient Type",get:Z=>Z.recipientType||""},{key:"subject",label:"Subject",get:Z=>Z.subject||""},{key:"module",label:"Module",get:Z=>Z.module||""},{key:"template",label:"Template",get:Z=>Z.template||""},{key:"status",label:"Status",get:Z=>Z.status||""}];return t.jsx(Os,{columns:be,rows:K})}if(i==="employeeWise"){const K=z.items||[],be=[{key:"name",label:"Employee",get:Z=>Z?.employeeSnapshot?.fullName||""},{key:"email",label:"Email",get:Z=>Z?.employeeSnapshot?.email||""},{key:"empId",label:"Employee ID",get:Z=>Z?.employeeSnapshot?.employeeId||""},{key:"gross",label:"Gross",get:Z=>Ms(Z?.totals?.grossPay)},{key:"ded",label:"Deductions",get:Z=>Ms(Z?.totals?.totalDeductions)},{key:"net",label:"Net",get:Z=>Ms(Z?.totals?.netPay)},{key:"status",label:"Payslip Status",get:Z=>Z.status||""},{key:"proc",label:"Processing",get:Z=>Z.processingStatus||""}];return t.jsx(Os,{columns:be,rows:K})}if(i==="paycodes"){const K=z.items||[],be=[{key:"code",label:"Code",get:Z=>Z.code||""},{key:"name",label:"Name",get:Z=>Z.name||""},{key:"type",label:"Type",get:Z=>Z.type||""},{key:"visible",label:"Visible",get:Z=>Z.visibleOnPayslip?"Yes":"No"},{key:"active",label:"Active",get:Z=>Z.active===!1?"No":"Yes"},{key:"archivedAt",label:"Archived At",get:Z=>gt(Z.archivedAt)},{key:"calcType",label:"Calc Type",get:Z=>Z.calcType||""},{key:"prio",label:"Priority",get:Z=>Z.defaultPriority??""}];return t.jsx(Os,{columns:be,rows:K})}if(i==="employeeSetup"){const K=z.items||[],be=[{key:"name",label:"Full Name",get:Z=>Z.fullName||""},{key:"email",label:"Email",get:Z=>Z.email||""},{key:"empId",label:"Employee ID",get:Z=>Z.employeeId||""},{key:"dept",label:"Department",get:Z=>Z.department||""},{key:"eStatus",label:"Employment Status",get:Z=>Z.employmentStatus||""},{key:"eType",label:"Employment Type",get:Z=>Z.employmentType||""},{key:"hire",label:"Hire Date",get:Z=>gt(Z.hireDate)},{key:"term",label:"Termination Date",get:Z=>gt(Z.terminationDate)},{key:"active",label:"Active",get:Z=>Z.isActive?"Yes":"No"}];return t.jsx(Os,{columns:be,rows:K})}if(i==="anomalies"){const K=z.items||[],be=[{key:"name",label:"Employee",get:Z=>Z?.employeeSnapshot?.fullName||""},{key:"email",label:"Email",get:Z=>Z?.employeeSnapshot?.email||""},{key:"empId",label:"Employee ID",get:Z=>Z?.employeeSnapshot?.employeeId||""},{key:"severity",label:"Severity",get:Z=>Z.severity||""},{key:"status",label:"Status",get:Z=>Z.status||""},{key:"count",label:"Count",get:Z=>Z.anomalyCount??0},{key:"type",label:"Type",get:Z=>Z.type||""},{key:"message",label:"Message",get:Z=>Z.message||""}];return t.jsx(Os,{columns:be,rows:K})}if(i==="accessRights"){const K=z.items||[],be=[{key:"name",label:"Full Name",get:Z=>Z.fullName||""},{key:"email",label:"Email",get:Z=>Z.email||""},{key:"role",label:"Role",get:Z=>Z.role||""},{key:"dept",label:"Department",get:Z=>Z.department||""},{key:"active",label:"Active",get:Z=>Z.isActive?"Yes":"No"},{key:"createdAt",label:"Created At",get:Z=>gt(Z.createdAt)}];return t.jsx(Os,{columns:be,rows:K})}return null}const se=!["paycodes","employeeSetup","accessRights"].includes(i);return t.jsx(Nt,{title:"Reports",children:t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{className:"rounded-[28px] bg-white border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-slate-100",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Filters"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Select a report, set filters, preview, then download."})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{type:"button",onClick:Ne,disabled:p,className:lc("rounded-xl px-4 py-2 text-sm font-semibold border transition","border-slate-200 bg-slate-900 text-white hover:bg-slate-800",p?"opacity-60 cursor-not-allowed":""),children:p?"Loading...":"Preview"}),t.jsx("button",{type:"button",onClick:ce,className:"rounded-xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",children:"Download"})]})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3",children:[t.jsx("div",{className:"md:col-span-1",children:t.jsx(os,{label:"Report",value:i,onChange:K=>{c(K),v(""),C(""),_(null),he.current=0,K!=="payrollRuns"&&w("runs")},children:Fu.map(K=>t.jsx(Ae,{value:K.key,children:K.title},K.key))})}),se?t.jsx("div",{className:"md:col-span-1",children:t.jsxs(os,{label:"Period (YYYY-MM)",value:m,onChange:u,disabled:h,children:[h?t.jsx(Ae,{value:"",children:"Loading..."}):null,!h&&a.length===0?t.jsx(Ae,{value:"",children:"No periods"}):null,a.map(K=>t.jsx(Ae,{value:K,children:K},K))]})}):null,i==="audit"?t.jsx("div",{className:"md:col-span-1",children:t.jsxs(os,{label:"Module (optional)",value:k,onChange:L,children:[t.jsx(Ae,{value:"",children:"All"}),t.jsx(Ae,{value:"profile",children:"profile"}),t.jsx(Ae,{value:"leave",children:"leave"}),t.jsx(Ae,{value:"overtime",children:"overtime"}),t.jsx(Ae,{value:"support",children:"support"}),t.jsx(Ae,{value:"progressions",children:"progressions"}),t.jsx(Ae,{value:"adjustments",children:"adjustments"}),t.jsx(Ae,{value:"payroll_run",children:"payroll_run"})]})}):null,i==="emails"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"md:col-span-1",children:t.jsxs(os,{label:"Recipients",value:ie,onChange:W,children:[t.jsx(Ae,{value:"all",children:"All"}),t.jsx(Ae,{value:"employee",children:"Employees"}),t.jsx(Ae,{value:"admin_pm",children:"Admin/PM"})]})}),t.jsx("div",{className:"md:col-span-1",children:t.jsxs(os,{label:"Module",value:R,onChange:ee,children:[t.jsx(Ae,{value:"",children:"All"}),t.jsx(Ae,{value:"leave",children:"leave"}),t.jsx(Ae,{value:"overtime",children:"overtime"}),t.jsx(Ae,{value:"profile",children:"profile"}),t.jsx(Ae,{value:"support",children:"support"}),t.jsx(Ae,{value:"payroll",children:"payroll"}),t.jsx(Ae,{value:"anomalies",children:"anomalies"})]})}),t.jsx("div",{className:"md:col-span-1",children:t.jsxs(os,{label:"Status",value:Q,onChange:H,children:[t.jsx(Ae,{value:"all",children:"All"}),t.jsx(Ae,{value:"sent",children:"sent"}),t.jsx(Ae,{value:"failed",children:"failed"})]})})]}):null,i==="anomalies"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"md:col-span-1",children:t.jsxs(os,{label:"Status",value:N,onChange:U,children:[t.jsx(Ae,{value:"all",children:"All"}),t.jsx(Ae,{value:"open",children:"open"}),t.jsx(Ae,{value:"reviewed",children:"reviewed"}),t.jsx(Ae,{value:"dismissed",children:"dismissed"})]})}),t.jsx("div",{className:"md:col-span-1",children:t.jsxs(os,{label:"Severity",value:M,onChange:J,children:[t.jsx(Ae,{value:"",children:"All"}),t.jsx(Ae,{value:"low",children:"low"}),t.jsx(Ae,{value:"medium",children:"medium"}),t.jsx(Ae,{value:"high",children:"high"})]})})]}):null,i==="paycodes"?t.jsx("div",{className:"md:col-span-1",children:t.jsxs(os,{label:"Paycodes",value:te,onChange:q,children:[t.jsx(Ae,{value:"all",children:"All"}),t.jsx(Ae,{value:"active",children:"Active"}),t.jsx(Ae,{value:"archived",children:"Archived"})]})}):null,i==="employeeSetup"?t.jsx("div",{className:"md:col-span-1",children:t.jsxs(os,{label:"Employees",value:Y,onChange:I,children:[t.jsx(Ae,{value:"all",children:"All"}),t.jsx(Ae,{value:"active",children:"Active"}),t.jsx(Ae,{value:"terminated",children:"Terminated"})]})}):null,i==="accessRights"?t.jsx("div",{className:"md:col-span-1",children:t.jsxs(os,{label:"Role",value:T,onChange:P,children:[t.jsx(Ae,{value:"all",children:"Admin + Payroll Manager"}),t.jsx(Ae,{value:"admin",children:"Admin only"}),t.jsx(Ae,{value:"payroll_manager",children:"Payroll Manager only"})]})}):null,i==="payrollSummary"?t.jsx("div",{className:"md:col-span-1",children:t.jsxs(os,{label:"Payslips included",value:$,onChange:le,children:[t.jsx(Ae,{value:"released",children:"Released only"}),t.jsx(Ae,{value:"all",children:"All statuses"})]})}):null]}),E?t.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[t.jsxs("span",{className:"font-semibold text-slate-900",children:[E.title,":"]})," ",E.desc]}):null,D?t.jsx("div",{className:"mt-4 rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-800",children:D}):null,j?t.jsx("div",{className:"mt-4 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-800",children:j}):null]}),t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Preview"}),t.jsx("div",{ref:ne,onScroll:ge,className:"max-h-[560px] overflow-auto rounded-3xl bg-slate-50 border border-slate-200 p-4",children:z?t.jsx(Me,{}):t.jsxs("div",{className:"text-sm text-slate-600",children:["Click ",t.jsx("span",{className:"font-semibold text-slate-900",children:"Preview"})," to load the report."]})})]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:Fu.map(K=>t.jsx(QS,{active:K.key===i,title:K.title,desc:K.desc,onClick:()=>{c(K.key),v(""),C(""),_(null),he.current=0,K.key!=="payrollRuns"&&w("runs")}},K.key))})]})})}const KS={darkMode:!0,largeText:!1,notifications:!0,highContrast:!1};function Ma(a){const r=a&&typeof a=="object"?a:{};return{darkMode:r.darkMode!==!1,largeText:r.largeText===!0,notifications:r.notifications!==!1,highContrast:r.highContrast===!0}}function ZS(){try{const a=localStorage.getItem("accessibility_prefs");return a?Ma(JSON.parse(a)):null}catch{return null}}function Zu(a){const r=Ma(a);localStorage.setItem("accessibility_prefs",JSON.stringify(r));try{const i=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify({...i||{},accessibilityPrefs:r}))}catch{}window.dispatchEvent(new Event("user:updated"))}function IS(){const a=x.useMemo(()=>{try{const p=JSON.parse(localStorage.getItem("user")||"{}");if(p?.accessibilityPrefs)return Ma(p.accessibilityPrefs)}catch{}return ZS()||KS},[]),[r,i]=x.useState(Ma(a)),[c,m]=x.useState(!1),[u,h]=x.useState("");x.useEffect(()=>{document.documentElement.style.fontSize=r.largeText?"18px":"16px",document.documentElement.style.filter=r.highContrast?"contrast(1.15)":"",r.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r.largeText,r.highContrast,r.darkMode]),x.useEffect(()=>{let p=!0;return(async()=>{try{const b=await Ib();if(!p)return;const j=Ma(b);i(j),Zu(j)}catch{}})(),()=>{p=!1}},[]);async function g(p){const b=Ma({...r,[p]:!r[p]});i(b),Zu(b),m(!0),h("");try{const j=await Wb(b),v=Ma(j);i(v),Zu(v)}catch(j){h(j?.message||"Failed to update accessibility")}finally{m(!1)}}return t.jsx(Nt,{title:"Accessibility",children:t.jsxs("div",{className:"rounded-[28px] bg-white border border-slate-200 p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"Preferences"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"These settings are saved to your account and will apply across Back Office."})]}),u?t.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-800",children:u}):null,t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsx(Oo,{title:"Dark Mode",desc:"Turn off to use Light Mode.",value:r.darkMode,onClick:()=>g("darkMode"),disabled:c}),t.jsx(Oo,{title:"Large Text",desc:"Increase text size for readability.",value:r.largeText,onClick:()=>g("largeText"),disabled:c}),t.jsx(Oo,{title:"Notifications",desc:"Enable payslip and support updates.",value:r.notifications,onClick:()=>g("notifications"),disabled:c}),t.jsx(Oo,{title:"High Contrast",desc:"Improve contrast for better visibility.",value:r.highContrast,onClick:()=>g("highContrast"),disabled:c})]})]})})}function Oo({title:a,desc:r,value:i,onClick:c,disabled:m}){return t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 flex items-start justify-between gap-4 shadow-sm",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-slate-900",children:a}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:r})]}),t.jsx("button",{onClick:c,disabled:m,className:["shrink-0 rounded-full w-12 h-7 border relative transition",i?"bg-slate-900 border-slate-900":"bg-slate-200 border-slate-200",m?"opacity-60 cursor-not-allowed":"hover:opacity-95"].join(" "),type:"button","aria-pressed":i,children:t.jsx("span",{className:["absolute top-1 h-5 w-5 rounded-full transition bg-white shadow",i?"left-6":"left-1"].join(" ")})})]})}function ul(...a){return a.filter(Boolean).join(" ")}function WS({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:ul("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold",type:"button",children:""})]})})}function _o({title:a,children:r,className:i=""}){return t.jsxs("div",{className:ul("rounded-3xl bg-white border border-slate-200 p-5 shadow-sm",i),children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function e1(a,r){return JSON.stringify(a||{})===JSON.stringify(r||{})}function t1(a){return/[^A-Za-z0-9]/.test(String(a||""))}function s1(){const[a,r]=x.useState(!0),[i,c]=x.useState(!1),[m,u]=x.useState({kind:"info",text:""}),[h,g]=x.useState(null),[p,b]=x.useState({fullName:"",department:"",email:"",bankDetails:{bankName:"",accountName:"",accountNumber:"",sortCode:"",iban:""}}),[j,v]=x.useState(null),C=x.useMemo(()=>String(h?.role||"").toLowerCase(),[h])==="admin",z=x.useMemo(()=>{const P=h?.profilePhotoUrl||"";return P?P.startsWith("http")?P:`http://localhost:5000${P}`:""},[h]),_=x.useMemo(()=>j?!e1(p,j):!1,[p,j]),[k,L]=x.useState({current:"",next:"",confirm:""}),[N,U]=x.useState(!1),M=x.useMemo(()=>{const P=k.next||"",$=P.length>=8,le=t1(P),ie=P.length>0&&P===(k.confirm||"");return{okLen:$,okSpecial:le,okMatch:ie}},[k.next,k.confirm]),J=x.useMemo(()=>!!k.current&&M.okLen&&M.okSpecial&&M.okMatch&&!N&&!i,[k.current,M.okLen,M.okSpecial,M.okMatch,N,i]);async function te(){r(!0),u({kind:"info",text:""});try{const P=await Vb();g(P);const $={fullName:P.fullName||"",department:P.department||"",email:P.email||"",bankDetails:{bankName:P.bankDetails?.bankName||"",accountName:P.bankDetails?.accountName||"",accountNumber:P.bankDetails?.accountNumber||"",sortCode:P.bankDetails?.sortCode||"",iban:P.bankDetails?.iban||""}};b($),v($);try{const le=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify({...le||{},fullName:P.fullName,email:P.email,department:P.department||"",profilePhotoUrl:P.profilePhotoUrl||"",role:P.role||le?.role})),window.dispatchEvent(new Event("user:updated"))}catch{}}catch(P){u({kind:"error",text:P.message||"Failed to load profile."})}finally{r(!1)}}async function q(){if(!(i||!_)){c(!0),u({kind:"info",text:""});try{const P=C?{fullName:p.fullName,department:p.department,email:p.email}:{fullName:p.fullName,department:p.department,email:p.email,bankDetails:p.bankDetails},$=await Tw(P);g($);const le={fullName:$.fullName||"",department:$.department||"",email:$.email||"",bankDetails:{bankName:$.bankDetails?.bankName||"",accountName:$.bankDetails?.accountName||"",accountNumber:$.bankDetails?.accountNumber||"",sortCode:$.bankDetails?.sortCode||"",iban:$.bankDetails?.iban||""}};b(le),v(le);try{const ie=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify({...ie||{},fullName:$.fullName,email:$.email,department:$.department||"",profilePhotoUrl:$.profilePhotoUrl||""})),window.dispatchEvent(new Event("user:updated"))}catch{}u({kind:"success",text:"Profile updated."})}catch(P){u({kind:"error",text:P.message||"Failed to save profile."})}finally{c(!1)}}}async function Y(P){if(!(!P||i)){c(!0),u({kind:"info",text:""});try{const $=await Xb(P),le={...h||{},profilePhotoUrl:$.profilePhotoUrl};g(le);try{const ie=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify({...ie||{},profilePhotoUrl:$.profilePhotoUrl||""})),window.dispatchEvent(new Event("user:updated"))}catch{}u({kind:"success",text:"Profile picture updated."})}catch($){u({kind:"error",text:$.message||"Failed to upload profile picture."})}finally{c(!1)}}}async function I(){if(!i){c(!0),u({kind:"info",text:""});try{const P=await Qb(),$={...h||{},profilePhotoUrl:P.profilePhotoUrl||""};g($);try{const le=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify({...le||{},profilePhotoUrl:""})),window.dispatchEvent(new Event("user:updated"))}catch{}u({kind:"success",text:"Profile picture removed."})}catch(P){u({kind:"error",text:P.message||"Failed to remove profile picture."})}finally{c(!1)}}}async function T(){if(!J){u({kind:"error",text:"Please ensure password meets requirements and confirmation matches."});return}U(!0),u({kind:"info",text:""});try{await Fb({currentPassword:k.current,newPassword:k.next}),L({current:"",next:"",confirm:""}),u({kind:"success",text:"Password updated successfully."})}catch(P){u({kind:"error",text:P.message||"Failed to update password."})}finally{U(!1)}}return x.useEffect(()=>{te()},[]),t.jsx(Nt,{title:"My Profile",children:t.jsxs("div",{className:"bg-slate-50 rounded-[28px] p-6 min-h-[calc(100vh-2rem-40px)]",children:[t.jsx(WS,{kind:m.kind,message:m.text,onClose:()=>u({kind:"info",text:""})}),t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:"My Profile"}),t.jsx("div",{className:"text-sm text-slate-600",children:"Admin/Payroll Manager can edit their details directly."})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:te,className:"rounded-2xl px-5 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50 text-slate-900",type:"button",disabled:a||i,children:"Refresh"}),t.jsx("button",{onClick:q,className:ul("rounded-2xl px-5 py-2 text-sm font-semibold border",!_||i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),type:"button",disabled:!_||i,children:i?"Saving...":"Save"})]})]}),a?t.jsx("div",{className:"text-sm text-slate-600",children:"Loading"}):h?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:ul("grid grid-cols-1 gap-6",C?"xl:grid-cols-1":"xl:grid-cols-2"),children:[t.jsxs(_o,{title:"Details",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Role"}),t.jsx("input",{value:String(h.role||"").toUpperCase(),disabled:!0,className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-slate-100 text-slate-900 cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Department"}),t.jsx("input",{value:p.department,onChange:P=>b($=>({...$,department:P.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Full Name"}),t.jsx("input",{value:p.fullName,onChange:P=>b($=>({...$,fullName:P.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Email"}),t.jsx("input",{value:p.email,onChange:P=>b($=>({...$,email:P.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]})]}),C?null:t.jsxs(_o,{title:"Bank Details",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Bank Name"}),t.jsx("input",{value:p.bankDetails.bankName,onChange:P=>b($=>({...$,bankDetails:{...$.bankDetails,bankName:P.target.value}})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Account Name"}),t.jsx("input",{value:p.bankDetails.accountName,onChange:P=>b($=>({...$,bankDetails:{...$.bankDetails,accountName:P.target.value}})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Account Number"}),t.jsx("input",{value:p.bankDetails.accountNumber,onChange:P=>b($=>({...$,bankDetails:{...$.bankDetails,accountNumber:P.target.value}})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Sort Code"}),t.jsx("input",{value:p.bankDetails.sortCode,onChange:P=>b($=>({...$,bankDetails:{...$.bankDetails,sortCode:P.target.value}})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"IBAN"}),t.jsx("input",{value:p.bankDetails.iban,onChange:P=>b($=>({...$,bankDetails:{...$.bankDetails,iban:P.target.value}})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]})]})]}),t.jsxs(_o,{title:"Profile Photo",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[z?t.jsx("img",{src:z,alt:"Profile",className:"h-16 w-16 rounded-full object-cover border border-slate-200 bg-white"}):t.jsx("div",{className:"h-16 w-16 rounded-full border border-slate-200 bg-slate-100"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:h.fullName}),t.jsx("div",{className:"text-xs text-slate-600 truncate",children:h.email})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Upload new picture (PNG/JPG/WEBP, max 5MB)"}),t.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/webp",onChange:P=>Y(P.target.files?.[0]),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900"})]}),t.jsx("div",{className:"mt-3 flex items-center justify-end gap-3",children:t.jsx("button",{onClick:I,className:ul("rounded-2xl px-4 py-2 text-sm font-semibold border",i?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-rose-50 text-rose-700 border-rose-200 hover:opacity-90"),type:"button",disabled:i,children:"Remove photo"})})]}),t.jsxs(_o,{title:"Security",children:[t.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-3 text-sm text-slate-700",children:["Password rules: ",t.jsx("span",{className:"font-semibold",children:"minimum 8 characters"})," and include"," ",t.jsx("span",{className:"font-semibold",children:"at least 1 special character"}),"."]}),t.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Current password"}),t.jsx("input",{type:"password",value:k.current,onChange:P=>L($=>({...$,current:P.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",placeholder:"Enter current password"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"New password"}),t.jsx("input",{type:"password",value:k.next,onChange:P=>L($=>({...$,next:P.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",placeholder:"Enter new password"})]})]}),t.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Confirm new password"}),t.jsx("input",{type:"password",value:k.confirm,onChange:P=>L($=>({...$,confirm:P.target.value})),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",placeholder:"Re-enter new password"})]}),t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-xs text-slate-700",children:[t.jsxs("div",{className:ul("flex items-center gap-2",M.okLen?"text-emerald-700":"text-slate-600"),children:[t.jsx("span",{children:M.okLen?"":""})," At least 8 characters"]}),t.jsxs("div",{className:ul("flex items-center gap-2 mt-1",M.okSpecial?"text-emerald-700":"text-slate-600"),children:[t.jsx("span",{children:M.okSpecial?"":""})," Contains a special character"]}),t.jsxs("div",{className:ul("flex items-center gap-2 mt-1",M.okMatch?"text-emerald-700":"text-slate-600"),children:[t.jsx("span",{children:M.okMatch?"":""})," Passwords match"]})]})]}),t.jsxs("div",{className:"pt-4 flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:()=>L({current:"",next:"",confirm:""}),className:"rounded-2xl px-5 py-2 text-sm font-semibold border bg-white border-slate-200 hover:bg-slate-50 text-slate-900",type:"button",disabled:N||i,children:"Clear"}),t.jsx("button",{onClick:T,className:ul("rounded-2xl px-5 py-2 text-sm font-semibold border",J?"bg-slate-900 text-white border-slate-900 hover:bg-slate-800":"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed"),type:"button",disabled:!J,children:N?"Saving...":"Save password"})]})]})]}):t.jsx("div",{className:"text-sm text-slate-700",children:"No profile data."})]})})}const ug="http://localhost:5000";function mg(a=!0){const r=localStorage.getItem("token")||"",i={};return a&&(i["Content-Type"]="application/json"),r&&(i.Authorization=`Bearer ${r}`),i}async function xg(a){const r=await a.json().catch(()=>({}));if(!a.ok)throw new Error(r.message||`Request failed (${a.status})`);return r}async function l1({role:a,department:r=""}){const i=new URLSearchParams;a&&i.set("role",a),r&&i.set("department",r);const c=await fetch(`${ug}/api/impersonation/targets?${i.toString()}`,{headers:mg(!0)});return xg(c)}async function a1({role:a,userId:r}){const i=await fetch(`${ug}/api/impersonation/start`,{method:"POST",headers:mg(!0),body:JSON.stringify({role:a,userId:r})});return xg(i)}function _m(...a){return a.filter(Boolean).join(" ")}function n1({kind:a="info",message:r,onClose:i}){if(!r)return null;const c=a==="error"?"border-rose-200 bg-rose-50 text-rose-700":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-700";return t.jsx("div",{className:_m("mb-4 rounded-2xl border px-4 py-3 shadow-sm",c),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"text-sm",children:r}),t.jsx("button",{onClick:i,className:"text-slate-500 hover:text-slate-700 text-sm font-semibold",type:"button",children:""})]})})}function r1({title:a,children:r,className:i=""}){return t.jsxs("div",{className:_m("rounded-3xl bg-white border border-slate-200 p-6 shadow-sm",i),children:[a?t.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-3",children:a}):null,r]})}function i1(){const[a,r]=x.useState(!1),[i,c]=x.useState({kind:"info",text:""}),[m,u]=x.useState("employee"),[h,g]=x.useState(""),[p,b]=x.useState([]),[j,v]=x.useState([]),[D,C]=x.useState(""),z=m==="employee";async function _(N=m,U=h){r(!0),c({kind:"info",text:""});try{const M=await l1({role:N,department:N==="employee"?U:""}),J=Array.isArray(M?.departments)?M.departments:Array.isArray(M?.data?.departments)?M.data.departments:[],te=Array.isArray(M?.users)?M.users:Array.isArray(M?.items)?M.items:Array.isArray(M?.data?.users)?M.data.users:Array.isArray(M?.data?.items)?M.data.items:[];b(J),v(te),te.some(q=>String(q.id||q._id)===String(D))||C("")}catch(M){b([]),v([]),C(""),c({kind:"error",text:M.message||"Failed to load impersonation targets."})}finally{r(!1)}}x.useEffect(()=>{m==="payroll_manager"&&g(""),C(""),_(m,m==="employee"?h:"")},[m]),x.useEffect(()=>{z&&_(m,h)},[h]);const k=x.useMemo(()=>j.find(N=>String(N.id||N._id)===String(D))||null,[j,D]);async function L(){if(!a){if(!D){c({kind:"error",text:"Please select a user to impersonate."});return}r(!0),c({kind:"info",text:""});try{const N=localStorage.getItem("token"),U=localStorage.getItem("user");N&&U&&(localStorage.setItem("imp_admin_token",N),localStorage.setItem("imp_admin_user",U));const M=await a1({role:m,userId:D});localStorage.setItem("token",M.token);const J={...M.user||{},impersonating:!0,role:M.user?.role||m};localStorage.setItem("user",JSON.stringify(J)),window.dispatchEvent(new Event("user:updated"));const te=J?.role;te==="payroll_manager"||te==="admin"?window.location.href="/pm/dashboard":window.location.href="/dashboard"}catch(N){c({kind:"error",text:N.message||"Failed to start impersonation."})}finally{r(!1)}}}return t.jsxs(Nt,{title:"Impersonation",children:[t.jsx(n1,{kind:i.kind,message:i.text,onClose:()=>c({kind:"info",text:""})}),t.jsxs(r1,{title:"Impersonate a user",children:[t.jsxs("div",{className:"text-sm text-slate-600 mb-4",children:["Admin only. You can impersonate an ",t.jsx("span",{className:"font-semibold",children:"Employee"})," or a"," ",t.jsx("span",{className:"font-semibold",children:"Payroll Manager"}),"."]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Role to impersonate"}),t.jsxs("select",{value:m,onChange:N=>u(N.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",disabled:a,children:[t.jsx("option",{value:"employee",children:"Employee"}),t.jsx("option",{value:"payroll_manager",children:"Payroll Manager"})]})]}),z?t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Department (optional)"}),t.jsxs("select",{value:h,onChange:N=>g(N.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",disabled:a,children:[t.jsx("option",{value:"",children:"All departments"}),p.map(N=>t.jsx("option",{value:N,children:N},N))]})]}):null]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:["Select ",m==="employee"?"employee":"payroll manager"]}),t.jsxs("select",{value:D,onChange:N=>C(N.target.value),className:"w-full rounded-2xl border border-slate-200 px-3 py-2 text-sm bg-white text-slate-900",disabled:a,children:[t.jsx("option",{value:"",children:"-- Select --"}),j.map(N=>{const U=String(N.id||N._id||"");if(!U)return null;const M=`${N.fullName||N.email||U}`+(N.department?`  ${N.department}`:"");return t.jsx("option",{value:U,children:M},U)})]}),k?t.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Selected: ",t.jsx("span",{className:"font-semibold",children:k.fullName||k.email}),k.email?`  ${k.email}`:""]}):null]}),t.jsx("div",{className:"mt-6 flex items-center justify-end gap-3",children:t.jsx("button",{type:"button",onClick:L,disabled:a||!D,className:_m("rounded-2xl px-5 py-2 text-sm font-semibold border",a||!D?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-900 text-white border-slate-900 hover:bg-slate-800"),children:a?"Starting...":"Start impersonation"})})]})]})}function fg(...a){return a.filter(Boolean).join(" ")}function o1({tone:a="info",children:r,onClose:i}){const c="mb-4 rounded-2xl border px-4 py-3 text-sm flex items-start justify-between gap-3",m=a==="error"?"border-rose-200 bg-rose-50 text-rose-800":a==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-slate-200 bg-slate-50 text-slate-700";return t.jsxs("div",{className:fg(c,m),children:[t.jsx("div",{children:r}),i?t.jsx("button",{type:"button",className:"text-slate-500 hover:text-slate-800 font-bold leading-none",onClick:i,"aria-label":"Close",children:""}):null]})}function c1({open:a,title:r,message:i,confirmText:c="Confirm",onCancel:m,onConfirm:u}){return a?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:m}),t.jsx("div",{className:"absolute left-1/2 top-1/2 w-[94vw] sm:w-[560px] -translate-x-1/2 -translate-y-1/2",children:t.jsxs("div",{className:"rounded-3xl bg-white shadow-2xl border border-slate-200 overflow-hidden",onClick:h=>h.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-semibold text-slate-900",children:r}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:i})]}),t.jsx("button",{onClick:m,className:"h-9 w-9 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700",type:"button","aria-label":"Close",children:""})]}),t.jsxs("div",{className:"p-6 flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:m,className:"rounded-xl px-4 py-2 border border-slate-200 bg-white hover:bg-slate-50 text-slate-900 font-semibold",type:"button",children:"Cancel"}),t.jsx("button",{onClick:u,className:"rounded-xl px-4 py-2 border border-rose-200 bg-rose-50 hover:bg-rose-100 text-rose-800 font-semibold",type:"button",children:c})]})]})})]}):null}function d1(){const[a,r]=x.useState([]),[i,c]=x.useState(!0),[m,u]=x.useState(null),[h,g]=x.useState(""),[p,b]=x.useState("payroll"),[j,v]=x.useState(""),[D,C]=x.useState(null),[z,_]=x.useState({open:!1,doc:null});async function k(){c(!0);try{const q=await u2();r(Array.isArray(q)?q:[])}catch{C({tone:"error",text:"Failed to load documents."})}finally{c(!1)}}x.useEffect(()=>{k()},[]);const L=x.useMemo(()=>[...a].sort((q,Y)=>new Date(Y.createdAt)-new Date(q.createdAt)),[a]);async function N(q){if(q.preventDefault(),C(null),!m){C({tone:"error",text:"Please choose a file (PDF/DOCX/TXT)."});return}if(!p){C({tone:"error",text:"Please choose a category."});return}try{await m2({file:m,title:h,category:p,tags:j}),C({tone:"success",text:"Uploaded. Status is pending until processing is enabled."}),u(null),g(""),v("");const Y=document.getElementById("knowledge-file-input");Y&&(Y.value=""),await k()}catch{C({tone:"error",text:"Upload failed. Make sure the file type is allowed."})}}async function U(q){C(null);try{const Y=await x2(q._id,{isActive:!q.isActive});r(I=>I.map(T=>T._id===Y._id?Y:T))}catch{C({tone:"error",text:"Could not update document."})}}async function M(q){C(null);try{await f2(q._id),C({tone:"success",text:"Marked for reprocess (status set to pending)."}),await k()}catch{C({tone:"error",text:"Could not reprocess."})}}function J(q){_({open:!0,doc:q})}async function te(){const q=z.doc;if(!q?._id){_({open:!1,doc:null});return}C(null);try{await h2(q._id),C({tone:"success",text:"Document deleted."}),_({open:!1,doc:null}),await k()}catch{C({tone:"error",text:"Delete failed."}),_({open:!1,doc:null})}}return t.jsxs(Nt,{title:"Knowledge Hub Documents",children:[t.jsxs("div",{className:"rounded-[28px] bg-white text-slate-900 border border-slate-200 p-6",children:[D?t.jsx(o1,{tone:D.tone,onClose:()=>C(null),children:D.text}):null,t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5",children:[t.jsx("div",{className:"text-base font-semibold mb-1",children:"Upload document"}),t.jsx("div",{className:"text-sm text-slate-600 mb-4",children:"The uploaded documents will be broken into chunks and used for the Knowledge Hub."}),t.jsxs("form",{onSubmit:N,className:"grid grid-cols-1 md:grid-cols-12 gap-3",children:[t.jsxs("div",{className:"md:col-span-4",children:[t.jsx("label",{className:"block text-xs text-slate-600 mb-1",children:"File (PDF/DOCX/TXT)"}),t.jsx("input",{id:"knowledge-file-input",type:"file",accept:".pdf,.docx,.txt,application/pdf,text/plain,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:q=>u(q.target.files?.[0]||null),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm"})]}),t.jsxs("div",{className:"md:col-span-3",children:[t.jsx("label",{className:"block text-xs text-slate-600 mb-1",children:"Title (optional)"}),t.jsx("input",{value:h,onChange:q=>g(q.target.value),placeholder:"e.g. Leave Policy 2026",className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-xs text-slate-600 mb-1",children:"Category"}),t.jsxs("select",{value:p,onChange:q=>b(q.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm",children:[t.jsx("option",{value:"payroll",children:"Payroll"}),t.jsx("option",{value:"leave",children:"Leave"}),t.jsx("option",{value:"overtime",children:"Overtime"}),t.jsx("option",{value:"it",children:"IT"}),t.jsx("option",{value:"hr",children:"HR"}),t.jsx("option",{value:"system",children:"System"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-xs text-slate-600 mb-1",children:"Tags (comma)"}),t.jsx("input",{value:j,onChange:q=>v(q.target.value),placeholder:"policy, faq",className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm"})]}),t.jsx("div",{className:"md:col-span-2 flex items-end justify-end",children:t.jsx("button",{type:"submit",className:"min-w-[120px] rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-900 bg-slate-900 hover:bg-slate-800 text-white",children:"Upload"})})]})]}),t.jsxs("div",{className:"mt-5 rounded-3xl border border-slate-200 bg-white overflow-hidden",children:[t.jsxs("div",{className:"px-5 py-4 border-b border-slate-200 flex items-center justify-between",children:[t.jsx("div",{className:"text-base font-semibold",children:"Documents"}),t.jsx("button",{onClick:k,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50",type:"button",children:"Refresh"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-slate-600",children:t.jsxs("tr",{className:"border-b border-slate-200",children:[t.jsx("th",{className:"text-left px-5 py-3",children:"Title"}),t.jsx("th",{className:"text-left px-4 py-3",children:"Category"}),t.jsx("th",{className:"text-left px-4 py-3",children:"Status"}),t.jsx("th",{className:"text-left px-4 py-3",children:"Active"}),t.jsx("th",{className:"text-left px-4 py-3",children:"Uploaded"}),t.jsx("th",{className:"text-right px-5 py-3",children:"Actions"})]})}),t.jsx("tbody",{className:"text-slate-900",children:i?t.jsx("tr",{children:t.jsx("td",{className:"px-5 py-4 text-slate-600",colSpan:6,children:"Loading"})}):L.length===0?t.jsx("tr",{children:t.jsx("td",{className:"px-5 py-4 text-slate-600",colSpan:6,children:"No documents yet."})}):L.map(q=>t.jsxs("tr",{className:"border-b border-slate-200",children:[t.jsxs("td",{className:"px-5 py-4",children:[t.jsx("div",{className:"font-semibold",children:q.title}),Array.isArray(q.tags)&&q.tags.length?t.jsx("div",{className:"text-xs text-slate-500 mt-1",children:q.tags.join(", ")}):null]}),t.jsx("td",{className:"px-4 py-4 text-slate-700",children:String(q.category||"").toUpperCase()}),t.jsxs("td",{className:"px-4 py-4",children:[t.jsx("span",{className:"text-xs rounded-full border border-slate-200 bg-slate-50 px-2 py-1",children:q.status}),q.error?t.jsx("div",{className:"text-xs text-rose-700 mt-1",children:q.error}):null]}),t.jsx("td",{className:"px-4 py-4",children:t.jsx("button",{onClick:()=>U(q),className:fg("text-xs rounded-full px-3 py-1 border font-semibold",q.isActive?"border-emerald-200 bg-emerald-50 text-emerald-900":"border-slate-200 bg-slate-50 text-slate-800"),type:"button",children:q.isActive?"Active":"Archived"})}),t.jsx("td",{className:"px-4 py-4 text-slate-600",children:q.createdAt?new Date(q.createdAt).toLocaleString():"-"}),t.jsxs("td",{className:"px-5 py-4 text-right space-x-2",children:[t.jsx("button",{onClick:()=>M(q),className:"rounded-2xl px-3 py-2 text-xs font-semibold border border-slate-200 bg-white hover:bg-slate-50",type:"button",children:"Reprocess"}),t.jsx("button",{onClick:()=>J(q),className:"rounded-2xl px-3 py-2 text-xs font-semibold border border-rose-200 bg-rose-50 hover:bg-rose-100 text-rose-800",type:"button",children:"Delete"})]})]},q._id))})]})})]})]}),t.jsx(c1,{open:z.open,title:"Delete document?",message:`This will permanently delete "${z.doc?.title||"this document"}" from the Knowledge Hub.`,confirmText:"Delete",onCancel:()=>_({open:!1,doc:null}),onConfirm:te})]})}function Po(...a){return a.filter(Boolean).join(" ")}function u1({active:a,children:r,onClick:i}){return t.jsx("button",{type:"button",onClick:i,className:Po("rounded-full border px-3 py-1 text-xs font-semibold transition",a?"border-emerald-200 bg-emerald-50 text-emerald-900":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"),children:r})}function Lo(a){const r=Number(a);return Number.isNaN(r)?.75:Math.max(0,Math.min(1,r))}function m1(){const[a,r]=x.useState(!0),[i,c]=x.useState(!1),[m,u]=x.useState(null),[h,g]=x.useState(null),p=["payroll","leave","overtime","it","hr","system"],b=["payslip","salary","tax","deduction","allowance","overtime","leave","pay date","bank","pension"],j=["login","password","error","access","account","cannot","failed","bug","issue","system","crash"];async function v(){r(!0),u(null);try{const k=await p2(),L=Array.isArray(k?.routingRules?.payrollKeywords)?k.routingRules.payrollKeywords:[],N=Array.isArray(k?.routingRules?.technicalKeywords)?k.routingRules.technicalKeywords:[],U={...k||{},allowPmUploads:k?.allowPmUploads!==!1,allowedCategories:Array.isArray(k?.allowedCategories)&&k.allowedCategories.length?k.allowedCategories:p,escalation:{...k?.escalation||{},minSimilarity:typeof k?.escalation?.minSimilarity=="number"?Lo(k.escalation.minSimilarity):.75},routingRules:{...k?.routingRules||{},payrollKeywords:L.length?L:b,technicalKeywords:N.length?N:j}};g(U)}catch{u({tone:"error",text:"Failed to load settings."})}finally{r(!1)}}x.useEffect(()=>{v()},[]);async function D(){c(!0),u(null);try{const k={...h||{},escalation:{...h?.escalation||{},minSimilarity:Lo(h?.escalation?.minSimilarity)}},L=await b2(k);g({...L||k,escalation:{...L?.escalation||k.escalation,minSimilarity:Lo((L?.escalation||k.escalation)?.minSimilarity)}}),u({tone:"success",text:"Saved."})}catch{u({tone:"error",text:"Save failed."})}finally{c(!1)}}function C(k){g(L=>{const N=L?.allowedCategories||p,U=N.includes(k)?N.filter(M=>M!==k):[...N,k];return{...L||{},allowedCategories:U}})}const z=h?.escalation?.minSimilarity??.75,_=typeof z=="number"?z<0||z>1:!0;return t.jsx(Nt,{title:"Knowledge Hub Settings",children:t.jsx("div",{className:"rounded-[28px] bg-white text-slate-900 border border-slate-200 p-6",children:a?t.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 text-slate-600",children:"Loading"}):h?t.jsxs(t.Fragment,{children:[m?t.jsx("div",{className:Po("mb-4 rounded-2xl border px-4 py-3 text-sm",m.tone==="success"?"border-emerald-200 bg-emerald-50 text-emerald-900":"border-rose-200 bg-rose-50 text-rose-800"),children:m.text}):null,t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 space-y-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-base font-semibold text-slate-900",children:"Allowed categories"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"These categories are considered in scope for the Knowledge Hub."}),t.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:p.map(k=>t.jsx(u1,{active:(h.allowedCategories||[]).includes(k),onClick:()=>C(k),children:k.toUpperCase()},k))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-base font-semibold text-slate-900",children:"Escalation threshold"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"If the top similarity is below this, we suggest a ticket."}),t.jsx("label",{className:"block text-xs text-slate-600 mt-3 mb-1",children:"Min similarity (0.00 - 1.00)"}),t.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:z,onChange:k=>g(L=>({...L||{},escalation:{...L?.escalation||{},minSimilarity:Number(k.target.value)}})),onBlur:()=>g(k=>({...k||{},escalation:{...k?.escalation||{},minSimilarity:Lo(k?.escalation?.minSimilarity)}})),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm"}),_?t.jsx("div",{className:"mt-2 text-xs text-rose-700",children:"Value must be between 0 and 1. It will be clamped on save/blur."}):null]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-base font-semibold text-slate-900",children:"PM uploads"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Allow Payroll Manager to upload docs."}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{type:"button",onClick:()=>g(k=>({...k||{},allowPmUploads:!k?.allowPmUploads})),className:Po("rounded-2xl px-4 py-2 text-sm font-semibold border transition",h.allowPmUploads?"border-emerald-200 bg-emerald-50 text-emerald-900":"border-slate-200 bg-slate-50 text-slate-800"),children:h.allowPmUploads?"Enabled":"Disabled"})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-base font-semibold text-slate-900",children:"Payroll keywords"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Used to pick Payroll vs Technical escalation."}),t.jsx("textarea",{value:(h?.routingRules?.payrollKeywords||[]).join(", "),onChange:k=>g(L=>({...L||{},routingRules:{...L?.routingRules||{},payrollKeywords:k.target.value.split(",").map(N=>N.trim()).filter(Boolean)}})),className:"mt-2 w-full min-h-[100px] rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm",placeholder:"payslip, salary, tax, ..."})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-base font-semibold text-slate-900",children:"Technical keywords"}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Used to pick Payroll vs Technical escalation."}),t.jsx("textarea",{value:(h?.routingRules?.technicalKeywords||[]).join(", "),onChange:k=>g(L=>({...L||{},routingRules:{...L?.routingRules||{},technicalKeywords:k.target.value.split(",").map(N=>N.trim()).filter(Boolean)}})),className:"mt-2 w-full min-h-[100px] rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm",placeholder:"login, password, error, ..."})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:v,className:"rounded-2xl px-4 py-2 text-sm font-semibold border border-slate-200 bg-white hover:bg-slate-50",children:"Reset"}),t.jsx("button",{type:"button",onClick:D,disabled:i,className:Po("rounded-2xl px-4 py-2 text-sm font-semibold border",i?"border-slate-200 bg-slate-50 text-slate-400":"border-slate-900 bg-slate-900 hover:bg-slate-800 text-white"),children:i?"Saving":"Save"})]})]})]}):t.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 text-slate-600",children:"Could not load settings."})})})}function hg(){try{return JSON.parse(localStorage.getItem("user")||"{}")||{}}catch{return{}}}function pg(a){return a==="payroll_manager"||a==="admin"?"/pm/dashboard":"/dashboard"}function cs({children:a}){return localStorage.getItem("token")?a:t.jsx(Sn,{to:"/login",replace:!0})}function yt({roles:a=[],children:r}){if(!localStorage.getItem("token"))return t.jsx(Sn,{to:"/login",replace:!0});const m=hg()?.role;return!m||!a.includes(m)?t.jsx(Sn,{to:pg(m),replace:!0}):r}function x1(...a){return a.filter(Boolean).join(" ")}const ab={darkMode:!0,largeText:!1,notifications:!0,highContrast:!1};function Iu(){try{const a=localStorage.getItem("accessibility_prefs"),r=a?JSON.parse(a):{};return{...ab,...r||{}}}catch{return ab}}function f1(){const[a,r]=x.useState(()=>Iu());x.useEffect(()=>{const m=setInterval(()=>r(Iu()),700);function u(h){h.key==="accessibility_prefs"&&r(Iu())}return window.addEventListener("storage",u),()=>{clearInterval(m),window.removeEventListener("storage",u)}},[]),x.useEffect(()=>{async function m(){try{await flushOutbox({max:50})}catch{}}return window.addEventListener("online",m),navigator.onLine&&m(),()=>window.removeEventListener("online",m)},[]);const i=x.useMemo(()=>x1(a.largeText?"text-[15px]":"",a.highContrast?"contrast-125":"",a.darkMode?"":"text-slate-900"),[a]),c=x.useMemo(()=>a.darkMode?void 0:{background:"linear-gradient(to bottom right, #f8fafc, #eef2ff, #f1f5f9)"},[a.darkMode]);return t.jsx("div",{className:i,style:c,children:t.jsxs(_j,{children:[t.jsx(qe,{path:"/login",element:t.jsx(fN,{})}),t.jsx(qe,{path:"/dashboard",element:t.jsx(cs,{children:t.jsx(dw,{})})}),t.jsx(qe,{path:"/payslips",element:t.jsx(cs,{children:t.jsx(mw,{})})}),t.jsx(qe,{path:"/payslips/:id",element:t.jsx(cs,{children:t.jsx(fw,{})})}),t.jsx(qe,{path:"/profile",element:t.jsx(cs,{children:t.jsx(Lw,{})})}),t.jsx(qe,{path:"/overtime",element:t.jsx(cs,{children:t.jsx(Bw,{})})}),t.jsx(qe,{path:"/leave",element:t.jsx(cs,{children:t.jsx(Zw,{})})}),t.jsx(qe,{path:"/support",element:t.jsx(cs,{children:t.jsx(Ww,{})})}),t.jsx(qe,{path:"/progressions",element:t.jsx(cs,{children:t.jsx(d2,{})})}),t.jsx(qe,{path:"/knowledge",element:t.jsx(cs,{children:t.jsx(j2,{})})}),t.jsx(qe,{path:"/accessibility",element:t.jsx(cs,{children:t.jsx(k2,{})})}),t.jsx(qe,{path:"/documents",element:t.jsx(cs,{children:t.jsx(Ew,{})})}),t.jsx(qe,{path:"/pm/dashboard",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(O2,{})})}),t.jsx(qe,{path:"/pm/support",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(B2,{})})}),t.jsx(qe,{path:"/pm/leave-approvals",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(H2,{})})}),t.jsx(qe,{path:"/pm/overtime-approvals",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(Z2,{})})}),t.jsx(qe,{path:"/pm/progressions",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(tS,{})})}),t.jsx(qe,{path:"/pm/adjustments",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(US,{})})}),t.jsx(qe,{path:"/pm/employees",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(dS,{})})}),t.jsx(qe,{path:"/pm/access-rights",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(gS,{})})}),t.jsx(qe,{path:"/pm/employee-documents",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(vS,{})})}),t.jsx(qe,{path:"/pm/reports",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(FS,{})})}),t.jsx(qe,{path:"/pm/audit",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(Sn,{to:"/pm/dashboard",replace:!0})})}),t.jsx(qe,{path:"/pm/profile-requests",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(G2,{})})}),t.jsx(qe,{path:"/admin/impersonate",element:t.jsx(yt,{roles:["admin"],children:t.jsx(i1,{})})}),t.jsx(qe,{path:"/pm/paycodes",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(NS,{})})}),t.jsx(qe,{path:"/pm/accessibility",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(IS,{})})}),t.jsx(qe,{path:"/pm/knowledge/documents",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(d1,{})})}),t.jsx(qe,{path:"/admin/knowledge/settings",element:t.jsx(yt,{roles:["admin"],children:t.jsx(m1,{})})}),t.jsx(qe,{path:"/pm/profile",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(s1,{})})}),t.jsx(qe,{path:"/pm/employees/:id/compensation",element:t.jsx(yt,{roles:["payroll_manager","admin"],children:t.jsx(wS,{})})}),t.jsx(qe,{path:"/",element:t.jsx(cs,{children:t.jsx(Sn,{to:pg(hg()?.role),replace:!0})})}),t.jsx(qe,{path:"*",element:t.jsx(Sn,{to:"/",replace:!0})})]})})}const h1="modulepreload",p1=function(a){return"/"+a},nb={},b1=function(r,i,c){let m=Promise.resolve();if(i&&i.length>0){let b=function(j){return Promise.all(j.map(v=>Promise.resolve(v).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};var h=b;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),p=g?.nonce||g?.getAttribute("nonce");m=b(i.map(j=>{if(j=p1(j),j in nb)return;nb[j]=!0;const v=j.endsWith(".css"),D=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${j}"]${D}`))return;const C=document.createElement("link");if(C.rel=v?"stylesheet":h1,v||(C.as="script"),C.crossOrigin="",C.href=j,p&&C.setAttribute("nonce",p),document.head.appendChild(C),v)return new Promise((z,_)=>{C.addEventListener("load",z),C.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${j}`)))})}))}function u(g){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=g,window.dispatchEvent(p),!p.defaultPrevented)throw g}return m.then(g=>{for(const p of g||[])p.status==="rejected"&&u(p.reason);return r().catch(u)})};function g1(a={}){const{immediate:r=!1,onNeedRefresh:i,onOfflineReady:c,onRegistered:m,onRegisteredSW:u,onRegisterError:h}=a;let g,p;const b=async(v=!0)=>{await p};async function j(){if("serviceWorker"in navigator){if(g=await b1(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/sw.js",{scope:"/",type:"classic"})).catch(v=>{h?.(v)}),!g)return;g.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),g.addEventListener("installed",v=>{v.isUpdate||c?.()}),g.register({immediate:r}).then(v=>{u?u("/sw.js",v):m?.(v)}).catch(v=>{h?.(v)})}}return p=j(),b}let rb=!1;function y1(a){const r=new Set;for(const i of a||[]){const m=String(i?.tag||"").split(":")[0];m&&r.add(m)}return Array.from(r)}function v1(a){const r=new Set;for(const i of a||[]){const c=String(i?.module||"").trim();c&&r.add(c)}return Array.from(r)}function j1({intervalMs:a=8e3}={}){if(rb)return;rb=!0;async function r(){if(!navigator.onLine)return;const i=await GN(),c=await Ob(),m=Array.from(new Set([...y1(i),...v1(c)])),{synced:u}=await JN({max:50}),h=await _N({max:25});((u||0)>0||(h?.flushed||0)>0)&&window.dispatchEvent(new CustomEvent("outbox:flushed",{detail:{modules:m}}))}window.addEventListener("online",r),setInterval(r,a),r()}j1({intervalMs:8e3});g1({immediate:!0});zv.createRoot(document.getElementById("root")).render(t.jsx(Tv.StrictMode,{children:t.jsx(aN,{children:t.jsx(f1,{})})}));
